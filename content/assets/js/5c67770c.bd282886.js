"use strict";(self.webpackChunkwebsite_next=self.webpackChunkwebsite_next||[]).push([[16935],{15680:(e,a,t)=>{t.d(a,{xA:()=>s,yg:()=>m});var r=t(96540);function l(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function p(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?p(Object(t),!0).forEach((function(a){l(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function n(e,a){if(null==e)return{};var t,r,l=function(e,a){if(null==e)return{};var t,r,l={},p=Object.keys(e);for(r=0;r<p.length;r++)t=p[r],a.indexOf(t)>=0||(l[t]=e[t]);return l}(e,a);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(r=0;r<p.length;r++)t=p[r],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}var o=r.createContext({}),u=function(e){var a=r.useContext(o),t=a;return e&&(t="function"==typeof e?e(a):i(i({},a),e)),t},s=function(e){var a=u(e.components);return r.createElement(o.Provider,{value:a},e.children)},c="mdxType",h={inlineCode:"code",wrapper:function(e){var a=e.children;return r.createElement(r.Fragment,{},a)}},g=r.forwardRef((function(e,a){var t=e.components,l=e.mdxType,p=e.originalType,o=e.parentName,s=n(e,["components","mdxType","originalType","parentName"]),c=u(t),g=l,m=c["".concat(o,".").concat(g)]||c[g]||h[g]||p;return t?r.createElement(m,i(i({ref:a},s),{},{components:t})):r.createElement(m,i({ref:a},s))}));function m(e,a){var t=arguments,l=a&&a.mdxType;if("string"==typeof e||l){var p=t.length,i=new Array(p);i[0]=g;var n={};for(var o in a)hasOwnProperty.call(a,o)&&(n[o]=a[o]);n.originalType=e,n[c]="string"==typeof e?e:l,i[1]=n;for(var u=2;u<p;u++)i[u]=t[u];return r.createElement.apply(null,i)}return r.createElement.apply(null,t)}g.displayName="MDXCreateElement"},14632:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>o,contentTitle:()=>i,default:()=>h,frontMatter:()=>p,metadata:()=>n,toc:()=>u});var r=t(58168),l=(t(96540),t(15680));const p={id:"pulsar-3.1.1",title:"Apache Pulsar 3.1.1",sidebar_label:"Apache Pulsar 3.1.1"},i=void 0,n={unversionedId:"versioned/pulsar-3.1.1",id:"versioned/pulsar-3.1.1",title:"Apache Pulsar 3.1.1",description:"2023-10-24",source:"@site/release-notes/versioned/pulsar-3.1.1.md",sourceDirName:"versioned",slug:"/versioned/pulsar-3.1.1",permalink:"/release-notes/versioned/pulsar-3.1.1",draft:!1,editUrl:"https://github.com/apache/pulsar-site/edit/main/release-notes/versioned/pulsar-3.1.1.md",tags:[],version:"current",frontMatter:{id:"pulsar-3.1.1",title:"Apache Pulsar 3.1.1",sidebar_label:"Apache Pulsar 3.1.1"}},o={},u=[{value:"2023-10-24",id:"2023-10-24",level:4},{value:"Broker",id:"broker",level:3},{value:"Pulsar IO and Pulsar Functions",id:"pulsar-io-and-pulsar-functions",level:3},{value:"CLI",id:"cli",level:3},{value:"Others",id:"others",level:3},{value:"Library updates",id:"library-updates",level:3}],s={toc:u},c="wrapper";function h(e){let{components:a,...t}=e;return(0,l.yg)(c,(0,r.A)({},s,t,{components:a,mdxType:"MDXLayout"}),(0,l.yg)("h4",{id:"2023-10-24"},"2023-10-24"),(0,l.yg)("h3",{id:"broker"},"Broker"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Fix incorrect number of read compacted entries ",(0,l.yg)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/20978"},"#20978")),(0,l.yg)("li",{parentName:"ul"},"Fix message loss during topic compaction ",(0,l.yg)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/20980"},"#20980")),(0,l.yg)("li",{parentName:"ul"},"Fix get outdated compactedTopicContext after compactionHorizon has been updated ",(0,l.yg)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/20984"},"#20984")),(0,l.yg)("li",{parentName:"ul"},"Fix compaction subscription delete by inactive subscription check ",(0,l.yg)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/20983"},"#20983")),(0,l.yg)("li",{parentName:"ul"},"Fix incorrect unack msk count when dup ack a message ",(0,l.yg)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/20990"},"#20990")),(0,l.yg)("li",{parentName:"ul"},"Fix ModularLoadManagerImpl always delete active bundle-data ",(0,l.yg)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/20620"},"#20620")),(0,l.yg)("li",{parentName:"ul"},"Use MessageDigest.isEqual when comparing digests ",(0,l.yg)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21061"},"#21061")),(0,l.yg)("li",{parentName:"ul"},"Fix can't stop phase-two of compaction even though messageId read reaches lastReadId ",(0,l.yg)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/20988"},"#20988")),(0,l.yg)("li",{parentName:"ul"},"Make sure all inflight writes have finished before completion of compaction ",(0,l.yg)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21067"},"#21067")),(0,l.yg)("li",{parentName:"ul"},"Fix chunked messages will be filtered by duplicating ",(0,l.yg)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/20948"},"#20948")),(0,l.yg)("li",{parentName:"ul"},"Fix potential case cause retention policy not working on topic level ",(0,l.yg)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21041"},"#21041")),(0,l.yg)("li",{parentName:"ul"},"Make read compacted entries support maxReadSizeBytes limitation ",(0,l.yg)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21065"},"#21065")),(0,l.yg)("li",{parentName:"ul"},"Remove bundle-data in local metadata store ",(0,l.yg)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21078"},"#21078")),(0,l.yg)("li",{parentName:"ul"},"Fix write duplicate entries into the compacted ledger after RawReader reconnects ",(0,l.yg)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21081"},"#21081")),(0,l.yg)("li",{parentName:"ul"},"Cleanup correctly heartbeat bundle ownership when handling broker deletion event ",(0,l.yg)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21083"},"#21083")),(0,l.yg)("li",{parentName:"ul"},"Avoid splitting one batch message into two entries in StrategicTwoPhaseCompactor ",(0,l.yg)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21091"},"#21091")),(0,l.yg)("li",{parentName:"ul"},"Fix unsubscribe non-durable subscription error ",(0,l.yg)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21099"},"#21099")),(0,l.yg)("li",{parentName:"ul"},"Fix isolated group not work problem ",(0,l.yg)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21096"},"#21096")),(0,l.yg)("li",{parentName:"ul"},"Consider iowait as idle ",(0,l.yg)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/19110"},"#19110")),(0,l.yg)("li",{parentName:"ul"},"Fix deleting topic not delete the related topic policy and schema ",(0,l.yg)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21093"},"#21093")),(0,l.yg)("li",{parentName:"ul"},"Revert remove duplicate topics name when deleteNamespace ",(0,l.yg)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21087"},"#21087")),(0,l.yg)("li",{parentName:"ul"},"Improve logs for troubleshooting ",(0,l.yg)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21141"},"#21141")),(0,l.yg)("li",{parentName:"ul"},"Fix web tls url null cause NPE ",(0,l.yg)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21137"},"#21137")),(0,l.yg)("li",{parentName:"ul"},"Fix unack count when mixing non batch index and batch index acks ",(0,l.yg)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21126"},"#21126")),(0,l.yg)("li",{parentName:"ul"},"Backport fix UniformLoadShedder selecet wrong overloadbroker and underloadbroker ",(0,l.yg)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21180"},"#21180")),(0,l.yg)("li",{parentName:"ul"},"Fix bug caused by optimistic locking ",(0,l.yg)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/18390"},"#18390")),(0,l.yg)("li",{parentName:"ul"},"Disable balancing based on DirectMemory ",(0,l.yg)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21168"},"#21168")),(0,l.yg)("li",{parentName:"ul"},"Fix replicator leak when removeReplicator in NonPersistentTopic ",(0,l.yg)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21205"},"#21205")),(0,l.yg)("li",{parentName:"ul"},"Fixed reset for AggregatedNamespaceStats ",(0,l.yg)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21225"},"#21225")),(0,l.yg)("li",{parentName:"ul"},"Fixed produce and consume when anonymousUserRole enabled ",(0,l.yg)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21237"},"#21237"))),(0,l.yg)("h3",{id:"pulsar-io-and-pulsar-functions"},"Pulsar IO and Pulsar Functions"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"[FN]"," Fix ProducerConfig cannot update error ",(0,l.yg)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21037"},"#21037")),(0,l.yg)("li",{parentName:"ul"},"[FN]"," Fix the --batch-builder not working error for functions ",(0,l.yg)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21023"},"#21023")),(0,l.yg)("li",{parentName:"ul"},"[FN]"," Fix functions_log4j2.xml delete strategy config ",(0,l.yg)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21215"},"#21215")),(0,l.yg)("li",{parentName:"ul"},"[IO]"," Fix --retain","[-key]","-ordering not working error for sink ",(0,l.yg)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21060"},"#21060"))),(0,l.yg)("h3",{id:"cli"},"CLI"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"[Admin]"," Fix get topic stats fail if a subscription catch up concurrently ",(0,l.yg)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/20971"},"#20971"))),(0,l.yg)("h3",{id:"others"},"Others"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"[META]"," Fix deadlock in AutoRecovery ",(0,l.yg)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21010"},"#21010")),(0,l.yg)("li",{parentName:"ul"},"[META]"," Improve fault tolerance of blocking calls by supporting timeout ",(0,l.yg)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21028"},"#21028")),(0,l.yg)("li",{parentName:"ul"},"[META]"," Improve to the ReplicaitonWorker performance by deleting invalid underreplication nodes ",(0,l.yg)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21059"},"#21059")),(0,l.yg)("li",{parentName:"ul"},"[META]"," Fix metadata store deadlock due to BookkeeperInternalCallbacks.Processor ",(0,l.yg)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21159"},"#21159")),(0,l.yg)("li",{parentName:"ul"},"[META]"," Fix PulsarLedgerUnderreplicationManager notify problem ",(0,l.yg)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21161"},"#21161")),(0,l.yg)("li",{parentName:"ul"},"[META]"," Fix pulsar ledger auditor dead lock problem ",(0,l.yg)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21181"},"#21181")),(0,l.yg)("li",{parentName:"ul"},"[ML]"," Persist mark deleted ops to ZK if create cursor ledger was failed ",(0,l.yg)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/20935"},"#20935")),(0,l.yg)("li",{parentName:"ul"},"[BK]"," Improve getIsolationGroup by avoid creating arrayList ",(0,l.yg)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/20952"},"#20952")),(0,l.yg)("li",{parentName:"ul"},"[BK]"," Fix RocksDB configuration ",(0,l.yg)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21157"},"#21157")),(0,l.yg)("li",{parentName:"ul"},"[Proxy]"," Support disabling metrics endpoint ",(0,l.yg)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21031"},"#21031")),(0,l.yg)("li",{parentName:"ul"},"[Proxy]"," Fix Proxy 502 gateway error when it is configured with Keystore TLS and admin API is called ",(0,l.yg)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21077"},"#21077")),(0,l.yg)("li",{parentName:"ul"},"[TXN]"," Fix the consumer stuck due to deduplicated messages in pending ack state ",(0,l.yg)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21177"},"#21177"))),(0,l.yg)("h3",{id:"library-updates"},"Library updates"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Bump GRPC version to 1.55.3 to fix CVE ",(0,l.yg)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21057"},"#21057")),(0,l.yg)("li",{parentName:"ul"},"Bump broker okio version to 3.4.0 ",(0,l.yg)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21064"},"#21064")),(0,l.yg)("li",{parentName:"ul"},"Upgrade bookkeeper to 4.16.3 ",(0,l.yg)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21146"},"#21146"))),(0,l.yg)("blockquote",null,(0,l.yg)("p",{parentName:"blockquote"},"A special thanks to the following contributors who contributed to Pulsar 3.1.1:\nmattisonchao, tuteng, poorbarcode, asafm, hanmz, horizonzy, aloyszhang, hrzzzz, thetumbled, hangc0276, zymap, Technoboy-, erobot, liangyepianzhou, Shawyeok, Demogorgon314, TakaHiR07, coderzc, Apurva007, RobertIndie, Crispy-fried-chicken, jiangpengcheng, michaeljmarshall, lifepuzzlefun, AnonHxy, codelipenghui")))}h.isMDXComponent=!0}}]);