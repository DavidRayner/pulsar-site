<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://pulsar.apache.org/blog</id>
    <title>Apache Pulsar Blog</title>
    <updated>2024-02-12T00:00:00.000Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://pulsar.apache.org/blog"/>
    <subtitle>Apache Pulsar Blog</subtitle>
    <icon>https://pulsar.apache.org/img/favicon.ico</icon>
    <entry>
        <title type="html"><![CDATA[What's New in Apache Pulsar 3.2.0]]></title>
        <id>https://pulsar.apache.org/blog/2024/02/12/announcing-apache-pulsar-3-2</id>
        <link href="https://pulsar.apache.org/blog/2024/02/12/announcing-apache-pulsar-3-2"/>
        <updated>2024-02-12T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[The Apache Pulsar community is thrilled to announce the launch of Apache Pulsar 3.2, a new feature release! This achievement is the result of a significant community collaboration, involving 57 contributors who made over 88 commits to add new features and fix bugs. Our heartfelt thanks go out to every contributor for their invaluable work!]]></summary>
        <content type="html"><![CDATA[<p>The Apache Pulsar community is thrilled to announce the launch of Apache Pulsar 3.2, a new feature release! This achievement is the result of a significant community collaboration, involving 57 contributors who made over 88 commits to add new features and fix bugs. Our heartfelt thanks go out to every contributor for their invaluable work!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="whats-new-in-apache-pulsar-32">What's new in Apache Pulsar 3.2?<a href="#whats-new-in-apache-pulsar-32" class="hash-link" aria-label="Direct link to What's new in Apache Pulsar 3.2?" title="Direct link to What's new in Apache Pulsar 3.2?">​</a></h2><p>This release introduces <a href="https://pulsar.apache.org/release-notes/versioned/pulsar-3.2.0/" target="_blank" rel="noopener noreferrer">180+ improvements, optimizations, and fixes</a> on the broker, Pulsar IO/Pulsar Functions, CLI, and others.</p><p>It also unveils key new features, highlighted below.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="rate-limiting">Rate limiting<a href="#rate-limiting" class="hash-link" aria-label="Direct link to Rate limiting" title="Direct link to Rate limiting">​</a></h3><p>An increasing number of messaging-as-a-service platform teams are adopting Apache Pulsar as their main building block for providing messaging services across their organizations. This is clear validation that the value of Apache Pulsar’s truly multi-tenant architecture is delivering results, making Apache Pulsar a cost-efficient and reliable solution for messaging-as-a-service platform teams in very demanding application environments.</p><p>In the Apache Pulsar project, we are committed to delivering further improvements to the existing multi-tenancy features. One area of improvement is the service level management and capacity management of a large Pulsar system. This is also a key concern of messaging-as-a-service platform teams.</p><p>Apache Pulsar 3.2.0 features the implementation of <a href="https://github.com/apache/pulsar/blob/master/pip/pip-322.md" target="_blank" rel="noopener noreferrer">PIP-322 Pulsar Rate Limiting Refactoring</a>. Rate limiters act as a conduit to more extensive capacity management and Quality of Service (QoS) controls in Pulsar. They are integral to Pulsar's core multi-tenancy features. This refactoring paves the way for future enhancements in this area.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="null-key-messages-deletion-during-compaction">Null-key messages deletion during compaction<a href="#null-key-messages-deletion-during-compaction" class="hash-link" aria-label="Direct link to Null-key messages deletion during compaction" title="Direct link to Null-key messages deletion during compaction">​</a></h3><p>Apache Pulsar supports <a href="https://pulsar.apache.org/docs/3.2.x/concepts-topic-compaction/" target="_blank" rel="noopener noreferrer">Topic Compaction</a>.</p><p>In versions 3.1.0 and earlier of Pulsar, topic compaction retains messages that have null keys.</p><p>Starting with Pulsar 3.2.0, the default behavior has been changed to delete messages with null keys during topic compaction, which helps in reducing storage costs. However, if necessary, you can revert to the previous behavior by setting <code>topicCompactionRetainNullKey=true</code> in <code>broker.conf</code>.</p><p>For more details, refer to the description in <a href="https://github.com/apache/pulsar/blob/master/pip/pip-318.md" target="_blank" rel="noopener noreferrer">PIP-318</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="websockets-new-features">WebSockets new features<a href="#websockets-new-features" class="hash-link" aria-label="Direct link to WebSockets new features" title="Direct link to WebSockets new features">​</a></h3><p>The Pulsar WebSocket API now supports:</p><ul><li>Consuming multiple topics as described in <a href="https://github.com/apache/pulsar/blob/master/pip/pip_307.md" target="_blank" rel="noopener noreferrer">PIP-307</a>.</li><li>End-to-end encryption, as described in <a href="https://github.com/apache/pulsar/blob/master/pip/pip-290.md" target="_blank" rel="noopener noreferrer">PIP-290</a>.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="enhanced-security-for-pulsar-functions--pulsar-io">Enhanced security for Pulsar Functions &amp; Pulsar IO<a href="#enhanced-security-for-pulsar-functions--pulsar-io" class="hash-link" aria-label="Direct link to Enhanced security for Pulsar Functions &amp; Pulsar IO" title="Direct link to Enhanced security for Pulsar Functions &amp; Pulsar IO">​</a></h3><p>Pulsar 3.2.0 provides increased security for Pulsar Functions &amp; Pulsar IO by allowing users to configure Pulsar Connectors with non-plaintext secrets. More details in <a href="https://github.com/apache/pulsar/blob/master/pip/pip-289.md" target="_blank" rel="noopener noreferrer">PIP-289</a> &amp; the following pull requests:</p><ul><li><a href="https://github.com/apache/pulsar/pull/21675" target="_blank" rel="noopener noreferrer">Make connectors load sensitive fields from secrets</a></li><li><a href="https://github.com/apache/pulsar/pull/20901" target="_blank" rel="noopener noreferrer">Support configuration secret interpolation</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cli-user-experience-improvements">CLI user experience improvements<a href="#cli-user-experience-improvements" class="hash-link" aria-label="Direct link to CLI user experience improvements" title="Direct link to CLI user experience improvements">​</a></h3><p>This release introduces several handy features to the CLI, including:</p><ul><li><a href="https://github.com/apache/pulsar/pull/20663" target="_blank" rel="noopener noreferrer">Add command line option for configuring the memory limit</a></li><li><a href="https://github.com/apache/pulsar/pull/21664" target="_blank" rel="noopener noreferrer">Allow for deleting topics in bulk, using a regex or a file</a></li><li><a href="https://github.com/apache/pulsar/pull/20614" target="_blank" rel="noopener noreferrer">Display the current cluster in <code>pulsar-admin clusters list</code></a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="build-improvement">Build improvement<a href="#build-improvement" class="hash-link" aria-label="Direct link to Build improvement" title="Direct link to Build improvement">​</a></h3><p>Pulsar 3.2.0 also introduces enhancements to the build process and reliability, including a Bill of Materials (BOM) to simplify dependency management, as outlined in <a href="https://github.com/apache/pulsar/blob/master/pip/pip-326.md" target="_blank" rel="noopener noreferrer">PIP-326</a>. </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="more">More<a href="#more" class="hash-link" aria-label="Direct link to More" title="Direct link to More">​</a></h3><p>Feel free to explore the <a href="https://github.com/apache/pulsar/releases/tag/v3.2.0" target="_blank" rel="noopener noreferrer">full release notes</a> for a detailed list of all improvements and fixes.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="compatibility-between-releases">Compatibility between releases<a href="#compatibility-between-releases" class="hash-link" aria-label="Direct link to Compatibility between releases" title="Direct link to Compatibility between releases">​</a></h2><p>When upgrading an existing Pulsar installation, it's crucial to perform component upgrades in a sequential manner.</p><p>Starting from version 3.0, users have the option to perform live upgrades or downgrades between two consecutive LTS versions or two consecutive feature versions (which also include LTS versions).</p><p>For the 3.2 series, you should be able to upgrade from version 3.x. </p><p>Please refer to the <a href="/contribute/release-policy/">release policy</a> to learn more about the compatibility between releases.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="getting-started">Getting started<a href="#getting-started" class="hash-link" aria-label="Direct link to Getting started" title="Direct link to Getting started">​</a></h2><p>Pulsar 3.2.0 is now available for <a href="https://pulsar.apache.org/download/" target="_blank" rel="noopener noreferrer">download</a>. To get started with Pulsar, you can run a Pulsar cluster&nbsp;<a href="https://pulsar.apache.org/docs/3.2.x/getting-started-home/" target="_blank" rel="noopener noreferrer">on your local machine, Docker, or Kubernetes</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="getting-involved">Getting involved<a href="#getting-involved" class="hash-link" aria-label="Direct link to Getting involved" title="Direct link to Getting involved">​</a></h2><p>Apache Pulsar is one of the fastest-growing open-source projects, recognized by the&nbsp;<a href="https://thestack.technology/top-apache-projects-in-2021-from-superset-to-nuttx/" target="_blank" rel="noopener noreferrer">Apache Software Foundation</a>&nbsp;as a Top 5 Project based on engagement. The vitality of Pulsar relies on continued community growth, which would not be possible without each and every contributor to the project. The Pulsar community welcomes contributions from anyone with a passion for open source, messaging, and streaming, as well as distributed systems! Looking for more ways to stay connected with the Pulsar community? Check out the following resources:</p><ul><li>Pulsar Summit North America 2023 took place on Wednesday, October 25, 2023!&nbsp;<a href="https://pulsar-summit.org/event/north-america-2023/schedule" target="_blank" rel="noopener noreferrer">Watch the sessions recordings</a>. Follow <a href="https://twitter.com/pulsarsummit" target="_blank" rel="noopener noreferrer">@PulsarSummit</a> on Twitter/X for updates and details on the upcoming Pulsar Summit events.</li><li>Read the&nbsp;<a href="https://pulsar.apache.org/contribute/" target="_blank" rel="noopener noreferrer">Apache Pulsar Contribution Guide</a>&nbsp;to start your first contribution.</li><li>Visit the&nbsp;<a href="https://github.com/apache/pulsar" target="_blank" rel="noopener noreferrer">Pulsar GitHub repository</a>, follow <a href="https://twitter.com/apache_pulsar" target="_blank" rel="noopener noreferrer">@apache_pulsar</a> on Twitter/X&nbsp;, and join the&nbsp;<a href="https://apache-pulsar.slack.com/" target="_blank" rel="noopener noreferrer">Pulsar community on Slack</a>.</li></ul>]]></content>
        <author>
            <name>Julien Jakubowski</name>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Apache Pulsar 2023 Year in Review]]></title>
        <id>https://pulsar.apache.org/blog/2024/01/12/pulsar-2023-year-in-review</id>
        <link href="https://pulsar.apache.org/blog/2024/01/12/pulsar-2023-year-in-review"/>
        <updated>2024-01-12T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[2023 was an incredible year for Apache Pulsar as it witnessed strong community growth, with the project becoming more stable, scalable, and secure. The Apache Pulsar community embraced a significant milestone in 2023 as the project crossed 600 contributors to the Pulsar main GitHub repository. We would like to thank everyone in the Pulsar community who contributed to this remarkable achievement!]]></summary>
        <content type="html"><![CDATA[<p>2023 was an incredible year for Apache Pulsar as it witnessed strong community growth, with the project becoming more stable, scalable, and secure. The Apache Pulsar community embraced a significant milestone in 2023 as the project crossed 600 contributors to the <a href="https://github.com/apache/pulsar" target="_blank" rel="noopener noreferrer">Pulsar main GitHub repository</a>. We would like to thank everyone in the Pulsar community who contributed to this remarkable achievement!</p><p>Since Pulsar’s graduation as a Top-Level Project (TLP) in September 2018, it has been driven by an active global community, with <strong>12K+</strong> commits from <strong>639</strong> contributors, <strong>12.2K+</strong> stars, <strong>3.5K</strong> forks, and <strong>10K+</strong> Slack users.</p><p>We are grateful to all of our community members and those in the broader open-source community who contributed to the Apache Pulsar project. They are the reasons behind every step Apache Pulsar has made over the past years.</p><p>Now, let’s take a look at some of the highlights in 2023.</p><h1>2023 Highlights</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="apache-pulsar-30-lts-release-a-big-milestone-for-the-community">Apache Pulsar 3.0 LTS release: a Big Milestone for the Community<a href="#apache-pulsar-30-lts-release-a-big-milestone-for-the-community" class="hash-link" aria-label="Direct link to Apache Pulsar 3.0 LTS release: a Big Milestone for the Community" title="Direct link to Apache Pulsar 3.0 LTS release: a Big Milestone for the Community">​</a></h2><p>The Apache Pulsar community announced the release of Apache Pulsar 3.0, the first Long-Term Support (LTS) version! Starting from Pulsar 3.0, the Pulsar community plans to release LTS versions to meet the needs of different users for stability and new features, as well as to reduce the burden of maintaining historical releases.</p><p>The previous release process has short maintenance cycles of approximately 3 to 4 months, while many users are still using old versions. To keep up with new updates and features, they may be forced to perform upgrades within a short timeframe, for which they are not prepared in terms of available time and required efforts.</p><p>Therefore, the Pulsar community introduces LTS versions with feature releases between them. The project follows a variant of Semantic Versioning, replacing <code>major.minor.patch</code> with <code>LTS.feature.patch</code>. For example:</p><ul><li>2.11.0 is a feature release</li><li>3.0.0 is the first LTS release</li><li>3.0.1 is a patch release of the LTS release</li><li>3.1.0 is a feature release</li><li>3.2.0 is a feature release</li><li>3.2.1 is a patch release</li><li>4.0.0 is an LTS release</li></ul><p>This pattern provides version support for users seeking stability and those seeking new features. Users who want a more stable release can use versions 3.0.x, while those seeking new features can use versions 3.x. This new release model is a major step for the Pulsar community because it:</p><ul><li>Allows users to choose between different releases based on their needs for stability or new features;</li><li>Clarifies the release cycle for both maintainers and users;</li><li>Frees maintainers from spending too much time maintaining a long list of old releases.</li></ul><p>With the new release model, the Pulsar community looks to release LTS versions every 18 months, with bug fixes continuing for 24 months and security vulnerability patches supported for 36 months. See the image below for details.</p><p><img loading="lazy" src="/assets/images/pulsar-new-release-model-e50bbfe6a0ce07a6f8089bacfdd4a761.png" width="945" height="440" class="img_ev3q"></p><p>For more information, see <a href="https://github.com/apache/pulsar/issues/15966" target="_blank" rel="noopener noreferrer">PIP-175</a> and the <a href="/contribute/release-policy/" target="_blank" rel="noopener noreferrer">Release policy</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="new-website">New Website<a href="#new-website" class="hash-link" aria-label="Direct link to New Website" title="Direct link to New Website">​</a></h2><p>The Apache Pulsar website has a fresh look! Thanks to Emidio Cardeira, Asaf Mesika, Tison Chen and Kiryl Valkovich for creating an engaging design that captures the future feel of our thriving community and next-gen solution.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pulsar-admin-go-library">Pulsar Admin Go Library<a href="#pulsar-admin-go-library" class="hash-link" aria-label="Direct link to Pulsar Admin Go Library" title="Direct link to Pulsar Admin Go Library">​</a></h2><p><a href="https://github.com/apache/pulsar-client-go/tree/master/pulsaradmin" target="_blank" rel="noopener noreferrer">Pulsar Admin Go Library</a> provides a unified Go API for managing Pulsar resources such as tenants, namespaces, topics, etc.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="enhanced-otel-based-metric-system">Enhanced OTel-based metric system<a href="#enhanced-otel-based-metric-system" class="hash-link" aria-label="Direct link to Enhanced OTel-based metric system" title="Direct link to Enhanced OTel-based metric system">​</a></h2><p><a href="https://github.com/apache/pulsar/blob/master/pip/pip-264.md" target="_blank" rel="noopener noreferrer">PIP-264</a> was completed, approved by the community, and started development. It will solve a big pain point for Pulsar users with a large number of topics - 50k up to 1M topics: observability. The Apache Pulsar community has taken a large undertaking to make OpenTelemetry Java SDK ready for very low latency systems such as Pulsar with two big features it currently develops: <a href="https://github.com/open-telemetry/opentelemetry-java/issues/5105" target="_blank" rel="noopener noreferrer">Near-zero memory allocations</a> and <a href="https://github.com/open-telemetry/opentelemetry-java/issues/6107" target="_blank" rel="noopener noreferrer">metric filtering upon collection</a>, which was also added to <a href="https://github.com/open-telemetry/opentelemetry-specification/issues/3324" target="_blank" rel="noopener noreferrer">OpenTelemetry specifications</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="key-events-recap">Key events recap<a href="#key-events-recap" class="hash-link" aria-label="Direct link to Key events recap" title="Direct link to Key events recap">​</a></h2><p>In 2023, the Apache Pulsar community put together a number of meetups and events across the globe to share the latest messaging and streaming technologies. Among others, three summits received the most attention from community members.</p><ul><li><p><a href="https://streamnative.io/blog/pulsar-virtual-summit-europe-2023-key-takeaways" target="_blank" rel="noopener noreferrer">Pulsar Summit Europe 2023</a>: This event witnessed a remarkable milestone as over 400 attendees from 20+ countries joined the virtual stage to explore the cutting-edge advancements in Apache Pulsar and the real-world success stories of Pulsar-powered companies. This record-breaking turnout at the Pulsar Summit not only demonstrates the surging adoption of Pulsar but also highlights the ever-growing enthusiasm and curiosity surrounding this game-changing technology. It featured 5 keynotes on Apache Pulsar and 12 breakout sessions on tech deep dives, use cases, and ecosystem talks. They came from companies like Lego, VMWare, DataStax, StreamNative, RisingWave, Axon, Zafin and others. <a href="https://www.youtube.com/watch?v=XjIu9nXSSiI&amp;list=PLqRma1oIkcWjMn9ytQueYSP9HCc28756R" target="_blank" rel="noopener noreferrer">Watch the sessions</a>.</p></li><li><p><a href="https://pulsar.apache.org/blog/2023/08/28/pulsar-sessions-in-communityovercode-aisa-2023/" target="_blank" rel="noopener noreferrer">CommunityOverCode Asia 2023</a> conference (previously known as ApacheCon Asia) has been held from August 18th to August 20th. The conference gathers adopters, developers, engineers, and technologists from some of the most influential open-source communities in the world. </p></li><li><p><a href="https://communityovercode.org/past-sessions/community-over-code-na-2023/" target="_blank" rel="noopener noreferrer">CommunityOverCode NA 2023</a> conference (previously known as ApacheCon NA) has been held from October 7th to October 10th. The conference gathers adopters, developers, engineers, and technologists from some of the most influential open-source communities in the world. In 2023, CommunityOverCode introduced a Streaming track featuring three talks on Pulsar. If you missed the conference, you can still check out the slide decks!</p></li><li><p><a href="https://streamnative.io/blog/pulsar-summit-north-america-2023-a-deep-dive-into-the-on-demand-summit-videos" target="_blank" rel="noopener noreferrer">Pulsar Summit NA 2023</a>: Hosted in person at the famous Hotel Nikko (with after parties overlooking the city!) in San Francisco, the summit featured nearly 200 attendees and showcased 20 carefully curated sessions, each a testament to the vibrancy and innovation within the Pulsar ecosystem. They came from companies like Cisco, Discord, Iterable, Attentive, VMware, Flipkart, Boomi and others.  We are so grateful for the opportunity to spend a full day sharing knowledge and witnessing the community members connecting and inspiring each other. <a href="https://www.youtube.com/playlist?list=PLqRma1oIkcWhOZ6W-g4D_3JNxJzYnwLNX" target="_blank" rel="noopener noreferrer">Watch the sessions</a>.</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="community-growth">Community growth<a href="#community-growth" class="hash-link" aria-label="Direct link to Community growth" title="Direct link to Community growth">​</a></h2><p>The development of the Pulsar community would not be possible without our contributors. Among them, Pulsar Committers and PMC members have taken the lead in contributing to and promoting the project. In 2023, many new faces joined the community while we also welcomed old friends taking more responsibility. Let’s take a look at the Pulsar community by numbers.</p><ul><li><strong>639</strong> global contributors for the Pulsar main GitHub repository</li><li><strong>13.4K+</strong> GitHub stars</li><li><strong>3.5K+</strong> forks</li><li><strong>8</strong> new Committers</li><li><strong>6</strong> new PMC members</li><li><strong>10k+</strong> Pulsar Slack members</li><li><strong>20M+</strong> Docker pulls</li></ul><p>The Pulsar community welcomes all kinds of contributions. For more information, see the <a href="/contribute/" target="_blank" rel="noopener noreferrer">Apache Pulsar Contribution Guide</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="project-releases">Project releases<a href="#project-releases" class="hash-link" aria-label="Direct link to Project releases" title="Direct link to Project releases">​</a></h2><p>In 2023, the Pulsar community worked hard to improve the project’s capabilities and fix existing bugs with 2 major versions and 12 minor versions.</p><p>The Apache Pulsar community released version <a href="https://pulsar.apache.org/blog/2023/01/20/Apache-Pulsar-2-11-0/" target="_blank" rel="noopener noreferrer">2.11</a> with 61 contributors providing feature enhancements and fixes that delivered 1617 commits. </p><p>A Big Milestone for the Apache Pulsar community was the release of <a href="https://pulsar.apache.org/blog/2023/05/02/announcing-apache-pulsar-3-0/" target="_blank" rel="noopener noreferrer">Apache Pulsar 3.0</a>, the first Long-Term Support (LTS) version! The community is getting bigger! Over 140 contributors submitted about 1500 commits to the Pulsar 3.0 release, which is the largest contribution yet for a project that is fast becoming one of the biggest open-source projects. It includes support for LTS, which delivers the predictability and stability that larger enterprise teams need to deliver a solid and reliable messaging and streaming service.</p><p>Thanks for all your contributions!</p><p>Many important Pulsar capabilities were delivered in these releases, such as <a href="https://github.com/apache/pulsar/issues/16691" target="_blank" rel="noopener noreferrer">Extensible Load Balancer</a> and <a href="https://github.com/apache/pulsar/issues/16763" target="_blank" rel="noopener noreferrer">Large-scale delayed message support</a>. For more information, see the <a href="/release-notes/" target="_blank" rel="noopener noreferrer">Release Notes page</a>.</p><p>Updates about clients, Pulsar Manager, and Pulsar Helm Chart are listed below:</p><ul><li><a href="https://github.com/apache/pulsar-client-cpp/releases/tag/v3.4.2" target="_blank" rel="noopener noreferrer">Pulsar C++ Client 3.4.2</a></li><li><a href="https://github.com/apache/pulsar-client-go/releases/tag/v0.11.1" target="_blank" rel="noopener noreferrer">Pulsar Go Client 0.11.1</a></li><li><a href="https://github.com/apache/pulsar-client-node/releases/tag/v1.9.0" target="_blank" rel="noopener noreferrer">Pulsar Node.js Client 1.9.0</a></li><li><a href="https://github.com/apache/pulsar-client-python/releases/tag/v3.3.0" target="_blank" rel="noopener noreferrer">Pulsar Python Client 3.3.0</a></li><li><a href="https://github.com/apache/pulsar-manager/releases/tag/v0.4.0" target="_blank" rel="noopener noreferrer">Pulsar Manager 0.4.0</a></li><li><a href="https://github.com/apache/pulsar-helm-chart/releases/tag/pulsar-3.1.0" target="_blank" rel="noopener noreferrer">Pulsar Helm Chart 3.1.0</a></li><li><a href="https://github.com/apache/pulsar-dotpulsar/blob/master/CHANGELOG.md#311---2023-12-11" target="_blank" rel="noopener noreferrer">Pulsar dotnet Client 3.1.1</a></li><li><a href="https://github.com/apache/pulsar-client-reactive/releases/tag/v0.5.1" target="_blank" rel="noopener noreferrer">Reactive Client for Apache Pulsar 0.1.0</a></li></ul><p>For more information, see the <a href="/release-notes/clients/" target="_blank" rel="noopener noreferrer">Clients Release Notes page</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pulsar-ecosystem">Pulsar ecosystem<a href="#pulsar-ecosystem" class="hash-link" aria-label="Direct link to Pulsar ecosystem" title="Direct link to Pulsar ecosystem">​</a></h2><p>In 2023, the Pulsar community worked with other open-source communities to add more integrations to the Pulsar ecosystem. Notable integrations include:</p><ul><li><p><a href="https://quarkus.io/guides/pulsar" target="_blank" rel="noopener noreferrer">Quarkus Extension for Apache Pulsar</a> provides support for Apache Pulsar through SmallRye Reactive Messaging framework. Based on Eclipse MicroProfile Reactive Messaging specification 3.0, it proposes a flexible programming model bridging CDI and event-driven.</p></li><li><p><a href="https://spring.io/blog/2023/11/21/spring-for-apache-pulsar-1-0-0-goes-ga/" target="_blank" rel="noopener noreferrer">Spring for Apache Pulsar</a> provides a <code>PulsarTemplate</code> for publishing to a Pulsar topic and a <code>PulsarListener</code> annotation for consuming from a Pulsar topic, as well as various convenience APIs for Spring developers to ramp up their development journey into Apache Pulsar. Support is also included in Spring Boot via <a href="https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#messaging.pulsar" target="_blank" rel="noopener noreferrer">auto-configuration</a>.</p></li><li><p><a href="https://github.com/streamnative/oxia" target="_blank" rel="noopener noreferrer">Oxia</a>: currently, the practical limit for the number of topics manageable by a single Pulsar cluster is around 1 million topics. The lack of horizontal scalability in Zookeeper is one of the reasons for this limit. <a href="https://github.com/streamnative/oxia" target="_blank" rel="noopener noreferrer">Oxia</a>, released this year, is a scalable metadata store and coordination system. Replacing Zookeeper with Oxia in a Pulsar cluster allows for exceeding this 1M topics limit, although it is not the only prerequisite. This contributes to the goal of reaching 100M topics.</p></li></ul><p>For more information, see the <a href="/ecosystem/" target="_blank" rel="noopener noreferrer">Ecosystem page</a>.</p><h1>What’s next in 2024</h1><p>The Pulsar community seeks to further improve the project from different aspects. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="enhanced-otel-based-metric-system-1">Enhanced OTel-based metric system<a href="#enhanced-otel-based-metric-system-1" class="hash-link" aria-label="Direct link to Enhanced OTel-based metric system" title="Direct link to Enhanced OTel-based metric system">​</a></h2><p>As stated above, <a href="https://github.com/apache/pulsar/blob/master/pip/pip-264.md" target="_blank" rel="noopener noreferrer">PIP-264</a> is designed to enhance observability in scenarios where a single cluster manages a large number of topics, ranging from 50k up to 1M topics. Currently, there are two major features under development to support this functionality: </p><ul><li><a href="https://github.com/open-telemetry/opentelemetry-java/issues/5105" target="_blank" rel="noopener noreferrer">Near-zero memory allocations</a> </li><li><a href="https://github.com/open-telemetry/opentelemetry-java/issues/6107" target="_blank" rel="noopener noreferrer">Metric filtering upon collection</a>, which was also added to <a href="https://github.com/open-telemetry/opentelemetry-specification/issues/3324" target="_blank" rel="noopener noreferrer">OpenTelemetry specifications</a>.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pulsar-rate-limiting">Pulsar Rate Limiting<a href="#pulsar-rate-limiting" class="hash-link" aria-label="Direct link to Pulsar Rate Limiting" title="Direct link to Pulsar Rate Limiting">​</a></h2><p>An increasing number of messaging-as-a-service platform teams are adopting Apache Pulsar as their main building block for providing messaging services across their organizations. This is clear validation that the value of Apache Pulsar’s truly multi-tenant architecture is delivering results, making Apache Pulsar a cost-efficient and reliable solution for messaging-as-a-service platform teams in very demanding application environments.</p><p>In the Apache Pulsar project, we are committed to delivering further improvements to the existing multi-tenancy features. One area of improvement is the service level management and capacity management of a large Pulsar system. This is also a key concern of messaging-as-a-service platform teams.</p><p>In December 2023, <a href="https://github.com/apache/pulsar/blob/master/pip/pip-322.md" target="_blank" rel="noopener noreferrer">PIP-322 Pulsar Rate Limiting Refactoring</a> was accepted and completed and will be release as part of Pulsar 3.2.0 release. Rate limiters act as a conduit to more extensive capacity management and Quality of Service (QoS) controls in Pulsar. They are integral to Pulsar's core multi-tenancy features. This refactoring will pave the way for future enhancements in this area.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pulsar-sql-removal-from-the-main-repo">Pulsar SQL removal from the main repo<a href="#pulsar-sql-removal-from-the-main-repo" class="hash-link" aria-label="Direct link to Pulsar SQL removal from the main repo" title="Direct link to Pulsar SQL removal from the main repo">​</a></h2><p>Pulsar SQL (Trino/Presto) will be moved from the main repository to a separate repository. This change will offer the following benefits:</p><ul><li>A significant reduction in the size of the TGZ and Docker image, saving approximately 400MB.</li><li>Reduced build time.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="security">Security<a href="#security" class="hash-link" aria-label="Direct link to Security" title="Direct link to Security">​</a></h2><p>Docker image vulnerability scans will start soon. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="events">Events<a href="#events" class="hash-link" aria-label="Direct link to Events" title="Direct link to Events">​</a></h2><p>We will also have more events coming for 2024, including Pulsar Summit North America and Pulsar Summit APAC. If you missed or want to relive the Pulsar Summit North America 2023, you can check out the videos of our amazing speakers <a href="https://youtube.com/playlist?list=PLqRma1oIkcWhOZ6W-g4D_3JNxJzYnwLNX&amp;si=o6G-fRcNgW9zqHGa" target="_blank" rel="noopener noreferrer">here</a>!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="stay-in-touch">Stay in touch!<a href="#stay-in-touch" class="hash-link" aria-label="Direct link to Stay in touch!" title="Direct link to Stay in touch!">​</a></h2><p>To stay up to date with community news and discuss hot topics with other members, you can subscribe to the Pulsar mailing lists for <a href="mailto:users-subscribe@pulsar.apache.org" target="_blank" rel="noopener noreferrer">users</a> and <a href="mailto:dev-subscribe@pulsar.apache.org" target="_blank" rel="noopener noreferrer">developers</a>, follow us on <a href="https://twitter.com/apache_pulsar" target="_blank" rel="noopener noreferrer">X</a>, and join the <a href="https://communityinviter.com/apps/apache-pulsar/apache-pulsar" target="_blank" rel="noopener noreferrer">Pulsar Slack workspace</a> and <a href="https://github.com/apache/pulsar/wiki/Community-Meetings" target="_blank" rel="noopener noreferrer">Pulsar community meetings</a> that happen online.</p>]]></content>
        <author>
            <name>Apache Pulsar Community</name>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[What's New in Apache Pulsar 3.1.0]]></title>
        <id>https://pulsar.apache.org/blog/2023/10/10/announcing-apache-pulsar-3-1</id>
        <link href="https://pulsar.apache.org/blog/2023/10/10/announcing-apache-pulsar-3-1"/>
        <updated>2023-10-10T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[The Apache Pulsar community announces the release of Apache Pulsar 3.1, a new feature release! This is a remarkable community effort, with over 80 contributors submitting more than 360 commits for feature enhancements and bug fixes. We would like to thank all of them for their contributions!]]></summary>
        <content type="html"><![CDATA[<p>The Apache Pulsar community announces the release of Apache Pulsar 3.1, a new feature release!&nbsp;This is a remarkable community effort, with over 80 contributors submitting more than 360 commits for feature enhancements and bug fixes. We would like to thank all of them for their contributions!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="whats-new-in-apache-pulsar-31">What's new in Apache Pulsar 3.1?<a href="#whats-new-in-apache-pulsar-31" class="hash-link" aria-label="Direct link to What's new in Apache Pulsar 3.1?" title="Direct link to What's new in Apache Pulsar 3.1?">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pluggable-topic-compaction-service">Pluggable topic compaction service<a href="#pluggable-topic-compaction-service" class="hash-link" aria-label="Direct link to Pluggable topic compaction service" title="Direct link to Pluggable topic compaction service">​</a></h3><p>Pulsar's <a href="https://pulsar.apache.org/docs/3.1.x/concepts-topic-compaction/" target="_blank" rel="noopener noreferrer">Topic Compaction</a> feature provides a key-based data retention mechanism that allows users to keep only the most recent message associated with a specific key. This helps reduce storage space and improve system efficiency.</p><p>Data in topics can be stored in various formats. For example, KoP (Kafka protocol handler) can store data in Kafka format.</p><p>Previously, Pulsar always compacted topic data, assuming that messages were in the Pulsar data format. However, this approach had limitations, as it prevented protocol handlers from utilizing the topic compaction feature with customized data formats such as the Kafka format used by KoP.</p><p>That's why <a href="https://github.com/apache/pulsar/pull/20624" target="_blank" rel="noopener noreferrer">PIP-278</a> introduced a pluggable topic compaction service interface to support customization of the actual compaction logic. This customization can be done while the major compaction task is still controlled by the Pulsar broker. This change primarily benefits protocol handlers developers.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pluggable-partition-assignment-strategy">Pluggable partition assignment strategy<a href="#pluggable-partition-assignment-strategy" class="hash-link" aria-label="Direct link to Pluggable partition assignment strategy" title="Direct link to Pluggable partition assignment strategy">​</a></h3><p>Pulsar offers robust support for <a href="https://pulsar.apache.org/docs/3.1.x/concepts-broker-load-balancing-concepts/" target="_blank" rel="noopener noreferrer">load balancing</a> to ensure efficient resource utilization across Pulsar clusters.</p><p>The fundamental unit for load balancing is the topic bundle, which refers to a group of topics within the same namespace.</p><p>Previously, the only strategy for assigning a topic to a topic bundle was consistent hashing. However, this strategy doesn't fit all scenarios.</p><p><a href="https://github.com/apache/pulsar/issues/19806" target="_blank" rel="noopener noreferrer">PIP-255</a> introduced a pluggable topic bundle (partition) assignment interface to allow customization of the assignment algorithm. This enables users to adjust the strategy according to their specific scenarios.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="metadata-size-threshold-for-compression">Metadata size threshold for compression<a href="#metadata-size-threshold-for-compression" class="hash-link" aria-label="Direct link to Metadata size threshold for compression" title="Direct link to Metadata size threshold for compression">​</a></h3><p>Previously, even if the metadata was small, we had to apply compression. Now, we support a size-based threshold.</p><p>Starting from version 2.9, Pulsar supports compressing managed ledger information and managed cursor information stored in the metadata store. This feature can significantly reduce the size of large metadata.</p><p>However, for small metadata, compression doesn't provide significant benefits and may consume unnecessary computational resources.</p><p><a href="https://github.com/apache/pulsar/issues/20307" target="_blank" rel="noopener noreferrer">PIP-270</a> introduces two configuration options: <code>managedLedgerInfoCompressionThresholdInBytes</code> and <code>managedCursorInfoCompressionThresholdInBytes</code>. These options allow users to customize the size threshold for compressing metadata, with the default value set to 16 KB.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="lazy-creation-of-offload-resources">Lazy creation of offload resources<a href="#lazy-creation-of-offload-resources" class="hash-link" aria-label="Direct link to Lazy creation of offload resources" title="Direct link to Lazy creation of offload resources">​</a></h3><p><a href="https://pulsar.apache.org/docs/3.1.x/tiered-storage-overview/" target="_blank" rel="noopener noreferrer">Tiered storage</a> is an essential technology that enables the migration of old topic data from BookKeeper to long-term and more cost-effective storage while maintaining transparent client access to the topic data.</p><p>Tiered storage operates through offloaders. Previously, when a topic was created, the offloader immediately generated the associated offload resources, even though these resources remained unused until the actual offloading task was triggered.</p><p><a href="https://github.com/apache/pulsar/pull/20775" target="_blank" rel="noopener noreferrer">PR-20775</a> modifies this behavior by lazily creating the offload blob store. This means that the actual allocation occurs only when the offloading task is triggered, preventing excessive preallocation of resources.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="compatibility-between-releases">Compatibility between releases<a href="#compatibility-between-releases" class="hash-link" aria-label="Direct link to Compatibility between releases" title="Direct link to Compatibility between releases">​</a></h2><p>When upgrading an existing Pulsar installation, it's crucial to perform component upgrades in a sequential manner.</p><p>Starting from version 3.0, users have the option to perform live upgrades or downgrades between two consecutive LTS versions or two consecutive feature versions (which also include LTS versions).</p><p>For the 3.1 series, you should be able to upgrade directly from version 3.0 or downgrade from the subsequently released version 3.2. If you are currently using an earlier version, please ensure that you upgrade to version 3.0 before proceeding further.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="getting-started">Getting started<a href="#getting-started" class="hash-link" aria-label="Direct link to Getting started" title="Direct link to Getting started">​</a></h2><p>Pulsar 3.1.0 is now available for <a href="https://pulsar.apache.org/download/" target="_blank" rel="noopener noreferrer">download</a>. To get started with Pulsar, you can run a Pulsar cluster&nbsp;<a href="https://pulsar.apache.org/docs/3.1.x/getting-started-home/" target="_blank" rel="noopener noreferrer">on your local machine, Docker, or Kubernetes</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="getting-involved">Getting involved<a href="#getting-involved" class="hash-link" aria-label="Direct link to Getting involved" title="Direct link to Getting involved">​</a></h2><p>Apache Pulsar is one of the fastest-growing open-source projects, recognized by the&nbsp;<a href="https://thestack.technology/top-apache-projects-in-2021-from-superset-to-nuttx/" target="_blank" rel="noopener noreferrer">Apache Software Foundation</a>&nbsp;as a Top 5 Project based on engagement. The vitality of Pulsar relies on continued community growth, which would not be possible without each and every contributor to the project. The Pulsar community welcomes contributions from anyone with a passion for open source, messaging, and streaming, as well as distributed systems! Looking for more ways to stay connected with the Pulsar community? Check out the following resources:</p><ul><li>Pulsar Summit North America 2023 will take place on Wednesday, October 25, 2023!&nbsp;<a href="https://registration.socio.events/e/pulsarsummitna2023" target="_blank" rel="noopener noreferrer">Register now</a> and follow <a href="https://twitter.com/pulsarsummit" target="_blank" rel="noopener noreferrer">@PulsarSummit</a> on Twitter/X for updates and details of this much-anticipated one-day event.</li><li>Read the&nbsp;<a href="https://pulsar.apache.org/contribute/" target="_blank" rel="noopener noreferrer">Apache Pulsar Contribution Guide</a>&nbsp;to start your first contribution.</li><li>Visit the&nbsp;<a href="https://github.com/apache/pulsar" target="_blank" rel="noopener noreferrer">Pulsar GitHub repository</a>, follow <a href="https://twitter.com/apache_pulsar" target="_blank" rel="noopener noreferrer">@apache_pulsar</a> on Twitter/X&nbsp;, and join the&nbsp;<a href="https://apache-pulsar.slack.com/" target="_blank" rel="noopener noreferrer">Pulsar community on Slack</a>.</li></ul>]]></content>
        <author>
            <name>tison</name>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Recap: Apache Pulsar Sessions in CommunityOverCode Asia 2023]]></title>
        <id>https://pulsar.apache.org/blog/2023/08/28/pulsar-sessions-in-communityovercode-aisa-2023</id>
        <link href="https://pulsar.apache.org/blog/2023/08/28/pulsar-sessions-in-communityovercode-aisa-2023"/>
        <updated>2023-08-30T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[The CommunityOverCode Asia 2023 conference (previously known as ApacheCon Asia) has been held from August 18th to August 20th.]]></summary>
        <content type="html"><![CDATA[<p>The <a href="https://apachecon.com/acasia2023/" target="_blank" rel="noopener noreferrer">CommunityOverCode Asia 2023</a> conference (previously known as ApacheCon Asia) has been held from August 18th to August 20th.</p><p>The conference gathers adopters, developers, engineers, and technologists from some of the most influential open-source communities in the world. To date, there has been a total of over 100 proposals submitted by presenters from AWS, Huawei, Tencent Cloud, StreamNative, WeBank, and many more.</p><p>We are excited to have various Apache Pulsar-related sessions on this conference, including the milestone achieved by our first LTS release, integrations with applications on cloud, the Pulsar community development, and so on.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="featured-sessions">Featured sessions<a href="#featured-sessions" class="hash-link" aria-label="Direct link to Featured sessions" title="Direct link to Featured sessions">​</a></h2><p>Let's have a quick look at some of the featured sessions about Apache Pulsar.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="apache-pulsar-30-first-lts-release-and-new-features">Apache Pulsar 3.0: First LTS release and new features<a href="#apache-pulsar-30-first-lts-release-and-new-features" class="hash-link" aria-label="Direct link to Apache Pulsar 3.0: First LTS release and new features" title="Direct link to Apache Pulsar 3.0: First LTS release and new features">​</a></h3><p>Zike Yang, Software Engineer, StreamNative</p><p>The Apache Pulsar community recently launched <a href="https://pulsar.apache.org/blog/2023/05/02/announcing-apache-pulsar-3-0/" target="_blank" rel="noopener noreferrer">Apache Pulsar 3.0</a>, the first LTS release of Pulsar. In this talk, we will delve into the importance of Pulsar's LTS version. We'll also cover the major features introduced in Pulsar 3.0, including a new load balancer, support for large-scale delayed messages, and Direct IO optimization.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="huawei-terminal-cloud-optimizes-apache-pulsar-in-container-scenarios">Huawei Terminal Cloud optimizes Apache Pulsar in container scenarios<a href="#huawei-terminal-cloud-optimizes-apache-pulsar-in-container-scenarios" class="hash-link" aria-label="Direct link to Huawei Terminal Cloud optimizes Apache Pulsar in container scenarios" title="Direct link to Huawei Terminal Cloud optimizes Apache Pulsar in container scenarios">​</a></h3><p>Lin Lin, SDE Expert, Huawei</p><p>Apache Pulsar is a cloud-native message queue that, based on its storage separation architecture, can often shrink the compute layer to save resources during periods of low traffic. We made a lot of optimizations for Apache Pulsar in containerization scenarios. For example, at present, the Pulsar load balancing algorithm relies on the past load data of nodes, and the process of achieving balance is relatively slow. When HPA is enabled, node capacity expansion may be triggered during load balancing, and capacity expansion triggers new load balancing. How can we optimize to make Pulsar more cloud-native?</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="apache-pulsar-current-limiting-principle-and-application-practice">Apache Pulsar current-limiting principle and application practice<a href="#apache-pulsar-current-limiting-principle-and-application-practice" class="hash-link" aria-label="Direct link to Apache Pulsar current-limiting principle and application practice" title="Direct link to Apache Pulsar current-limiting principle and application practice">​</a></h3><p>Jialing Wang, Software development engineer, China Mobile Cloud Capability Center</p><p>Combined with the current limiting practice of mobile cloud Pulsar and Kafka, this speech analyzes the working principle of current limiting at all levels of production and consumption in Apache Pulsar and the implementation scheme of ResourceGroup, and introduces the mobile cloud Kafka based on Pulsar and KoP. How to manage traffic between multiple clusters in cloud native scenarios based on ResourceGroup and load balancer?</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-secret-to-great-developer-experience-is-killer-content">The Secret to Great Developer Experience is Killer Content<a href="#the-secret-to-great-developer-experience-is-killer-content" class="hash-link" aria-label="Direct link to The Secret to Great Developer Experience is Killer Content" title="Direct link to The Secret to Great Developer Experience is Killer Content">​</a></h3><p>Yu Liu, Apache Pulsar PMC member</p><p>In recent years, the software industry has entered the cloud-native 2.0 era. The emergence of various new technologies has brought a sweet burden to developers. On the one hand, they have more choices; on the other hand, they face greater complexities. With the rise of the "developer-first" culture and the increasing decision-making weight of developers on product selection, the world's major technology giants are changing from traditional sales ideas to developer-centric ideas (B2D) to promote products, and high-quality content is the most effective marketing strategy. To satisfy all stakeholders' needs and accelerate the flywheel effect, how to design content that makes developers fall in love at first sight? To improve the development experience, how to create the "Aha moment" of the content? To increase user stickiness, how to make developers love the product forever through content? To strengthen brand competitiveness, how to differentiate the content strategies for open-source projects and commercial products? ——This session will share the practice in the Apache Pulsar community and dive deeper into how to design killer content that developers will love.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="more-resources">More resources<a href="#more-resources" class="hash-link" aria-label="Direct link to More resources" title="Direct link to More resources">​</a></h2><p>As we can see from topics submitted to CommunityOverCode Asia 2023, Apache Pulsar has become <a href="https://blogs.apache.org/foundation/entry/apache-in-2021-by-the" target="_blank" rel="noopener noreferrer">one of the most active Apache projects</a> over the past few years, with a vibrant community that continues to drive innovation and improvements to the project.</p><ol><li>Save your spot at the Pulsar Summit North America 2023. It will be taking place in San Francisco，October 25, 2023. <a href="https://pulsar-summit.org/" target="_blank" rel="noopener noreferrer">Sign up today</a> to join the Pulsar community and the messaging and event streaming community.</li><li>Join the Apache Pulsar community. <a href="https://pulsar.apache.org/community#section-welcome" target="_blank" rel="noopener noreferrer">Subscribe to the Pulsar mailing lists</a> for user-related or Pulsar development discussions. You can also <a href="https://communityinviter.com/apps/apache-pulsar/apache-pulsar" target="_blank" rel="noopener noreferrer">join the Pulsar Slack</a> to ask quick questions or discuss specialized topics.</li></ol>]]></content>
        <author>
            <name>tison</name>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Pulsar Summit North America 2023: CFP Is Open Now!]]></title>
        <id>https://pulsar.apache.org/blog/2023/06/28/pulsar-summit-north-america-2023-cfp</id>
        <link href="https://pulsar.apache.org/blog/2023/06/28/pulsar-summit-north-america-2023-cfp"/>
        <updated>2023-06-28T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[We're excited to announce that Pulsar Summit North America 2023 will take place on Wednesday, October 25, 2023!]]></summary>
        <content type="html"><![CDATA[<p><img loading="lazy" src="/assets/images/pulsar-summit-north-america-2023-top-image-5ea0b0ee239c4fe684d454f85fd1b681.png" width="1200" height="630" class="img_ev3q"></p><p>We're excited to announce that Pulsar Summit North America 2023 will take place on <strong>Wednesday, October 25, 2023</strong>!</p><p>We welcome your participation to help make the event a success, by submitting a talk for the event or offering sponsorship.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-pulsar-summit">What is Pulsar Summit?<a href="#what-is-pulsar-summit" class="hash-link" aria-label="Direct link to What is Pulsar Summit?" title="Direct link to What is Pulsar Summit?">​</a></h2><p>Pulsar Summit is the conference dedicated to Apache Pulsar and the messaging and event streaming community. The conference gathers an international audience of developers, data architects, data scientists, Apache Pulsar committers and contributors, and friends within the streaming and messaging ecosystem. Together, they share experiences, exchange ideas and knowledge, and receive hands-on training led by Pulsar experts.</p><p>Since 2020, seven global Pulsar Summit Events have featured 170+ interactive sessions by tech leads, open-source developers, software engineers, and software architects from Google, AWS, Splunk, Tencent, Verizon Media, Iterable, Yahoo, Nutanix, BIGO, TIBCO, OVHcloud, Clever Cloud, and more. The conferences have garnered 2,200 attendees representing 700 companies, including individuals from leading organizations such as Google, Microsoft, AMEX, Salesforce, TikTok, Alibaba, Tencent, Disney, and Paypal.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="speak-at-pulsar-summit-north-america-2023">Speak at Pulsar Summit North America 2023!<a href="#speak-at-pulsar-summit-north-america-2023" class="hash-link" aria-label="Direct link to Speak at Pulsar Summit North America 2023!" title="Direct link to Speak at Pulsar Summit North America 2023!">​</a></h2><p><a href="https://sessionize.com/pulsar-summit-north-america-2023" target="_blank" rel="noopener noreferrer">Submit your session abstract</a></p><p>Share your Pulsar story and speak at the summit! Pulsar Summit offers a unique opportunity to connect with your peers and raise your profile in the rapidly growing Apache Pulsar community.</p><p>Our theme this year is "Why Pulsar?" and we are looking for stories that are innovative, informative, or thought-provoking. Join us to speak at the summit! You will be on stage with all the top Pulsar thought-leaders. It is a great way to participate and raise your profile in the rapidly growing Apache Pulsar community.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="as-a-speaker-you-will-receive">As a speaker, you will receive:<a href="#as-a-speaker-you-will-receive" class="hash-link" aria-label="Direct link to As a speaker, you will receive:" title="Direct link to As a speaker, you will receive:">​</a></h4><ul><li>Free conference pass.</li><li>Your headshot, bio, and session featured on the Pulsar Summit website.</li><li>Your session will be promoted on YouTube, Twitter, and LinkedIn.</li><li>The opportunity to share your knowledge and engage with the vibrant Pulsar community!</li></ul><p><strong>To speak at the summit, please submit an abstract about your presentation.</strong> Remember to keep your proposal short, relevant, and engaging. All levels of talks (beginner, intermediate, and advanced) are welcome. We invite you to submit your talk proposals and share your unique experience in one of the following themes:</p><ul><li><strong>“Why Pulsar?”</strong> - Your journey is inspiring, and we want to hear it! Share your stories of why you chose Pulsar, the challenges you overcame, and the solutions you implemented. Let others learn from your experiences and gain valuable insights from your use cases.</li><li><strong>“Learning Pulsar”</strong> - Are you an educator at heart? Submit an entry-level talk introducing Pulsar, its remarkable features, and best practices. Help beginners navigate their Pulsar journey and inspire them with your expert knowledge.</li><li><strong>“Deep Dive”</strong> - For all the experts out there, we invite you to share deep technical knowledge about Pulsar. Whether it's about the inner workings, optimization techniques, or advanced features, we'd love to hear it all.</li><li><strong>“Around Pulsar”</strong> - Have you built exceptional tools to work with Pulsar? Or have you integrated Pulsar with other technologies to create a superior solution? We'd love to hear about your innovations.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="important-dates">Important Dates:<a href="#important-dates" class="hash-link" aria-label="Direct link to Important Dates:" title="Direct link to Important Dates:">​</a></h2><ul><li>CFP opens: Wednesday, June 21st, 2023</li><li>CFP closes: Friday, July 7th, 2023</li><li>Speaker notifications sent: Friday, July 28th, 2023</li><li>Schedule announcement: Friday, August 4th, 2023</li></ul><p>Submissions are open until Friday, July 7th, 2023. If you want some advice or feedback on your proposal or have any questions about the summit, please do not hesitate to contact us at <a href="mailto:organizers@pulsar-summit.org." target="_blank" rel="noopener noreferrer">organizers@pulsar-summit.org.</a> We are happy to help!</p><p>Help us make #PulsarSummit North America 2023 successful by spreading the word and submitting your proposal and sponsorship! Follow us on Twitter (<a href="https://twitter.com/PulsarSummit" target="_blank" rel="noopener noreferrer">@pulsarsummit</a>) to receive the latest updates on the summit.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="about-the-organizer">About the Organizer<a href="#about-the-organizer" class="hash-link" aria-label="Direct link to About the Organizer" title="Direct link to About the Organizer">​</a></h2><p>StreamNative is built by the original creators of Apache Pulsar and Apache BookKeeper, and is one of the leading contributors to the open source Apache Pulsar project. As the core developers of Pulsar, the StreamNative team is deeply versed in the technology, the community, and the use cases. Today, StreamNative is focusing on growing the Apache Pulsar and BookKeeper communities and bringing its deep experience across diverse Pulsar use cases to companies across the globe.</p>]]></content>
        <author>
            <name>tison</name>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Announcing Apache Pulsar 3.0: The First Long-Term Support Release]]></title>
        <id>https://pulsar.apache.org/blog/2023/05/02/announcing-apache-pulsar-3-0</id>
        <link href="https://pulsar.apache.org/blog/2023/05/02/announcing-apache-pulsar-3-0"/>
        <updated>2023-05-02T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[The Apache Pulsar community today announces the release of Apache Pulsar 3.0, the first Long-Term Support (LTS) version! This is a remarkable community effort, with over 140 contributors submitting about 1500 commits for feature enhancements and bug fixes. We would like to thank all of them for their contributions!]]></summary>
        <content type="html"><![CDATA[<p><strong>The Apache Pulsar community today announces the release of Apache Pulsar 3.0, the first Long-Term Support (LTS) version!</strong> This is a remarkable community effort, with over 140 contributors submitting about 1500 commits for feature enhancements and bug fixes. We would like to thank all of them for their contributions!</p><p><img loading="lazy" src="/assets/images/annoucing-pulsar-3-0-49cfa343860a724ce7cd41a79b36e6db.jpeg" width="1200" height="630" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="introducing-long-term-support-releases">Introducing Long-Term Support releases<a href="#introducing-long-term-support-releases" class="hash-link" aria-label="Direct link to Introducing Long-Term Support releases" title="Direct link to Introducing Long-Term Support releases">​</a></h2><p>Starting from Pulsar 3.0, the Pulsar community plans to release LTS versions to meet the needs of different users for stability and new features, as well as to reduce the burden of maintaining historical releases.</p><p>The previous release process has short maintenance cycles of approximately 3 to 4 months, while many users are still using old versions. To keep up with new updates and features, they may be forced to perform upgrades within a short timeframe, for which they are not prepared in terms of available time and required efforts.</p><p>Therefore, the Pulsar community introduces LTS versions with feature releases between them. The project follows a variant of Semantic Versioning, replacing <code>major.minor.patch</code> with <code>LTS.feature.patch</code>. For example:</p><ul><li>2.11.0 is a feature release;</li><li>3.0.0 is the first LTS release;</li><li>3.0.1 is a patch release of the LTS release;</li><li>3.1.0 is a feature release;</li><li>3.2.0 is a feature release;</li><li>3.2.1 is a patch release;</li><li>4.0.0 is an LTS release.</li></ul><p>This pattern provides version support for users seeking stability and those seeking new features. Users who want a more stable release can use versions 3.0.x, while those seeking new features can use versions 3.x. This new release model is a major step for the Pulsar community because it:</p><ul><li>Allows users to choose between different releases based on their needs for stability or new features;</li><li>Clarifies the release cycle for both maintainers and users;</li><li>Frees maintainers from spending too much time maintaining a long list of old releases.</li></ul><p>With the new release model, the Pulsar community looks to release LTS versions every 18 months, with bug fixes continuing for 24 months and security vulnerability patches supported for 36 months. See the image below for details.</p><p><img loading="lazy" src="/assets/images/pulsar-new-release-model-e50bbfe6a0ce07a6f8089bacfdd4a761.png" width="945" height="440" class="img_ev3q"></p><p>For more information, see <a href="https://github.com/apache/pulsar/issues/15966" target="_blank" rel="noopener noreferrer">PIP-175</a> and the <a href="/contribute/release-policy/" target="_blank" rel="noopener noreferrer">Release policy</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="whats-new-in-apache-pulsar-30">What’s new in Apache Pulsar 3.0?<a href="#whats-new-in-apache-pulsar-30" class="hash-link" aria-label="Direct link to What’s new in Apache Pulsar 3.0?" title="Direct link to What’s new in Apache Pulsar 3.0?">​</a></h2><p>Apache Pulsar 3.0 is an LTS release with a number of important features, enhancements, and fixes. Here are some of the highlighted ones.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="new-pulsar-broker-load-balancer">New Pulsar broker load balancer<a href="#new-pulsar-broker-load-balancer" class="hash-link" aria-label="Direct link to New Pulsar broker load balancer" title="Direct link to New Pulsar broker load balancer">​</a></h3><p><a href="https://github.com/apache/pulsar/issues/16691" target="_blank" rel="noopener noreferrer">PIP-192</a> introduces a new load manager implementation, aiming to balance cluster utilization as evenly as possible while minimizing latency and reducing reliance on ZooKeeper.</p><p>Issues with the previous load manager include:</p><ul><li>Load data for all brokers and bundles is replicated to all brokers via ZK watchers. This N-replication poses scalability issues when Pulsar clusters grow to thousands of brokers and millions of topics.</li><li>Lookup requires redirection to the leader broker.</li></ul><p>In Pulsar 3.0, the broker and bundle load data have been re-evaluated. The new load manager stores this load data in non-persistent topics, while topic ownership information is saved in system topics and maintained with a state machine for eventual consistency. Clients can now connect to any broker for lookup without redirection.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="large-scale-delayed-message-support">Large-scale delayed message support<a href="#large-scale-delayed-message-support" class="hash-link" aria-label="Direct link to Large-scale delayed message support" title="Direct link to Large-scale delayed message support">​</a></h3><p>Scheduled and delayed message delivery is a common feature in messaging systems. <a href="https://github.com/apache/pulsar/issues/16763" target="_blank" rel="noopener noreferrer">PIP-195</a> aims to address limitations in this feature, which has been supported since version 2.4.0. The issues with the current implementation include:</p><ul><li>Memory constraints: The delayed message index is typically maintained in memory, leading to high memory overhead when there are many delayed messages. Although it is possible to utilize multiple brokers’ memory by creating multiple partitions for a topic and distributing them across multiple brokers, the overall memory consumption remains unchanged.</li><li>Expensive index rebuilding: In the case of a large number of delayed messages (e.g. hundreds of millions), when migrating a topic to a different broker or recovering from broker downtime, rebuilding the index requires replaying logs. This process consumes significant resources and affects both the client and catch-up reads.</li></ul><p>The objectives of the new delayed message mechanism introduced in Pulsar 3.0 are:</p><ul><li>Supporting delayed message index snapshots to minimize the costs of rebuilding the index;</li><li>Reducing memory usage for maintaining the delayed message index.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="build-multi-arch-docker-images">Build multi-arch docker images<a href="#build-multi-arch-docker-images" class="hash-link" aria-label="Direct link to Build multi-arch docker images" title="Direct link to Build multi-arch docker images">​</a></h3><p>With 3.0, Pulsar will start publishing Docker images with versions both for Intel x86-64 and Arm64 architectures.&nbsp;</p><p>Users trying to use Pulsar standalone, or running TestContainer tests on a Mac M1/M2 laptop will now see much improved performance and avoid all the issues with the Docker container engine when it emulates x86-64 CPU withing an Arm64 host.</p><p>At the same time, this image will make it possible to run Pulsar in a Docker/Kubernetes production environment on Arm64 machines.</p><p>From a user perspective, no change is required: when pulling the image, Docker will select the appropriate version based on the host architecture.</p><p>For more information, see <a href="https://github.com/apache/pulsar/pull/19432" target="_blank" rel="noopener noreferrer">PR-19432</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bookkeeper-direct-io-logic-optimization">BookKeeper direct IO logic optimization<a href="#bookkeeper-direct-io-logic-optimization" class="hash-link" aria-label="Direct link to BookKeeper direct IO logic optimization" title="Direct link to BookKeeper direct IO logic optimization">​</a></h3><p>The current ledger read/write logic in BookKeeper involves multiple buffering and caching layers, which cause limitations in read and write throughput due to memory consumption, inefficient cache utilization, and eviction problems.</p><p>More specifically, when writing an entry, data is buffered in both the memory table and the OS PageCache (after the memory table is full). When reading an entry, data may be fetched from the memory table, read cache, or read from the entry log file based on cache hits, potentially causing memory waste and reduced cache hit rate. Since the OS PageCache is shared by all read and write files, and the OS will prefetch a fixed amount of data when reading files, it is easy to cause OS PageCache pollution and affect the read and write performance.</p><p><a href="https://github.com/apache/bookkeeper/issues/2943#issuecomment-1086446251" target="_blank" rel="noopener noreferrer">BP-47</a> introduces optional support to bypass the OS PageCache using the O_DIRECT flag for <a href="https://man7.org/linux/man-pages/man2/open.2.html" target="_blank" rel="noopener noreferrer">open(2)</a> and <a href="https://man7.org/linux/man-pages/man2/fallocate.2.html" target="_blank" rel="noopener noreferrer">fallocate(2)</a> syscalls on supported systems (Linux and macOS). The new implementation uses JNI for direct I/O and incorporates write buffer pools and read buffer management. It helps reduce memory consumption and achieve better control over cache utilization. It modifies the existing ledger read/write logic while maintaining the original organization of the entry log file.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="transaction-buffer-segmented-snapshot-optimization">Transaction Buffer segmented snapshot optimization<a href="#transaction-buffer-segmented-snapshot-optimization" class="hash-link" aria-label="Direct link to Transaction Buffer segmented snapshot optimization" title="Direct link to Transaction Buffer segmented snapshot optimization">​</a></h3><p>The current Transaction Buffer in Pulsar involves handling messages sent with transactions and taking periodic snapshots to avoid replaying all messages from the original topic. However, when a topic has long-term data retention and many aborted transactions, a snapshot may become a bottleneck, causing increased costs as the snapshot size grows.</p><p><a href="https://github.com/apache/pulsar/issues/16913" target="_blank" rel="noopener noreferrer">PIP-196</a> introduces a segmented transaction buffer snapshot, which allows splitting the snapshot into multiple parts, each with a fixed number of aborted transactions and a maxReadPosition identity. This approach aims to support a large number of aborted transactions, improve transaction buffer recovery speed, and address the write amplification issue in system topic snapshots.</p><p>In Pulsar 3.0, the new design incorporates multiple snapshot segments through a secondary index, with index and snapshot segments stored in different compact topics. The snapshot segment is an immutable segment that can be configured in size. A new system topic is used to store snapshot segments, while a separate index topic stores the snapshot segment indexes, allowing for more efficient recovery and reduced memory overhead.</p><p>The proposal modifies the existing transaction buffer logic while maintaining the original organization of the transaction buffer, with the goal of improving overall performance and resource utilization.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="blue-green-cluster-deployment-support">Blue-green cluster deployment support<a href="#blue-green-cluster-deployment-support" class="hash-link" aria-label="Direct link to Blue-green cluster deployment support" title="Direct link to Blue-green cluster deployment support">​</a></h3><p>Blue-green deployment is a widely-used solution for migrating live traffic from one cluster to another. In this model, traffic is gradually transferred from the blue cluster to the green cluster, allowing for smooth upgrades and the possibility of rollbacks if necessary.</p><p><a href="https://github.com/apache/pulsar/issues/16551" target="_blank" rel="noopener noreferrer">PIP-188</a> implements blue-green deployment in Pulsar by introducing changes to the broker, client, and managedLedger. The broker will support an admin API that allows marking a cluster for migration and specifying redirection URLs. The migration state and redirection URLs are persisted in the cluster metadata. The broker asynchronously marks each topic owned by that broker as migrated and notifies all the producers and consumers (which have drained the backlog for their subscriptions) with a new client-protocol command called “Migrated-Topic”, which has redirection URLs to the green cluster. Producers and consumers for those topics cache the redirection URLs and retry to connect to the broker with that URL which redirects them to the green cluster.</p><p>With such capability introduced in Pulsar 3.0, users can achieve seamless traffic migration between clusters without causing downtime for topics.</p><p>For more information about the Pulsar 3.0 release, see the <a href="/release-notes/versioned/pulsar-3.0.0/" target="_blank" rel="noopener noreferrer">release notes</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="compatibility-between-releases">Compatibility between releases<a href="#compatibility-between-releases" class="hash-link" aria-label="Direct link to Compatibility between releases" title="Direct link to Compatibility between releases">​</a></h2><p>When upgrading an existing Pulsar version, it is important to upgrade components linearly.</p><p>Before Pulsar 3.0, upgrades should be performed linearly through each feature version. For example, when upgrading from 2.8 to 2.10, it is important to upgrade to 2.9 before going to 2.10.</p><p>Starting from 3.0, users can perform live upgrades or downgrades between two consecutive LTS versions. For example:</p><ul><li>✅ 3.0 -&gt; 4.0 -&gt; 3.0;</li><li>✅ 3.2 -&gt; 4.0 -&gt; 3.2;</li><li>✅ 3.2 -&gt; 4.4 -&gt; 3.2;</li><li>❌ 3.2 -&gt; 5.0.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="getting-started">Getting started<a href="#getting-started" class="hash-link" aria-label="Direct link to Getting started" title="Direct link to Getting started">​</a></h2><p>Pulsar 3.0.0 is now available for download on GitHub. To get started with Pulsar, you can run a Pulsar cluster <a href="/docs/3.0.x/getting-started-home/" target="_blank" rel="noopener noreferrer">on your local machine, Docker, or Kubernetes</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="looking-forward">Looking forward<a href="#looking-forward" class="hash-link" aria-label="Direct link to Looking forward" title="Direct link to Looking forward">​</a></h2><p>With Pulsar 3.0 LTS model, it will be easier for users to choose to stay on LTS stable releases or newer releases with the latest feature and improvements, all with the guarantee of longer support and a path to a live upgrade to the next LTS version.</p><p>At the same time, several features introduced in 3.0 sets the stage for further improvements. One such example is the new load balancer (PIP-192): while immediately useful and a marked improvement as it is, it also paves the way for many more optimizations in how topics are transferred from one broker to another, with the goal of minimizing the latency impact of such operations.</p><p>Another exciting area of development is the proposal to rehaul the metric collection and aggregation system described in <a href="https://github.com/apache/pulsar/issues/20197" target="_blank" rel="noopener noreferrer">PIP-264</a>.</p><p>Finally, Pulsar 3.0 is benefitting from the performance improvements introduced in Apache BookKeeper 4.16. We see a lot of potential to further improve BookKeeper performance for an even faster Pulsar!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="getting-involved">Getting involved<a href="#getting-involved" class="hash-link" aria-label="Direct link to Getting involved" title="Direct link to Getting involved">​</a></h2><p>Apache Pulsar is one of the fastest-growing open-source projects, recognized by the <a href="https://thestack.technology/top-apache-projects-in-2021-from-superset-to-nuttx/" target="_blank" rel="noopener noreferrer">Apache Software Foundation</a> as a Top 5 Project based on engagement. The vitality of Pulsar relies on continued community growth, which would not be possible without each and every contributor to the project. The Pulsar community welcomes contributions from anyone with a passion for open source, messaging and streaming, as well as distributed systems! Looking for more ways to stay connected with the Pulsar community? Check out the following resources:</p><ul><li>Pulsar Virtual Summit Europe 2023 will take place on Tuesday, May 23rd, 2023! <a href="https://events.zoom.us/ev/Ap6rsDg9LeVfmdajJ_eB13HH026J1d_o8OoTKkQnl_jzVl-srhwB~AggLXsr32QYFjq8BlYLZ5I06Dg" target="_blank" rel="noopener noreferrer">Register now for free</a> and follow @PulsarSummit on Twitter for updates and details of this much-anticipated one-day event.</li><li>Read the <a href="/contribute/" target="_blank" rel="noopener noreferrer">Apache Pulsar Contribution Guide</a> to start your first contribution.</li><li>Visit the <a href="https://github.com/apache/pulsar" target="_blank" rel="noopener noreferrer">Pulsar GitHub repository</a>, follow the project on Twitter <a href="https://twitter.com/apache_pulsar" target="_blank" rel="noopener noreferrer">@apache_pulsar</a>, and join the <a href="https://apache-pulsar.slack.com/" target="_blank" rel="noopener noreferrer">Pulsar community on Slack</a>.</li></ul>]]></content>
        <author>
            <name>Apache Pulsar Community</name>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[What’s New in Apache Pulsar 2.10.4]]></title>
        <id>https://pulsar.apache.org/blog/2023/04/19/Apache-Pulsar-2-10-4</id>
        <link href="https://pulsar.apache.org/blog/2023/04/19/Apache-Pulsar-2-10-4"/>
        <updated>2023-04-19T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[The Apache Pulsar community releases version 2.10.4! 37 contributors provided improvements and bug fixes that delivered 12 commits. Thanks for all your contributions.]]></summary>
        <content type="html"><![CDATA[<p>The Apache Pulsar community releases version 2.10.4! 37 contributors provided improvements and bug fixes that delivered 12 commits. Thanks for all your contributions.</p><p>This blog walks through the most noteworthy changes. For the complete list, including all feature enhancements and bug fixes, check out the <a href="https://pulsar.apache.org/release-notes/versioned/pulsar-2.10.4/" target="_blank" rel="noopener noreferrer">Pulsar 2.10.4 Release Notes</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="improve-performance-in-key_shared-subscriptions-pr-19167">Improve performance in Key_Shared subscriptions (<a href="https://github.com/apache/pulsar/pull/19167" target="_blank" rel="noopener noreferrer">PR-19167</a>)<a href="#improve-performance-in-key_shared-subscriptions-pr-19167" class="hash-link" aria-label="Direct link to improve-performance-in-key_shared-subscriptions-pr-19167" title="Direct link to improve-performance-in-key_shared-subscriptions-pr-19167">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="issue">Issue<a href="#issue" class="hash-link" aria-label="Direct link to Issue" title="Direct link to Issue">​</a></h4><p>In earlier versions, Key_Shared subscriptions suffered from performance issues due to the lack of a ref count for sticky hash.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="resolution">Resolution<a href="#resolution" class="hash-link" aria-label="Direct link to Resolution" title="Direct link to Resolution">​</a></h4><p>A significant performance improvement has been made to the Key_Shared subscriptions by adding a ref count for sticky hash. This optimization reduces the time required to check if messages contain the hash from a given sticky hash set, resulting in improved performance and efficiency.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="abstractbatchedmetadatastore---use-alreadyclosedexception-instead-of-illegalstateexception-pr-19284">AbstractBatchedMetadataStore - Use AlreadyClosedException instead of IllegalStateException (<a href="https://github.com/apache/pulsar/pull/19284" target="_blank" rel="noopener noreferrer">PR-19284</a>)<a href="#abstractbatchedmetadatastore---use-alreadyclosedexception-instead-of-illegalstateexception-pr-19284" class="hash-link" aria-label="Direct link to abstractbatchedmetadatastore---use-alreadyclosedexception-instead-of-illegalstateexception-pr-19284" title="Direct link to abstractbatchedmetadatastore---use-alreadyclosedexception-instead-of-illegalstateexception-pr-19284">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="issue-1">Issue<a href="#issue-1" class="hash-link" aria-label="Direct link to Issue" title="Direct link to Issue">​</a></h4><p>In earlier versions, when the broker was shutting down, the <code>AbstractBatchedMetadataStore</code> would complete pending operations with a generic <code>IllegalStateException</code>. However, code dependent on the <code>MetadataStore</code> usually expected instances of <code>MetadataStoreException</code> and might not react properly to this error.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="resolution-1">Resolution<a href="#resolution-1" class="hash-link" aria-label="Direct link to Resolution" title="Direct link to Resolution">​</a></h4><p>This PR improves the error handling during broker shutdown by completing pending operations with an <code>AlreadyClosedException</code> instead of <code>IllegalStateException</code>. This ensures that the dependent code responds more appropriately to the error, even if the broker is shutting down.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fix-open-cursor-with-null-initialposition-resulting-in-the-earliest-position-pr-18416">Fix open cursor with null-initialPosition, resulting in the earliest position (<a href="https://github.com/apache/pulsar/pull/18416" target="_blank" rel="noopener noreferrer">PR-18416</a>)<a href="#fix-open-cursor-with-null-initialposition-resulting-in-the-earliest-position-pr-18416" class="hash-link" aria-label="Direct link to fix-open-cursor-with-null-initialposition-resulting-in-the-earliest-position-pr-18416" title="Direct link to fix-open-cursor-with-null-initialposition-resulting-in-the-earliest-position-pr-18416">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="issue-2">Issue<a href="#issue-2" class="hash-link" aria-label="Direct link to Issue" title="Direct link to Issue">​</a></h4><p>In earlier versions, called <code>ledger.openCursor("xxx", null)</code> with a null <code>initialPosition</code> parameter would result in the cursor being set to the earliest position, causing unexpected behavior. The root cause of this issue was due to incorrect handling of the <code>initialPosition</code> in <code>ManagedLedgerImpl.java</code>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="resolution-2">Resolution<a href="#resolution-2" class="hash-link" aria-label="Direct link to Resolution" title="Direct link to Resolution">​</a></h4><p>This PR fixes the issue by ensuring that the correct initial position is used when opening a cursor with a null <code>initialPosition</code>. The code now sets the cursor to the latest position, as expected.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="add-isactive-in-managedcursorimpl-pr-19341">Add isActive in ManagedCursorImpl (<a href="https://github.com/apache/pulsar/pull/19341" target="_blank" rel="noopener noreferrer">PR-19341</a>)<a href="#add-isactive-in-managedcursorimpl-pr-19341" class="hash-link" aria-label="Direct link to add-isactive-in-managedcursorimpl-pr-19341" title="Direct link to add-isactive-in-managedcursorimpl-pr-19341">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="issue-3">Issue<a href="#issue-3" class="hash-link" aria-label="Direct link to Issue" title="Direct link to Issue">​</a></h4><p>In previous versions, when there were many concurrent subscriptions in a topic, broker performance would degrade due to many io-threads waiting for the lock, synchronized (activeCursors) while calling checkBackloggedCursors.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="resolution-3">Resolution<a href="#resolution-3" class="hash-link" aria-label="Direct link to Resolution" title="Direct link to Resolution">​</a></h4><p>This PR adds an <code>isActive</code> variable in <code>ManagedCursorImpl</code> to minimize the access to <code>activeCursors</code> in <code>ManagedLedgerImpl,</code> which reduces the contention on the lock and improves the broker performance with many concurrent subscriptions.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="support-deleting-partitioned-topics-with-the-keyword--partition--pr-19230">Support deleting partitioned topics with the keyword -partition- (<a href="https://github.com/apache/pulsar/pull/19230" target="_blank" rel="noopener noreferrer">PR-19230</a>)<a href="#support-deleting-partitioned-topics-with-the-keyword--partition--pr-19230" class="hash-link" aria-label="Direct link to support-deleting-partitioned-topics-with-the-keyword--partition--pr-19230" title="Direct link to support-deleting-partitioned-topics-with-the-keyword--partition--pr-19230">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="issue-4">Issue<a href="#issue-4" class="hash-link" aria-label="Direct link to Issue" title="Direct link to Issue">​</a></h4><p>In earlier versions, although users could create partitioned topics using the client when partitioned type auto-creation was enabled, there was no support for deleting these partitioned topics.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="resolution-4">Resolution<a href="#resolution-4" class="hash-link" aria-label="Direct link to Resolution" title="Direct link to Resolution">​</a></h4><p>This PR adds support for deleting partitioned topics using the keyword <code>-partition-</code>, making it easier for users to manage their partitioned topics.</p><h1>What’s Next?</h1><p>If you are interested in learning more about Pulsar 2.10.4, you can <a href="https://pulsar.apache.org/download/" target="_blank" rel="noopener noreferrer">download</a> and try it out now!</p><p>For more information about the Apache Pulsar project and current progress, visit
the <a href="https://pulsar.apache.org" target="_blank" rel="noopener noreferrer">Pulsar website</a>, follow the project on Twitter
<a href="https://twitter.com/apache_pulsar" target="_blank" rel="noopener noreferrer">@apache_pulsar</a>, and join <a href="https://apache-pulsar.slack.com/" target="_blank" rel="noopener noreferrer">Pulsar Slack</a>!</p>]]></content>
        <author>
            <name>liangyepianzhou, Anonymitaet, momo-jun</name>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Speakers and Agenda Announced for Pulsar Virtual Summit Europe 2023!]]></title>
        <id>https://pulsar.apache.org/blog/2023/04/11/pulsar-summit-europe-2023-schedule-announced</id>
        <link href="https://pulsar.apache.org/blog/2023/04/11/pulsar-summit-europe-2023-schedule-announced"/>
        <updated>2023-04-11T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[We’re excited to invite you to Pulsar Virtual Summit Europe 2023! Join the Apache Pulsar community online on Tuesday, May 23rd for this exciting one-day event. Don’t miss 5 keynotes and 14 breakout sessions, and the opportunity to network with fellow attendees in this free online event. Not in the timezone? No problem! Register today to ensure you get the recorded sessions a week before general public release.]]></summary>
        <content type="html"><![CDATA[<p><img loading="lazy" src="/assets/images/pulsar-virtual-summit-europe-2023-8e71741b8550cae0603b28cb29e92292.png" width="1200" height="630" class="img_ev3q"></p><p>We’re excited to invite you to Pulsar Virtual Summit Europe 2023! Join the Apache Pulsar community online on Tuesday, May 23rd for this exciting one-day event. Don’t miss 5 keynotes and 14 breakout sessions, and the opportunity to network with fellow attendees in this free online event. Not in the timezone? No problem! Register today to ensure you get the recorded sessions a week before general public release.</p><p>Global Pulsar Summits gather developers, architects, and data engineers to discuss the latest in real-time data streaming and message queuing. Past Pulsar Summits have featured more than 200 interactive sessions presented by tech leaders from WeChat, Blizzard, Intuit, Micro Focus, Salesforce, Splunk, Verizon Media, Tencent, Uber, and more. The Summits garnered 2,200+ global attendees representing top technology, fintech, and media companies, such as Google, Amazon, eBay, Microsoft, American Express, LEGO, Athena Health, Paypal, just to name a few.</p><p>Don't miss this one-day event! <a href="https://events.zoom.us/ev/Ap6rsDg9LeVfmdajJ_eB13HH026J1d_o8OoTKkQnl_jzVl-srhwB~AggLXsr32QYFjq8BlYLZ5I06Dg" target="_blank" rel="noopener noreferrer">Register now for free</a>!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="featured-sessions">Featured sessions<a href="#featured-sessions" class="hash-link" aria-label="Direct link to Featured sessions" title="Direct link to Featured sessions">​</a></h2><p>This year, Pulsar Virtual Summit Europe will include tech deep dives, use cases, best practices, and insights into Pulsar’s global adoption and thriving community. Take a sneak peek below at a few of the featured sessions.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="challenges-of-hosting-a-pulsar-as-a-service-platform-under-a-shared-responsibility-model">Challenges of Hosting a Pulsar-as-a-Service Platform Under a Shared Responsibility Model<a href="#challenges-of-hosting-a-pulsar-as-a-service-platform-under-a-shared-responsibility-model" class="hash-link" aria-label="Direct link to Challenges of Hosting a Pulsar-as-a-Service Platform Under a Shared Responsibility Model" title="Direct link to Challenges of Hosting a Pulsar-as-a-Service Platform Under a Shared Responsibility Model">​</a></h3><p>Edgaras Petovradzius, Senior Engineer, the LEGO Group</p><p>Mathias Ravn Tversted, Engineer, the LEGO Group </p><p>This talk will explore the challenges the LEGO Group encountered in hosting and managing Pulsar-as-a-Service across multiple domains, and how they collaborated with StreamNative in the process. It will highlight how the organization used OAuth2 for authentication and its self-service management platform for access control of Pulsar resources. The speakers will also discuss their observability tooling, incorporating cloud-native tools like Prometheus and OTel collectors, as well as internal tools for metrics and an ELK stack. Finally, the presentation will share best practices for using Pulsar clients in various programming languages and explore alternative methods of producing and consuming messages. </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pulsar-observability-in-high-topic-cardinality-deployments-for-telco">Pulsar Observability in High-Topic Cardinality Deployments for Telco<a href="#pulsar-observability-in-high-topic-cardinality-deployments-for-telco" class="hash-link" aria-label="Direct link to Pulsar Observability in High-Topic Cardinality Deployments for Telco" title="Direct link to Pulsar Observability in High-Topic Cardinality Deployments for Telco">​</a></h3><p>Habip Kenan Üsküdar, DevGitOps Engineer, Axon Networks</p><p>Don't miss speaker Habip Kenan Üsküda from Axon Networks, as he shares the experience of building an observability stack using Grafana and Prometheus for their cloud-native platform based on Apache Pulsar. As the number of topic pairings scaled beyond 50,000, with the goal of exceeding 1 million, the team encountered major challenges in scaling their monitoring stack. The presentation will cover their innovative approach to partitioning labels and tenancy management, as well as their efforts to extend Grafana Agent Operators’ Helm Charts to overcome these bottlenecks.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="building-a-full-lifecycle-streaming-data-pipeline">Building a Full Lifecycle Streaming Data Pipeline<a href="#building-a-full-lifecycle-streaming-data-pipeline" class="hash-link" aria-label="Direct link to Building a Full Lifecycle Streaming Data Pipeline" title="Direct link to Building a Full Lifecycle Streaming Data Pipeline">​</a></h3><p>Timothy Spann, Principal Developer Advocate for Data in Motion, Cloudera</p><p>David Kjerrumgaard, Systems Engineer, Developer Advocate and Author of "Pulsar in Action", StreamNative</p><p>Julien Jakubowski, Developer Advocate, StreamNative</p><p>Join Tim, David, and Julien as they delve into the process of building a full lifecycle streaming data pipeline using Apache Pulsar, Spring, Java, Apache Pinot, Trino, and Apache Iceberg. This session will provide an overview of each tool’s key features and capabilities, demonstrating their integration for a robust and efficient real-time streaming data pipeline. The talk will also cover best practices for using these tools together, as well as case studies and real-world examples of successful pipeline implementations.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-future-of-metrics-in-pulsar">The Future of Metrics in Pulsar<a href="#the-future-of-metrics-in-pulsar" class="hash-link" aria-label="Direct link to The Future of Metrics in Pulsar" title="Direct link to The Future of Metrics in Pulsar">​</a></h3><p>‍Asaf Mesika, Principal Engineer, StreamNative </p><p>In this session, Asaf Mesika will discuss the challenges of using observability metrics in Pulsar from both user and committer perspectives. He will highlight issues such as high topic count limitations, improper histogram use in Grafana, and implementation difficulties. The talk will also present a proposal to address these problems by adopting the OpenTelemetry Java SDK, offering insights for leveraging metrics in Pulsar.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pulsar-in-finance---a-tale-of-a-migration">Pulsar in Finance - A Tale of a Migration<a href="#pulsar-in-finance---a-tale-of-a-migration" class="hash-link" aria-label="Direct link to Pulsar in Finance - A Tale of a Migration" title="Direct link to Pulsar in Finance - A Tale of a Migration">​</a></h3><p>George Orban, Tech Lead, Senior Architect, Quant Developer, Daiwa Capital Markets </p><p>In this talk, George Orban will share the experience of migrating a pricing engine and trading system from TIBCO Rendezvous and other messaging solutions to Apache Pulsar. He will discuss the reasons for choosing Pulsar, its suitability for enterprise applications and finance, and how it improved their stack’s resilience, robustness, and speed. The presentation will also cover new functionalities gained through Pulsar’s richer semantics, lessons learned, tools developed and open-sourced during the migration, and the future of Pulsar at Daiwa.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="oxia-scaling-pulsars-metadata-to-100x">Oxia: Scaling Pulsar’s Metadata to 100x<a href="#oxia-scaling-pulsars-metadata-to-100x" class="hash-link" aria-label="Direct link to Oxia: Scaling Pulsar’s Metadata to 100x" title="Direct link to Oxia: Scaling Pulsar’s Metadata to 100x">​</a></h3><p>Matteo Merli, Apache Pulsar PMC Chair, CTO, StreamNative</p><p>Join Apache Pulsar PMC Chair and StreamNative CTO, Matteo Merli, for the much-anticipated introduction of Oxia, a metadata store and coordination system designed to overcome the limitations of ZooKeeper in scaling Pulsar clusters. Learn first-hand the design goals, architecture, and development journey of Oxia. Matteo will also explain how Oxia’s design leverages modern cloud-native environments to provide a highly flexible and dynamic operational environment. Watch this keynote to learn more about scaling Pulsar’s metadata with Oxia and how it can improve the performance and scalability of Pulsar clusters.</p><p>Check out the full agenda and details at <a href="https://pulsar-summit.org/" target="_blank" rel="noopener noreferrer">pulsar-summit.org</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-participate">How to participate<a href="#how-to-participate" class="hash-link" aria-label="Direct link to How to participate" title="Direct link to How to participate">​</a></h2><p><a href="https://events.zoom.us/ev/Ap6rsDg9LeVfmdajJ_eB13HH026J1d_o8OoTKkQnl_jzVl-srhwB~AggLXsr32QYFjq8BlYLZ5I06Dg" target="_blank" rel="noopener noreferrer">Register now for free</a>! Contact us at <a href="mailto:organizers@pulsar-summit.org" target="_blank" rel="noopener noreferrer">organizers@pulsar-summit.org</a> if you have any questions.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="about-the-organizer">About the organizer<a href="#about-the-organizer" class="hash-link" aria-label="Direct link to About the organizer" title="Direct link to About the organizer">​</a></h2><p>StreamNative is the organizer of Pulsar Virtual Summit Europe 2023. Founded by the original developers of Apache Pulsar and Apache BookKeeper, StreamNative builds a cloud-native event streaming platform that enables enterprises to easily access data as real-time event streams. As the core developers of Pulsar, the StreamNative team is deeply versed in the technology, the community, and the use cases. Today, StreamNative is focusing on growing the Apache Pulsar and BookKeeper communities and bringing its deep experience across diverse Pulsar use cases to companies across the globe.</p>]]></content>
        <author>
            <name>Sherlock Xu, Karin Landers</name>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Apache Pulsar Hits Its 600th Contributor]]></title>
        <id>https://pulsar.apache.org/blog/2023/02/03/apache-pulsar-hits-its-600th-contributor</id>
        <link href="https://pulsar.apache.org/blog/2023/02/03/apache-pulsar-hits-its-600th-contributor"/>
        <updated>2023-02-03T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[The Apache Pulsar community embraced a significant milestone last month as the project witnessed its 600th contributor to the Pulsar main GitHub repository. We would like to thank everyone in the Pulsar community who contributed to this remarkable achievement.]]></summary>
        <content type="html"><![CDATA[<p><img loading="lazy" src="/assets/images/apache-pulsar-hits-its-600th-contributor-cd681b4f09f94029bd8ac2360b4b7302.png" width="1200" height="628" class="img_ev3q"></p><p>The Apache Pulsar community embraced a significant milestone last month as the project witnessed its 600th contributor to the <a href="https://github.com/apache/pulsar" target="_blank" rel="noopener noreferrer">Pulsar main GitHub repository</a>. We would like to thank everyone in the Pulsar community who contributed to this remarkable achievement.</p><p>Since Pulsar’s graduation as a Top-Level Project (TLP) in September 2018, it has been driven by an active global community, with <strong>160+</strong> releases, <strong>11K+</strong> commits from <strong>600</strong> contributors, <strong>12.2K+</strong> stars, <strong>3.2K+</strong> forks, and <strong>9600+</strong> Slack users.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="strong-community-growth">Strong community growth<a href="#strong-community-growth" class="hash-link" aria-label="Direct link to Strong community growth" title="Direct link to Strong community growth">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="600-contributors">600 contributors<a href="#600-contributors" class="hash-link" aria-label="Direct link to 600 contributors" title="Direct link to 600 contributors">​</a></h3><p>The number of contributors is an important metric to measure the health of an open-source project. In the last year alone, we added almost 130 contributors to the project, a 28% increase from the previous year. The image below shows the number of Pulsar contributors over the past 6 years.</p><p><img loading="lazy" src="/assets/images/pulsar-total-contributors-202301-692173316eb587e43f81f15d899537e2.jpg" width="843" height="550" class="img_ev3q"></p><center>Figure 1. Pulsar GitHub contributors</center><h3 class="anchor anchorWithStickyNavbar_LWe7" id="monthly-active-contributors-of-pulsar-and-kafka">Monthly active contributors of Pulsar and Kafka<a href="#monthly-active-contributors-of-pulsar-and-kafka" class="hash-link" aria-label="Direct link to Monthly active contributors of Pulsar and Kafka" title="Direct link to Monthly active contributors of Pulsar and Kafka">​</a></h3><p>Both Pulsar and Kafka are popular streaming systems with contributors across the globe and are adopted by organizations spanning different industries. Although Kafka outnumbers Pulsar in the total number of contributors, the latter surpassed the former in terms of monthly active contributors about 2 years ago and has maintained a strong momentum since then.</p><p><img loading="lazy" src="/assets/images/pulsar-kafka-monthly-active-contributors-202301-fe7b860e79be8cb410b013d3cd684681.jpg" width="896" height="550" class="img_ev3q"></p><center>Figure 2. Pulsar vs. Kafka - Monthly active contributors</center><h3 class="anchor anchorWithStickyNavbar_LWe7" id="12k-github-stars">12K+ GitHub stars<a href="#12k-github-stars" class="hash-link" aria-label="Direct link to 12K+ GitHub stars" title="Direct link to 12K+ GitHub stars">​</a></h3><p>GitHub stars are another key metric for open-source projects. Figure 3 displays the star history of Pulsar since its inception.</p><p><img loading="lazy" src="/assets/images/pulsar-github-star-history-202301-26fdc3b40609828e23a47f964beadec4.png" width="1576" height="1121" class="img_ev3q"></p><center>Figure 3. Pulsar GitHub stars</center><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pulsar-adoption">Pulsar adoption<a href="#pulsar-adoption" class="hash-link" aria-label="Direct link to Pulsar adoption" title="Direct link to Pulsar adoption">​</a></h2><p>As the project achieves strong growth in contributors, it also sees widespread adoption by companies across industries. Their success stories speak volumes about a more stable and secure project capable of powering different use cases in the messaging and streaming space.</p><p>Pulsar has played an essential role in handling mission-critical workloads for both existing and new users. Tencent, one of the earliest companies to adopt Pulsar in production, has been consistently working to <a href="https://streamnative.io/blog/600k-topics-per-cluster-stability-optimization-apache-pulsar-tencent-cloud" target="_blank" rel="noopener noreferrer">improve the project for better stability</a> and <a href="https://streamnative.io/blog/client-optimization-how-tencent-maintains-apache-pulsar-clusters-100-billion-messages-daily" target="_blank" rel="noopener noreferrer">shared their experience of handling 100 billion messages per day</a>. New adopters include Nippon Telegraph and Telephone Corporation (NTT) Software Innovation Center, which <a href="https://streamnative.io/blog/handling-100k-consumers-with-one-pulsar-topic" target="_blank" rel="noopener noreferrer">uses a single Pulsar topic to handle 100K consumers for its IoT use case</a>. Some organizations migrated from systems like Kafka to Pulsar, such as <a href="https://streamnative.io/success-stories/sina-weibo" target="_blank" rel="noopener noreferrer">Sina Weibo</a> and <a href="https://www.mparticle.com/blog/apache-pulsar-migration/" target="_blank" rel="noopener noreferrer">mParticle</a>. They select Pulsar not just for its flexibility, scalability, high availability, and unique architecture. More importantly, Pulsar solves the problems and pain points where other systems fall short.</p><p>For more information, see this <a href="/powered-by/" target="_blank" rel="noopener noreferrer">list of companies using or contributing to Pulsar</a> and check out <a href="/case-studies/" target="_blank" rel="noopener noreferrer">how different organizations are using Pulsar</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="get-involved">Get involved<a href="#get-involved" class="hash-link" aria-label="Direct link to Get involved" title="Direct link to Get involved">​</a></h2><p>Backed by a diverse community of contributors, we believe that each and every pull request counts and would like to see more contributors join the journey. To start making your contribution to the project, see the <a href="/contribute/" target="_blank" rel="noopener noreferrer">Apache Pulsar Contribution Guide</a>.</p><p>To stay up to date with community news and discuss hot topics with other members, you can subscribe to the Pulsar mailing lists for <a href="mailto:users-subscribe@pulsar.apache.org" target="_blank" rel="noopener noreferrer">users</a> and <a href="mailto:dev-subscribe@pulsar.apache.org" target="_blank" rel="noopener noreferrer">developers</a>, follow us on <a href="https://twitter.com/apache_pulsar" target="_blank" rel="noopener noreferrer">Twitter</a>, and join the <a href="https://communityinviter.com/apps/apache-pulsar/apache-pulsar" target="_blank" rel="noopener noreferrer">Pulsar Slack workspace</a>.</p><p>The Pulsar community hosts events, meetups, and webinars for Pulsar users of all experience levels. You can check out the <a href="/events/" target="_blank" rel="noopener noreferrer">Events</a> page and join different user groups to stay tuned.</p>]]></content>
        <author>
            <name>Sherlock Xu</name>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Pulsar Virtual Summit Europe 2023: CFP Is Now Open!]]></title>
        <id>https://pulsar.apache.org/blog/2023/02/02/pulsar-virtual-summit-europe-2023-cfp</id>
        <link href="https://pulsar.apache.org/blog/2023/02/02/pulsar-virtual-summit-europe-2023-cfp"/>
        <updated>2023-02-02T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[We’re excited to announce that Pulsar Virtual Summit Europe 2023 will take place on Tuesday, May 23rd, 2023! We welcome your participation to help make the event a success, by submitting a talk for the event or offering sponsorship. Learn more about Pulsar Summit and the opportunities available to speak and sponsor the summit below.]]></summary>
        <content type="html"><![CDATA[<p>We’re excited to announce that Pulsar Virtual Summit Europe 2023 will take place on <strong>Tuesday, May 23rd, 2023</strong>! We welcome your participation to help make the event a success, by submitting a talk for the event or offering sponsorship. Learn more about Pulsar Summit and the opportunities available to speak and sponsor the summit below.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-pulsar-summit">What is Pulsar Summit?<a href="#what-is-pulsar-summit" class="hash-link" aria-label="Direct link to What is Pulsar Summit?" title="Direct link to What is Pulsar Summit?">​</a></h2><p>Pulsar Summit is the conference dedicated to Apache Pulsar and the messaging and event streaming community. The conference gathers an international audience of developers, data architects, data scientists, Apache Pulsar committers and contributors, and friends within the streaming and messaging ecosystem. Together, they share experiences, exchange ideas and knowledge, and receive hands-on training led by Pulsar experts.</p><p>Since 2020, seven global Pulsar Summit Events have featured 170+ interactive sessions by tech leads, open-source developers, software engineers, and software architects from Google, AWS, Splunk, Tencent, Verizon Media, Iterable, Yahoo, Nutanix, BIGO, TIBCO, OVHcloud, Clever Cloud, and more. The conferences have garnered 2,000 attendees representing 700 companies, including individuals from leading organizations such as Google, Microsoft, AMEX, Salesforce, TikTok, Alibaba, Tencent, Disney, and Paypal.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="join-us-and-speak-at-pulsar-virtual-summit-europe-2023">Join us and speak at Pulsar Virtual Summit Europe 2023<a href="#join-us-and-speak-at-pulsar-virtual-summit-europe-2023" class="hash-link" aria-label="Direct link to Join us and speak at Pulsar Virtual Summit Europe 2023" title="Direct link to Join us and speak at Pulsar Virtual Summit Europe 2023">​</a></h2><p>Share your Pulsar story and speak at the summit! Pulsar Summit offers a unique opportunity to connect with your peers and raise your profile in the rapidly growing Apache Pulsar community.&nbsp;</p><p>We’re looking for Pulsar stories that are innovative, informative, or thought-provoking. Here are some suggestions based on previous events:</p><ul><li>A Pulsar success story or case study</li><li>Use cases, operations, tools, techniques, or the Pulsar ecosystem</li><li>A deep dive into technologies</li><li>Best practices and lessons learned</li><li>Anything else related to Pulsar that inspires the audience</li></ul><p>Interested in speaking at the summit? <a href="https://sessionize.com/pulsar-virtual-summit-europe-2023/" target="_blank" rel="noopener noreferrer">Submit your session abstract here</a>.&nbsp;</p><p>All levels of talks (beginner, intermediate, and advanced) are welcome. Remember to keep your proposal short, relevant, and engaging. The following session formats are acceptable:</p><ul><li>Session Presentation: 30-minute presentation, maximum of 2 speakers, can include demo</li><li>Lighting Talk:&nbsp;20-minute presentation, maximum of 2 speakers</li></ul><p>All accepted submissions will be pre-recorded. Due to time zone and network limitations, we do not recommend speakers present their talk live.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="event-dates-to-remember">Event dates to remember<a href="#event-dates-to-remember" class="hash-link" aria-label="Direct link to Event dates to remember" title="Direct link to Event dates to remember">​</a></h3><ul><li>CFP opens: February 1st, 2023</li><li>CFP closes: March 3rd, 2023</li><li>CFP notifications: March 24th, 2023</li><li>Schedule announcement: March 31st, 2023</li><li>Event date: May 23rd, 2023</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="community-sponsorships-available">Community sponsorships available<a href="#community-sponsorships-available" class="hash-link" aria-label="Direct link to Community sponsorships available" title="Direct link to Community sponsorships available">​</a></h2><p>We invite you to participate as a Community Sponsor for Pulsar Virtual Summit Europe 2023. Sponsoring this event provides an excellent opportunity for your organization to further engage and connect with the quickly growing Pulsar and streaming communities.</p><p>Community Sponsorships for Pulsar Virtual Summit Europe 2023 include your company logo on the <a href="https://pulsar-summit.org/" target="_blank" rel="noopener noreferrer">pulsar-summit.org</a> website and on-screen during the welcome introduction presentation, as well as opportunities for you to help promote the event.&nbsp;</p><p>To secure your no-fee Community Sponsorship, please submit your response <a href="https://share.hsforms.com/1q-62tijTRQORni4ngLBe3A3x5r4" target="_blank" rel="noopener noreferrer">here</a>. The full Sponsorship Prospectus will be made available with your inquiry. For more information on becoming a sponsor, please contact the Pulsar Summit event organizers at <a href="mailto:organizers@pulsar-summit.org" target="_blank" rel="noopener noreferrer">organizers@pulsar-summit.org</a>.</p><p>Help us make #PulsarSummit Europe 2023 successful by spreading the word and submitting your proposal and sponsorship! Follow us on Twitter (<a href="https://twitter.com/PulsarSummit" target="_blank" rel="noopener noreferrer">@pulsarsummit</a>) to receive the latest updates on the summit.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="about-apache-pulsar">About Apache Pulsar<a href="#about-apache-pulsar" class="hash-link" aria-label="Direct link to About Apache Pulsar" title="Direct link to About Apache Pulsar">​</a></h2><p>Apache Pulsar is a cloud-native, distributed messaging and streaming platform that empowers companies around the world to manage trillions of events per day. The Pulsar community has witnessed rapid growth since it became a top-level Apache Software Foundation project in 2018. Over the past four years, the vibrant community keeps driving innovation and improvements to the project.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="about-the-organizer">About the organizer<a href="#about-the-organizer" class="hash-link" aria-label="Direct link to About the organizer" title="Direct link to About the organizer">​</a></h2><p>StreamNative is proud to host Pulsar Virtual Summit Europe 2023. Founded by the original developers of Apache Pulsar and Apache BookKeeper, StreamNative builds a cloud-native event streaming platform that enables enterprises to easily access data as real-time event streams. As the core developers of Pulsar, the StreamNative team is deeply versed in the technology, the community, and the use cases. Today, StreamNative is focusing on growing the Apache Pulsar and BookKeeper communities and bringing its deep experience across diverse Pulsar use cases to companies across the globe.</p><p>Want to stay informed of the latest developments regarding Pulsar Virtual Summit Europe 2023? <a href="https://share.hsforms.com/1kAHYVhYzR6mYDzvzsXRnWA3x5r4" target="_blank" rel="noopener noreferrer">Sign up here</a> to be the first to hear about open registration, exciting speaker announcements, and details for all things Pulsar Summit.</p>]]></content>
        <author>
            <name>Karin Landers</name>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[What’s New in Apache Pulsar 2.11]]></title>
        <id>https://pulsar.apache.org/blog/2023/01/20/Apache-Pulsar-2-11-0</id>
        <link href="https://pulsar.apache.org/blog/2023/01/20/Apache-Pulsar-2-11-0"/>
        <updated>2023-01-20T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[The Apache Pulsar community releases version 2.11! 61 contributors provided feature enhancements and fixes that delivered 1617 commits. Thanks for all your contributions.]]></summary>
        <content type="html"><![CDATA[<p>The Apache Pulsar community releases version 2.11! 61 contributors provided feature enhancements and fixes that delivered 1617 commits. Thanks for all your contributions.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="highlights-of-the-211-release">Highlights of the 2.11 release<a href="#highlights-of-the-211-release" class="hash-link" aria-label="Direct link to Highlights of the 2.11 release" title="Direct link to Highlights of the 2.11 release">​</a></h2><ul><li>Upgrade Pulsar server Java build version to 17 (<a href="https://github.com/apache/pulsar/issues/15207" target="_blank" rel="noopener noreferrer">PIP-156</a>)</li><li>Support chunking with shared subscriptions (<a href="https://github.com/apache/pulsar/pull/16202" target="_blank" rel="noopener noreferrer">PR-16202</a>)</li><li>Support pluggable topic factory (<a href="https://github.com/apache/pulsar/pull/12235" target="_blank" rel="noopener noreferrer">PR-12235</a>)</li><li>Support configurable compression type for <code>ManagedCursorInfo</code> to balance storage resource usage (<a href="https://github.com/apache/pulsar/pull/14542" target="_blank" rel="noopener noreferrer">PR-14542</a>)</li></ul><p>This blog documents the most noteworthy changes in this release. For the complete list, including all feature enhancements and bug fixes, check out the <a href="https://pulsar.apache.org/release-notes/versioned/pulsar-2.11.0/" target="_blank" rel="noopener noreferrer">Pulsar 2.11 Release Notes</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="notable-feature-enhancements-and-fixes">Notable feature enhancements and fixes<a href="#notable-feature-enhancements-and-fixes" class="hash-link" aria-label="Direct link to Notable feature enhancements and fixes" title="Direct link to Notable feature enhancements and fixes">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="broker">Broker<a href="#broker" class="hash-link" aria-label="Direct link to Broker" title="Direct link to Broker">​</a></h3><hr><h4 class="anchor anchorWithStickyNavbar_LWe7" id="store-subscription-properties-within-metadata-service-pr-15757">Store subscription properties within metadata service (<a href="https://github.com/apache/pulsar/pull/15757" target="_blank" rel="noopener noreferrer">PR-15757</a>)<a href="#store-subscription-properties-within-metadata-service-pr-15757" class="hash-link" aria-label="Direct link to store-subscription-properties-within-metadata-service-pr-15757" title="Direct link to store-subscription-properties-within-metadata-service-pr-15757">​</a></h4><p><strong>Issue</strong></p><p>Restarting the broker or unloading topics may lead to the loss of subscription properties since they are not stored in the metadata service.</p><p><strong>Resolution</strong></p><p>Store the subscription properties within the metadata service (<code>ManagedCursorInfo</code>).</p><hr><h4 class="anchor anchorWithStickyNavbar_LWe7" id="support-configurable-compression-type-for-managedcursorinfo-pr-14542">Support configurable compression type for <code>ManagedCursorInfo</code> (<a href="https://github.com/apache/pulsar/pull/14542" target="_blank" rel="noopener noreferrer">PR-14542</a>)<a href="#support-configurable-compression-type-for-managedcursorinfo-pr-14542" class="hash-link" aria-label="Direct link to support-configurable-compression-type-for-managedcursorinfo-pr-14542" title="Direct link to support-configurable-compression-type-for-managedcursorinfo-pr-14542">​</a></h4><p><strong>Issue</strong></p><p>When the cursor data expands, the data size increases and it takes a lot of time to pull the data.</p><p><strong>Resolution</strong></p><p>Introduce various compression algorithms to support cursor compression.</p><p><strong>Reference documentation:</strong> <a href="https://pulsar.apache.org/reference/#/2.11.x/config/reference-configuration-broker?id=managedcursorinfocompressiontype" target="_blank" rel="noopener noreferrer">managedCursorInfoCompressionType</a></p><hr><h4 class="anchor anchorWithStickyNavbar_LWe7" id="sync-pulsar-metadata-across-multiple-clouds-pr-16425">Sync Pulsar metadata across multiple clouds (<a href="https://github.com/apache/pulsar/pull/16425" target="_blank" rel="noopener noreferrer">PR-16425</a>)<a href="#sync-pulsar-metadata-across-multiple-clouds-pr-16425" class="hash-link" aria-label="Direct link to sync-pulsar-metadata-across-multiple-clouds-pr-16425" title="Direct link to sync-pulsar-metadata-across-multiple-clouds-pr-16425">​</a></h4><p><strong>Issue</strong></p><p>Synchronizing configuration metadata (policies) is a critical path to sharing tenant/namespace/topic policies among clusters and administering policies uniformly across all clusters. However, syncing the metadata store (global zookeeper) among Pulsar clusters deployed on separate cloud platforms is not supported in earlier versions.</p><p><strong>Resolution</strong></p><p>Use two system topics <code>metadataSyncEventTopic</code> and <code>configurationmetadataSyncEventTopic</code> along with a metadata synchronizer to sync metadata among clusters deployed on different cloud platforms and persist local topic policies with it.</p><p><strong>Reference documentation</strong></p><ul><li><a href="https://pulsar.apache.org/reference/#/2.11.x/config/reference-configuration-broker?id=metadatasynceventtopic" target="_blank" rel="noopener noreferrer">metadataSyncEventTopic</a></li><li><a href="https://pulsar.apache.org/reference/#/2.11.x/config/reference-configuration-broker?id=configurationmetadatasynceventtopic" target="_blank" rel="noopener noreferrer">configurationmetadataSyncEventTopic</a></li></ul><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="producer">Producer<a href="#producer" class="hash-link" aria-label="Direct link to Producer" title="Direct link to Producer">​</a></h3><hr><h4 class="anchor anchorWithStickyNavbar_LWe7" id="fix-client-memory-limit-currentusage-leak-in-producerimpl-pr-16837">Fix client memory limit <code>currentUsage</code> leak in <code>ProducerImpl</code> (<a href="https://github.com/apache/pulsar/pull/16837" target="_blank" rel="noopener noreferrer">PR-16837</a>)<a href="#fix-client-memory-limit-currentusage-leak-in-producerimpl-pr-16837" class="hash-link" aria-label="Direct link to fix-client-memory-limit-currentusage-leak-in-producerimpl-pr-16837" title="Direct link to fix-client-memory-limit-currentusage-leak-in-producerimpl-pr-16837">​</a></h4><p><strong>Issue</strong></p><p>The client memory limit <code>currentUsage</code> leaks in <code>ProducerImpl</code> and causes the producer’s send rate to be slow.</p><p><strong>Resolution</strong></p><p>Release the memory when there are failed pending batch messages.</p><hr><h4 class="anchor anchorWithStickyNavbar_LWe7" id="release-semaphore-before-discarding-messages-in-batchmessagecontainer-pr-17019">Release semaphore before discarding messages in <code>batchMessageContainer</code> (<a href="https://github.com/apache/pulsar/pull/17019" target="_blank" rel="noopener noreferrer">PR-17019</a>)<a href="#release-semaphore-before-discarding-messages-in-batchmessagecontainer-pr-17019" class="hash-link" aria-label="Direct link to release-semaphore-before-discarding-messages-in-batchmessagecontainer-pr-17019" title="Direct link to release-semaphore-before-discarding-messages-in-batchmessagecontainer-pr-17019">​</a></h4><p><strong>Issue</strong></p><p>There is a race condition in <code>batchMessageContainer</code> when discarding the messages and releasing the semaphore, which causes the semaphore to be held.</p><p><strong>Resolution</strong></p><p>Release the semaphore before discarding the messages in <code>batchMessageContainer</code>.</p><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="consumer">Consumer<a href="#consumer" class="hash-link" aria-label="Direct link to Consumer" title="Direct link to Consumer">​</a></h3><hr><h4 class="anchor anchorWithStickyNavbar_LWe7" id="support-consumer-client-memory-limit-pr-15216">Support consumer client memory limit (<a href="https://github.com/apache/pulsar/pull/15216" target="_blank" rel="noopener noreferrer">PR-15216</a>)<a href="#support-consumer-client-memory-limit-pr-15216" class="hash-link" aria-label="Direct link to support-consumer-client-memory-limit-pr-15216" title="Direct link to support-consumer-client-memory-limit-pr-15216">​</a></h4><p><strong>Issue</strong></p><p>It takes time for an application with a large number of producers/consumers to select an appropriate value for its queue size. The same applies to topics with many partitions.</p><p><strong>Resolution</strong></p><ol><li>Block the expansion of the consumer receiver’s queue size if the memory usage exceeds 75%.</li><li>Trigger the shrinking of the consumer receiver’s queue size if the memory usage exceeds 95%.</li></ol><hr><h4 class="anchor anchorWithStickyNavbar_LWe7" id="support-adding-interceptors-for-readers-pr-14729">Support adding interceptors for readers (<a href="https://github.com/apache/pulsar/pull/14729" target="_blank" rel="noopener noreferrer">PR-14729</a>)<a href="#support-adding-interceptors-for-readers-pr-14729" class="hash-link" aria-label="Direct link to support-adding-interceptors-for-readers-pr-14729" title="Direct link to support-adding-interceptors-for-readers-pr-14729">​</a></h4><p><strong>Issue</strong></p><p>Pulsar supports adding interceptors for producers and consumers to implement message tracing, but there is no way to add interceptors for readers.</p><p><strong>Resolution</strong></p><ol><li>Add a new interface <code>ReaderInterceptor</code> to customize the reader interceptor.</li><li>Support setting reader interceptor and auto-update partition configurations by using <code>ReaderBuilder</code>.</li></ol><p><strong>User documentation:</strong> <a href="https://pulsar.apache.org/docs/2.11.x/client-libraries-java/#create-reader-with-interceptor" target="_blank" rel="noopener noreferrer">Create a reader with an interceptor</a></p><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="function">Function<a href="#function" class="hash-link" aria-label="Direct link to Function" title="Direct link to Function">​</a></h3><hr><h4 class="anchor anchorWithStickyNavbar_LWe7" id="support-record-as-a-new-output-type-of-functions-pr-16041">Support <code>Record</code> as a new output type of Functions (<a href="https://github.com/apache/pulsar/pull/16041" target="_blank" rel="noopener noreferrer">PR-16041</a>)<a href="#support-record-as-a-new-output-type-of-functions-pr-16041" class="hash-link" aria-label="Direct link to support-record-as-a-new-output-type-of-functions-pr-16041" title="Direct link to support-record-as-a-new-output-type-of-functions-pr-16041">​</a></h4><p><strong>Issue</strong></p><p>In earlier versions, if you want to dynamically set an output topic, message properties, or change the output schema in a Pulsar function, the only way is to create a function that returns <code>Void</code>. It would be more intuitive to return a structure like <code>Record</code> that carries this information.</p><p><strong>Resolution</strong></p><p>Add a utility method <code>newOutputRecordBuilder</code> to <code>Context</code> that returns a <code>FunctionRecord</code> builder initialized with the information from the source record. The builder methods can be used to override these values as needed.</p><p><strong>User documentation:</strong> <a href="https://pulsar.apache.org/docs/2.11.x/functions-develop-api#use-sdk-for-javapythongo" target="_blank" rel="noopener noreferrer">Use <code>Record</code> as function output</a></p><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tiered-storage">Tiered storage<a href="#tiered-storage" class="hash-link" aria-label="Direct link to Tiered storage" title="Direct link to Tiered storage">​</a></h3><hr><h4 class="anchor anchorWithStickyNavbar_LWe7" id="add-a-universal-s3-provider-for-the-offloader-pr-15710">Add a universal S3 provider for the offloader (<a href="https://github.com/apache/pulsar/pull/15710" target="_blank" rel="noopener noreferrer">PR-15710</a>)<a href="#add-a-universal-s3-provider-for-the-offloader-pr-15710" class="hash-link" aria-label="Direct link to add-a-universal-s3-provider-for-the-offloader-pr-15710" title="Direct link to add-a-universal-s3-provider-for-the-offloader-pr-15710">​</a></h4><p><strong>Issue</strong></p><p>Pulsar supports cloud storage compatible with S3 APIs, such as AWS and Aliyun, through existing offloaders, but the forced registration of specific metadata limits their use.</p><p><strong>Resolution</strong></p><p>Provide a more general offloader <code>S3</code> to serve more S3-compatible storage, which uses pure JClouds S3 metadata and allows overriding the default JClouds properties through system properties.</p><p><strong>User documentation:</strong> <a href="https://pulsar.apache.org/docs/2.11.x/tiered-storage-s3" target="_blank" rel="noopener noreferrer">Use S3 offloader with Pulsar</a></p><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="proxy">Proxy<a href="#proxy" class="hash-link" aria-label="Direct link to Proxy" title="Direct link to Proxy">​</a></h3><hr><h4 class="anchor anchorWithStickyNavbar_LWe7" id="support-prometheusrawmetricsprovider-for-pulsar-proxies-pr-14681">Support <code>PrometheusRawMetricsProvider</code> for Pulsar proxies (<a href="https://github.com/apache/pulsar/pull/14681" target="_blank" rel="noopener noreferrer">PR-14681</a>)<a href="#support-prometheusrawmetricsprovider-for-pulsar-proxies-pr-14681" class="hash-link" aria-label="Direct link to support-prometheusrawmetricsprovider-for-pulsar-proxies-pr-14681" title="Direct link to support-prometheusrawmetricsprovider-for-pulsar-proxies-pr-14681">​</a></h4><p><strong>Issue</strong></p><p>The metrics of plugins could not be exposed to Prometheus for monitoring.</p><p><strong>Resolution</strong></p><p>Add <code>PrometheusRawMetricsProvider</code> in Pulsar proxies so that plugins can add their metrics to Prometheus.</p><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="whats-next">What’s Next?<a href="#whats-next" class="hash-link" aria-label="Direct link to What’s Next?" title="Direct link to What’s Next?">​</a></h2><p>If you are interested in learning more about Pulsar 2.11, you can <a href="https://pulsar.apache.org/download/" target="_blank" rel="noopener noreferrer">download</a> and try it out now!</p><p>For more information about the Apache Pulsar project and current progress, visit
the <a href="https://pulsar.apache.org" target="_blank" rel="noopener noreferrer">Pulsar website</a>, follow the project on Twitter
<a href="https://twitter.com/apache_pulsar" target="_blank" rel="noopener noreferrer">@apache_pulsar</a>, and join <a href="https://apache-pulsar.slack.com/" target="_blank" rel="noopener noreferrer">Pulsar Slack</a>!</p>]]></content>
        <author>
            <name>Technoboy-, momo-jun</name>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Apache Pulsar 2022 Year in Review]]></title>
        <id>https://pulsar.apache.org/blog/2023/01/10/pulsar-2022-year-in-review</id>
        <link href="https://pulsar.apache.org/blog/2023/01/10/pulsar-2022-year-in-review"/>
        <updated>2023-01-10T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[2022 was an incredible year for Apache Pulsar as it witnessed strong community growth with the project becoming more stable, scalable, and secure.]]></summary>
        <content type="html"><![CDATA[<p>2022 was an incredible year for Apache Pulsar as it witnessed strong community growth with the project becoming more stable, scalable, and secure.</p><p>We are grateful to all of our community members and those in the wider open-source community who contributed to the project. They are the reasons behind every step Pulsar has made over the past year.</p><p>Now, let’s take a look at some of the highlights in 2022.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="new-pulsar-website">New Pulsar website<a href="#new-pulsar-website" class="hash-link" aria-label="Direct link to New Pulsar website" title="Direct link to New Pulsar website">​</a></h2><p>In May 2022, the Apache Pulsar community <a href="https://lists.apache.org/thread/7nx3rm3cmpbw0ws1b62k17935xgyw2tj" target="_blank" rel="noopener noreferrer">launched its new website</a>. The new appearance has a light blue background with the homepage structure redesigned. You can see <a href="https://github.com/apache/pulsar/issues/12637" target="_blank" rel="noopener noreferrer">PIP-87</a> and <a href="https://github.com/apache/pulsar/issues/13235" target="_blank" rel="noopener noreferrer">PIP-113</a> for more details. Following is a comparison of the websites.</p><p>Before:</p><p><img loading="lazy" src="/assets/images/pulsar-website-before-1ada885dd6c87c47f266a2ab1a099c02.png" width="1487" height="912" class="img_ev3q"></p><p>After:</p><p><img loading="lazy" src="/assets/images/pulsar-new-website-after-1-db55bf2d1080fa68d46117b2d50c34fa.png" width="1542" height="844" class="img_ev3q"></p><p><img loading="lazy" src="/assets/images/pulsar-new-website-after-2-d5f5cb444fbabd3ee6e950a66eef4222.png" width="1416" height="895" class="img_ev3q"></p><p>Many community members <a href="https://github.com/apache/pulsar/issues/15538#issuecomment-1125602899" target="_blank" rel="noopener noreferrer">participated in the discussion and provided valuable feedback</a>. Currently, the Pulsar community is still working to improve the reader experience by making key information more visible and accessible.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="key-events-recap">Key events recap<a href="#key-events-recap" class="hash-link" aria-label="Direct link to Key events recap" title="Direct link to Key events recap">​</a></h2><p>In 2022, the Apache Pulsar community put together a number of meetups and events across the globe to share the latest messaging and streaming technologies. Among others, two Pulsar Summits received the most attention from community members.</p><ul><li><a href="https://streamnative.io/blog/community/2022-08-25-pulsar-summit-sf-2022-community-event-recap/" target="_blank" rel="noopener noreferrer">Pulsar Summit San Francisco 2022</a>: This event marked the first-ever, in-person Pulsar Summit in North America with 200+ attendees. It featured 20 speakers from companies like Google, AWS, and Yahoo!, 5 keynotes on Apache Pulsar and other streaming technologies, and 12 breakout sessions on tech deep dives, use cases, and ecosystem talks. <a href="https://streamnative.io/pulsar-summit-on-demand/" target="_blank" rel="noopener noreferrer">Watch the sessions</a>.</li><li><a href="/blog/2022/12/01/pulsar-summit-asia-2022-recap/" target="_blank" rel="noopener noreferrer">Pulsar Summit Asia 2022</a>: With 1,500+ registrations and 40,000+ views globally, this two-day virtual event gathered 41 speakers giving 3 keynote addresses and 36 sessions. They came from companies like ByteDance, Huawei, Tencent, Nippon Telegraph and Telephone Corporation (NTT), Yum China, Netease, vivo, Nutanix, and StreamNative. <a href="https://www.youtube.com/playlist?list=PLqRma1oIkcWgeNb3kgzqFyg5sywH8S4yy" target="_blank" rel="noopener noreferrer">Watch the sessions</a>.</li></ul><p>To stay up to date with the latest events, you can join the following meetups or groups:</p><ul><li><a href="https://www.meetup.com/new-york-city-apache-pulsar-meetup/" target="_blank" rel="noopener noreferrer">New York City Apache Pulsar Meetup</a></li><li><a href="https://www.meetup.com/sf-bay-area-apache-pulsar-meetup/" target="_blank" rel="noopener noreferrer">SF Bay Area Apache Pulsar Meetup</a></li><li><a href="https://www.meetup.com/netherlands-apache-pulsar-meetup/" target="_blank" rel="noopener noreferrer">Netherlands Apache Pulsar Meetup</a></li><li><a href="https://japan-pulsar-user-group.connpass.com/" target="_blank" rel="noopener noreferrer">Japan Pulsar User Group</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="community-growth">Community growth<a href="#community-growth" class="hash-link" aria-label="Direct link to Community growth" title="Direct link to Community growth">​</a></h2><p>The development of the Pulsar community would not be possible without our contributors. Among them, Pulsar Committers and PMC members have taken the lead in contributing to and promoting the project. In 2022, many new faces joined the community while we also welcomed old friends taking more responsibility. Let’s take a look at the Pulsar community by numbers.</p><ul><li><strong>598</strong> global contributors for the Pulsar main GitHub repository</li><li><strong>12.1K+</strong> GitHub stars</li><li><strong>3.2K+</strong> forks</li><li><strong>16</strong> new Committers</li><li><strong>5</strong> new PMC members</li><li><strong>9560</strong> Pulsar Slack members</li><li><strong>4.3K+</strong> downloads</li><li><strong>14M+</strong> Docker pulls</li></ul><p>The Pulsar community welcomes all kinds of contributions. For more information, see the <a href="/contribute/" target="_blank" rel="noopener noreferrer">Apache Pulsar Contribution Guide</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="project-releases">Project releases<a href="#project-releases" class="hash-link" aria-label="Direct link to Project releases" title="Direct link to Project releases">​</a></h2><p>In 2022, the Pulsar community worked hard to improve the project’s capabilities and fix existing bugs with 1 major version and 8 minor versions. Many important Pulsar capabilities were delivered in these releases, such as <a href="https://github.com/apache/pulsar/pull/13316" target="_blank" rel="noopener noreferrer">cluster-level automatic failure recovery</a> and <a href="https://github.com/apache/pulsar/pull/10279" target="_blank" rel="noopener noreferrer">lazy-loading added to PartitionedProducer</a>. Check out each release below to see details:</p><ul><li><a href="https://github.com/apache/pulsar/releases/tag/v2.10.2" target="_blank" rel="noopener noreferrer">2.10.2</a></li><li><a href="https://github.com/apache/pulsar/releases/tag/v2.10.1" target="_blank" rel="noopener noreferrer">2.10.1</a></li><li><a href="https://github.com/apache/pulsar/releases/tag/v2.10.0" target="_blank" rel="noopener noreferrer">2.10.0</a></li><li><a href="https://github.com/apache/pulsar/releases/tag/v2.9.3" target="_blank" rel="noopener noreferrer">2.9.3</a></li><li><a href="https://github.com/apache/pulsar/releases/tag/v2.9.2" target="_blank" rel="noopener noreferrer">2.9.2</a></li><li><a href="https://github.com/apache/pulsar/releases/tag/v2.8.4" target="_blank" rel="noopener noreferrer">2.8.4</a></li><li><a href="https://github.com/apache/pulsar/releases/tag/v2.8.3" target="_blank" rel="noopener noreferrer">2.8.3</a></li><li><a href="https://github.com/apache/pulsar/releases/tag/v2.8.2" target="_blank" rel="noopener noreferrer">2.8.2</a></li><li><a href="https://github.com/apache/pulsar/releases/tag/v2.7.5" target="_blank" rel="noopener noreferrer">2.7.5</a></li></ul><p>For more information, see the <a href="/release-notes/" target="_blank" rel="noopener noreferrer">Release Notes page</a>.</p><p>Updates about clients, Pulsar Manager, and Pulsar Helm Chart are listed below:</p><ul><li><a href="https://github.com/apache/pulsar-client-cpp/releases/tag/v3.1.0" target="_blank" rel="noopener noreferrer">Pulsar C++ Client 3.1.0</a></li><li><a href="https://github.com/apache/pulsar-client-cpp/releases/tag/v3.0.0" target="_blank" rel="noopener noreferrer">Pulsar C++ Client 3.0.0</a></li><li><a href="https://github.com/apache/pulsar-client-go/releases/tag/v0.9.0" target="_blank" rel="noopener noreferrer">Pulsar Go Client 0.9.0</a></li><li><a href="https://github.com/apache/pulsar-client-go/releases/tag/v0.8.1" target="_blank" rel="noopener noreferrer">Pulsar Go Client 0.8.1</a></li><li><a href="https://github.com/apache/pulsar-client-go/releases/tag/v0.8.0" target="_blank" rel="noopener noreferrer">Pulsar Go Client 0.8.0</a></li><li><a href="https://github.com/apache/pulsar-client-node/releases/tag/v1.7.0" target="_blank" rel="noopener noreferrer">Pulsar Node.js Client 1.7.0</a></li><li><a href="https://github.com/apache/pulsar-client-node/releases/tag/v1.6.2" target="_blank" rel="noopener noreferrer">Pulsar Node.js Client 1.6.2</a></li><li><a href="https://github.com/apache/pulsar-client-python/releases/tag/v3.0.0" target="_blank" rel="noopener noreferrer">Pulsar Python Client 3.0.0</a></li><li><a href="https://github.com/apache/pulsar-client-reactive/releases/tag/v0.1.0" target="_blank" rel="noopener noreferrer">Reactive Client for Apache Pulsar 0.1.0</a></li><li><a href="https://github.com/apache/pulsar-manager/releases/tag/v0.3.0" target="_blank" rel="noopener noreferrer">Pulsar Manager 0.3.0</a></li><li><a href="https://github.com/apache/pulsar-helm-chart/releases/tag/pulsar-3.0.0" target="_blank" rel="noopener noreferrer">Pulsar Helm Chart 3.0.0</a></li></ul><p>For more information, see the <a href="/release-notes/clients/" target="_blank" rel="noopener noreferrer">Clients Release Notes page</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pulsar-ecosystem">Pulsar ecosystem<a href="#pulsar-ecosystem" class="hash-link" aria-label="Direct link to Pulsar ecosystem" title="Direct link to Pulsar ecosystem">​</a></h2><p>In 2022, the Pulsar community worked with other open-source communities to add more integrations to the Pulsar ecosystem. Notable integrations include:</p><ul><li><a href="https://spring.io/blog/2022/09/20/spring-for-apache-pulsar-0-1-0-m1-is-now-available" target="_blank" rel="noopener noreferrer">Spring for Apache Pulsar</a>: This project aims to provide Spring-friendly APIs, building blocks, and programming models for writing Java applications that interact with Apache Pulsar. For more information, read the blog <a href="https://spring.io/blog/2022/12/15/spring-for-apache-pulsar-0-1-0-available-now" target="_blank" rel="noopener noreferrer">Spring for Apache Pulsar 0.1.0 available now</a>.</li><li><a href="https://nightlies.apache.org/flink/flink-docs-master/docs/connectors/datastream/pulsar/#pulsar-sink" target="_blank" rel="noopener noreferrer">Flink-Pulsar Sink Connector</a>: The Flink-Pulsar Sink Connector is part of the Flink-Pulsar DataStream Connector. It implements Flink’s new <a href="https://cwiki.apache.org/confluence/display/FLINK/FLIP-177%3A+Extend+Sink+API" target="_blank" rel="noopener noreferrer">SinkV2 API</a> and allows you to write Flink job results back to Pulsar topics seamlessly.</li><li><a href="https://github.com/apache/pulsar/issues/17719" target="_blank" rel="noopener noreferrer">HTTP Sink Connector</a>: The HTTP Sink Connector pushes records to any HTTP server with the record value in the body of POST method. The body of the HTTP request is the JSON representation of the record value.</li></ul><p>For more information, see the <a href="/ecosystem/" target="_blank" rel="noopener noreferrer">Ecosystem page</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="whats-next-in-2023">What’s next in 2023<a href="#whats-next-in-2023" class="hash-link" aria-label="Direct link to What’s next in 2023" title="Direct link to What’s next in 2023">​</a></h2><p>The Pulsar community seeks to further improve the project from different aspects. For example, we plan on releasing the first long-term support (LTS) version of Pulsar to meet the needs of different users. For those who want a more stable Pulsar version, they can choose the LTS release. The Pulsar community will help improve and upgrade the LTS versions with bug fixes and security patches.</p><p>Additionally, we will also have more events coming for 2023, including Pulsar Summit North America and Pulsar Summit APAC. To stay up to date with community news and discuss hot topics with other members, you can subscribe to the Pulsar mailing lists for <a href="mailto:users-subscribe@pulsar.apache.org" target="_blank" rel="noopener noreferrer">users</a> and <a href="mailto:dev-subscribe@pulsar.apache.org" target="_blank" rel="noopener noreferrer">developers</a>, follow us on <a href="https://twitter.com/apache_pulsar" target="_blank" rel="noopener noreferrer">Twitter</a>, and join the <a href="https://communityinviter.com/apps/apache-pulsar/apache-pulsar" target="_blank" rel="noopener noreferrer">Pulsar Slack workspace</a>.</p>]]></content>
        <author>
            <name>Apache Pulsar Community</name>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[What’s New in Apache Pulsar 2.10.3]]></title>
        <id>https://pulsar.apache.org/blog/2023/01/09/Apache-Pulsar-2-10-3</id>
        <link href="https://pulsar.apache.org/blog/2023/01/09/Apache-Pulsar-2-10-3"/>
        <updated>2023-01-09T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[The Apache Pulsar community releases version 2.10.3! 50 contributors provided improvements and bug fixes that delivered 155 commits. Thanks for all your contributions.]]></summary>
        <content type="html"><![CDATA[<p>The Apache Pulsar community releases version 2.10.3! 50 contributors provided improvements and bug fixes that delivered 155 commits. Thanks for all your contributions.</p><p>This blog walks through the most noteworthy changes. For the complete list including all feature enhancements and bug fixes, check out the <a href="https://pulsar.apache.org/release-notes/versioned/pulsar-2.10.3/" target="_blank" rel="noopener noreferrer">Pulsar 2.10.3 Release Notes</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="add-getstate-in-transactions-for-client-apis-pr-17423">Add <code>getState</code> in transactions for client APIs (<a href="https://github.com/apache/pulsar/pull/17423" target="_blank" rel="noopener noreferrer">PR-17423</a>)<a href="#add-getstate-in-transactions-for-client-apis-pr-17423" class="hash-link" aria-label="Direct link to add-getstate-in-transactions-for-client-apis-pr-17423" title="Direct link to add-getstate-in-transactions-for-client-apis-pr-17423">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="issue">Issue<a href="#issue" class="hash-link" aria-label="Direct link to Issue" title="Direct link to Issue">​</a></h4><p>In earlier versions, the state of transactions on the client side could not be obtained with the client APIs. Users have no way to check the state of transactions before ending them.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="resolution">Resolution<a href="#resolution" class="hash-link" aria-label="Direct link to Resolution" title="Direct link to Resolution">​</a></h4><p>Add an interface to get the state of transactions.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="enable-delayed-transaction-messages-pr-17548">Enable delayed transaction messages (<a href="https://github.com/apache/pulsar/pull/17548" target="_blank" rel="noopener noreferrer">PR-17548</a>)<a href="#enable-delayed-transaction-messages-pr-17548" class="hash-link" aria-label="Direct link to enable-delayed-transaction-messages-pr-17548" title="Direct link to enable-delayed-transaction-messages-pr-17548">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="issue-1">Issue<a href="#issue-1" class="hash-link" aria-label="Direct link to Issue" title="Direct link to Issue">​</a></h4><p>In earlier versions, delayed message delivery and transaction messages could not be used simultaneously. When sending a transaction message with a certain delay and committing this transaction, the messages sent by transactions are immediately received by consumers without any expected delay.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="resolution-1">Resolution<a href="#resolution-1" class="hash-link" aria-label="Direct link to Resolution" title="Direct link to Resolution">​</a></h4><p>Allow clients to send delayed messages with transactions using <code>trackDelayedDelivery</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="allow-configuring-and-disabling-the-size-of-lookahead-for-detecting-fixed-delays-in-messages-pr-17907">Allow configuring and disabling the size of <code>lookahead</code> for detecting fixed delays in messages (<a href="https://github.com/apache/pulsar/pull/17907" target="_blank" rel="noopener noreferrer">PR-17907</a>)<a href="#allow-configuring-and-disabling-the-size-of-lookahead-for-detecting-fixed-delays-in-messages-pr-17907" class="hash-link" aria-label="Direct link to allow-configuring-and-disabling-the-size-of-lookahead-for-detecting-fixed-delays-in-messages-pr-17907" title="Direct link to allow-configuring-and-disabling-the-size-of-lookahead-for-detecting-fixed-delays-in-messages-pr-17907">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="issue-2">Issue<a href="#issue-2" class="hash-link" aria-label="Direct link to Issue" title="Direct link to Issue">​</a></h4><p>When detecting that all messages have a fixed delay time, it’s helpful that users can configure the size of <code>lookahead</code> to detect and pause the reads from cursors. But in earlier versions, the size of `lookahead is pre-defined and fixed, which lacks flexibility and limits the usage.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="resolution-2">Resolution<a href="#resolution-2" class="hash-link" aria-label="Direct link to Resolution" title="Direct link to Resolution">​</a></h4><p>Allow configuring and disabling the size of <code>lookahead</code> for detecting fixed delays in messages.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fix-memory-leak-while-offloading-ledgers-pr-18500">Fix memory leak while offloading ledgers (<a href="https://github.com/apache/pulsar/pull/18500" target="_blank" rel="noopener noreferrer">PR-18500</a>)<a href="#fix-memory-leak-while-offloading-ledgers-pr-18500" class="hash-link" aria-label="Direct link to fix-memory-leak-while-offloading-ledgers-pr-18500" title="Direct link to fix-memory-leak-while-offloading-ledgers-pr-18500">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="issue-3">Issue<a href="#issue-3" class="hash-link" aria-label="Direct link to Issue" title="Direct link to Issue">​</a></h4><p>In earlier versions, <code>BlockAwareSegmentInputStreamImpl</code> never releases the BookKeeper entries in the <code>close</code> method, leading to <code>OutOfDirectMemory</code> errors on brokers that frequently run offloading activities. This PR fixes the incorrect <code>if</code> conditions.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fix-namespace-cannot-be-deleted-by-force-pr-18307">Fix namespace cannot be deleted by force (<a href="https://github.com/apache/pulsar/pull/18307" target="_blank" rel="noopener noreferrer">PR-18307</a>)<a href="#fix-namespace-cannot-be-deleted-by-force-pr-18307" class="hash-link" aria-label="Direct link to fix-namespace-cannot-be-deleted-by-force-pr-18307" title="Direct link to fix-namespace-cannot-be-deleted-by-force-pr-18307">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="issue-4">Issue<a href="#issue-4" class="hash-link" aria-label="Direct link to Issue" title="Direct link to Issue">​</a></h4><p>In earlier versions, when you delete a namespace by force, if <code>__transaction_buffer_snapshot</code> and <code>__change_events</code> (system topic for topic policies) have been deleted, then the deletion of regular topics will fail because it cannot clear the snapshots and topic policies.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="resolution-3">Resolution<a href="#resolution-3" class="hash-link" aria-label="Direct link to Resolution" title="Direct link to Resolution">​</a></h4><p>Delete regular topics before deleting system topics when deleting a namespace. And deleting the system topic <code>__change_events</code> does not clear its topic policy.</p><h1>What’s Next?</h1><p>If you are interested in learning more about Pulsar 2.10.3, you can <a href="https://pulsar.apache.org/download/" target="_blank" rel="noopener noreferrer">download</a> and try it out now! </p><p>For more information about the Apache Pulsar project and current progress, visit
the <a href="https://pulsar.apache.org" target="_blank" rel="noopener noreferrer">Pulsar website</a>, follow the project on Twitter
<a href="https://twitter.com/apache_pulsar" target="_blank" rel="noopener noreferrer">@apache_pulsar</a>, and join <a href="https://apache-pulsar.slack.com/" target="_blank" rel="noopener noreferrer">Pulsar Slack</a>!</p>]]></content>
        <author>
            <name>liangyepianzhou, momo-jun</name>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Pulsar Summit Asia 2022 Recap]]></title>
        <id>https://pulsar.apache.org/blog/2022/12/01/pulsar-summit-asia-2022-recap</id>
        <link href="https://pulsar.apache.org/blog/2022/12/01/pulsar-summit-asia-2022-recap"/>
        <updated>2022-12-01T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Since its inception in 2020, Pulsar Summit Asia has received increasing attention from both Asia and beyond. For Pulsar Summit Asia 2022, more than 1400 people from companies like Amazon, Tencent, IBM, Huawei, Dell, ByteDance, and Splunk registered for this online event to discuss the latest messaging and streaming technologies powering a wide variety of industries like education, food, gaming, e-commerce, and social media.]]></summary>
        <content type="html"><![CDATA[<p><img loading="lazy" src="/assets/images/pulsar-summit-asia-2022-recap-top-6e5633c97c21533de7ed1b6f42a0ab36.jpg" width="855" height="364" class="img_ev3q"></p><p>Since its inception in 2020, Pulsar Summit Asia has received increasing attention from both Asia and beyond. For Pulsar Summit Asia 2022, more than 1400 people from companies like Amazon, Tencent, IBM, Huawei, Dell, ByteDance, and Splunk registered for this online event to discuss the latest messaging and streaming technologies powering a wide variety of industries like education, food, gaming, e-commerce, and social media.</p><p>Before we talk	about some of the Summit highlights, we would like to thank the entire Apache Pulsar community and all the friends from other open-source communities for making this event a great success! Additionally, this event would not have drawn the attention of such a broad audience without our speakers, Program Committee members, as well as community and media partners. Thank you all for your help and energy!</p><p>And now, let’s look at some of the highlights and a round-up of this online virtual event:</p><ul><li>1400+ registrations and 40,000+ views globally</li><li>41 speakers from companies like ByteDance, Huawei, Tencent, Nippon Telegraph and Telephone Corporation (NTT), Yum China, Netease, vivo, Nutanix, and StreamNative</li><li>3 keynotes on Apache Pulsar and event-driven applications</li><li>36 sessions on use cases, technical deep dives, and ecosystem talks</li><li>14 Program Committee members</li><li>18 community and media partners</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="keynotes-and-sessions-at-a-glance">Keynotes and sessions at a glance<a href="#keynotes-and-sessions-at-a-glance" class="hash-link" aria-label="Direct link to Keynotes and sessions at a glance" title="Direct link to Keynotes and sessions at a glance">​</a></h2><p>This two-day virtual event brought together engineers, architects, and data scientists from the messaging and streaming communities. They talked about Pulsar adoption for different use cases, event-driven platforms, technical details, and even Pulsar integration with other ecosystems. The following is a quick recap of some of the keynotes and sessions.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="keynotes">Keynotes<a href="#keynotes" class="hash-link" aria-label="Direct link to Keynotes" title="Direct link to Keynotes">​</a></h3><ul><li><strong>A Cloud-Native, Unified Messaging and Streaming System for Modern Data Infrastructure (Mandarin)</strong>: Jia Zhai, an Apache Pulsar PMC member, gave a high-level overview of Apache Pulsar and explained how it meets the requirements for messaging and streaming with its cloud-native features.</li><li><strong>What You Should Know about Apache Pulsar in 2022 (Mandarin)</strong>: Penghui Li, an Apache Pulsar PMC member, talked about some of the existing problems in Pulsar and how the Pulsar community would work to solve them going forward.</li><li><strong>Event-Driven Applications Done Right (English)</strong>: Matteo Merli, Apache Pulsar PMC Chair, provided his insights on the fundamentals of modern event-driven applications.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="use-cases">Use cases<a href="#use-cases" class="hash-link" aria-label="Direct link to Use cases" title="Direct link to Use cases">​</a></h3><ul><li><strong>Awesome Pulsar in Yum China (English)</strong>: Chauncey Yan from Yum China explained why Yum China selected Pulsar for production and shared their experience of performance tuning.</li><li><strong>Pulsar + Envoy: Building an OTO Marketing Platform for Different Business Scenarios on Microservices (Mandarin)</strong>: Jason Jiang from Tencent shared their experience of using Pulsar and Envoy to create an OTO marketing platform built on microservices for different business scenarios.</li><li><strong>Pulsar in Smart Education: How NetEase Youdao Put Pulsar into Practice for Complex Business Scenarios (Mandarin)</strong>: Jiaqi Shen from NetEase introduced NetEase Youdao’s practices of using Apache Pulsar to support complex scenarios in smart education.</li><li><strong>Streaming Wars and How Apache Pulsar is Acing the Battle (English)</strong>: Shivji Kumar Jha and Sachidananda Maharana from Nutanix talked about how they adopted Pulsar for different use cases and migrated applications from other messaging solutions to Pulsar.</li><li><strong>Tens of Trillions of Messages: How Apache Pulsar Supports Big Data Business at Tencent (Mandarin)</strong>: Dawei Zhang from Tencent discussed how they used Apache Pulsar for big data business to support scenarios requiring high availability and strong consistency.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="technical-deep-dives">Technical deep dives<a href="#technical-deep-dives" class="hash-link" aria-label="Direct link to Technical deep dives" title="Direct link to Technical deep dives">​</a></h3><ul><li><strong>Taking Jakarta JMS to New Generation Messaging Systems - Apache Pulsar (English)</strong>: Enrico Olivelli and Mary Grygleski from DataStax explained how Pulsar concepts map to the Jakarta Messaging Specifications and demonstrated how to connect a Jakarta EE application to Pulsar.</li><li><strong>A New Way of Managing Pulsar with Infrastructure as Code (Mandarin): </strong>Max Xu and Fushu Wang from StreamNative discussed how to leverage the Terraform Provider for Pulsar and the Pulsar Resources Operator to help better manage Pulsar.</li><li><strong>A Deep Dive into Pulsar's Geo-replication for High Availability (Mandarin)</strong>: Jialing Wang from China Mobile talked about the asynchronous and synchronous data replication mechanisms, and explained how they deployed Pulsar across multiple regions and improved its performance at China Mobile.</li><li><strong>Apache Pulsar in Volcano Engine E-MapReduce: Integration and Scenarios (Mandarin)</strong>: Xin Liang from ByteDance introduced Volcano Engine E-MapReduce, a stateless, open-source big data platform, and how Pulsar fits into the platform’s ecosystem supporting different use cases.</li><li><strong>Handling 100K Consumers with One Topic: Practices and Technical Details (English): </strong>Hongjie Zhai from NTT Software Innovation Center shared their practices and technical details of handling 100K consumers with a single Pulsar topic.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ecosystem">Ecosystem<a href="#ecosystem" class="hash-link" aria-label="Direct link to Ecosystem" title="Direct link to Ecosystem">​</a></h3><ul><li><strong>Pulsar + Flink + Camel: How Vertice Built its CMDB-based Real-time Data Platform (Mandarin)</strong>: Wei Wang from Vertice offered his insights on how to build a CMDB-based Real-time Data platform with Pulsar, Flink, and Camel.</li><li><strong>Simplify Pulsar Functions Development with SQL (Mandarin)</strong>: Rui Fu from StreamNative discussed how SQL syntax, Pulsar Functions, and Function Mesh can work together to deliver a unique user development experience for real-time data jobs in the cloud environment.</li><li><strong>Apache Pulsar + KubeEdge: Managing Edge Devices with Low Latency and Persistent Storage (Mandarin)</strong>: Ryan Zhao from Huawei Cloud introduced a management solution for edge devices implemented through the Device Management Interface of KubeEdge and Apache Pulsar.</li><li><strong>Make Querying from Pulsar Easier: Introduce Flink Pulsar SQL Connector (English)</strong>: Yufei Zhang from StreamNative walked through the basic concepts and examples of using Pulsar SQL Connector and discussed PulsarCatalog’s two different modes of using Pulsar as a metadata store.</li><li><strong>Migrating from RabbitMQ to Apache Pulsar: Using AMQP-on-Pulsar (AoP) in E-commerce Industry (Mandarin)</strong>: Yifei Ming from Access Corporate Group talked about their experience of using the AMQP-on-Pulsar project to migrate RabbitMQ workloads to AoP.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="whats-new-in-the-pulsar-community">What’s new in the Pulsar community<a href="#whats-new-in-the-pulsar-community" class="hash-link" aria-label="Direct link to What’s new in the Pulsar community" title="Direct link to What’s new in the Pulsar community">​</a></h2><p>In addition to the keynotes and sessions, we also shared some exciting news at the Summit.</p><p>Apache Pulsar has been adopted by organizations and users across the globe since it graduated as a Top Level Project in September 2018. Recently, the project witnessed its 580th contributor, almost hitting the 600 milestone!</p><p><img loading="lazy" src="/assets/images/pulsar-github-contributor-20221114-0cf1583a496e12b7278df58efe74ed20.png" width="842" height="509" class="img_ev3q"></p><small><center>Figure 1. Pulsar GitHub repo contributors</center></small><p>So far this year, we have welcomed 16 new Apache Pulsar <a href="https://www.apache.org/foundation/how-it-works.html#committers" target="_blank" rel="noopener noreferrer">Committers</a> to the Pulsar family. They have made continuous contributions to the Pulsar community and as Pulsar Committers, they now have write access to the Pulsar repository. They are:</p><ul><li><a href="https://github.com/RobertIndie" target="_blank" rel="noopener noreferrer">@RobertIndie</a></li><li><a href="https://github.com/yuruguo" target="_blank" rel="noopener noreferrer">@yuruguo</a></li><li><a href="https://github.com/gaozhangmin" target="_blank" rel="noopener noreferrer">@gaozhangmin</a></li><li><a href="https://github.com/nodece" target="_blank" rel="noopener noreferrer">@nodece</a></li><li><a href="https://github.com/Shoothzj" target="_blank" rel="noopener noreferrer">@Shoothzj</a></li><li><a href="https://github.com/hqebupt" target="_blank" rel="noopener noreferrer">@hqebupt</a></li><li><a href="https://github.com/StevenLuMT" target="_blank" rel="noopener noreferrer">@StevenLuMT</a></li><li><a href="https://github.com/lordcheng10" target="_blank" rel="noopener noreferrer">@lordcheng10</a></li><li><a href="https://github.com/tisonkun" target="_blank" rel="noopener noreferrer">@tisonkun</a></li><li><a href="https://github.com/aloyszhang" target="_blank" rel="noopener noreferrer">@aloyszhang</a></li><li><a href="https://github.com/mattisonchao" target="_blank" rel="noopener noreferrer">@mattisonchao</a></li><li><a href="https://github.com/urfreespace" target="_blank" rel="noopener noreferrer">@urfreespace</a></li><li><a href="https://github.com/dlg99" target="_blank" rel="noopener noreferrer">@dlg99</a></li><li><a href="https://github.com/nicoloboschi" target="_blank" rel="noopener noreferrer">@nicoloboschi</a></li><li><a href="https://github.com/liudezhi2098" target="_blank" rel="noopener noreferrer">@liudezhi2098</a></li><li><a href="https://github.com/cbornet" target="_blank" rel="noopener noreferrer">@cbornet</a></li></ul><p>We also have 4 new members joining the Apache Pulsar <a href="https://www.apache.org/foundation/how-it-works.html#pmc-members" target="_blank" rel="noopener noreferrer">Project Management Committee (PMC)</a> for their merit for the evolution of the project. They are:</p><ul><li><a href="https://github.com/lhotari" target="_blank" rel="noopener noreferrer">@lhotari</a></li><li><a href="https://github.com/michaeljmarshall" target="_blank" rel="noopener noreferrer">@michaeljmarshall</a></li><li><a href="https://github.com/Technoboy-" target="_blank" rel="noopener noreferrer">@Technoboy-</a></li><li><a href="https://github.com/Jason918" target="_blank" rel="noopener noreferrer">@Jason918</a></li></ul><p>Congratulations to them all 🎉 ! And we are looking forward to more contributions from more friends in the broader open-source community.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="more-on-pulsar-summit-asia-2022">More on Pulsar Summit Asia 2022<a href="#more-on-pulsar-summit-asia-2022" class="hash-link" aria-label="Direct link to More on Pulsar Summit Asia 2022" title="Direct link to More on Pulsar Summit Asia 2022">​</a></h2><p>All the sessions in Pulsar Summit Asia 2022 were pre-recorded and they will be uploaded to this <a href="https://www.youtube.com/@streamnative7594" target="_blank" rel="noopener noreferrer">YouTube account</a> soon. You can also find the complete list of Summit sessions on this <a href="https://pulsar-summit.org/event/asia-2022/schedule" target="_blank" rel="noopener noreferrer">page</a>.</p><p>At the same time, we will be working with some of the speakers to convert their speeches into blogs and case studies, which will be published soon.</p><p>Feel free to contact us at <a href="mailto:organizers@pulsar-summit.org" target="_blank" rel="noopener noreferrer">organizers@pulsar-summit.org</a> if you have any questions and see you in the next Summit!</p>]]></content>
        <author>
            <name>Sherlock Xu</name>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Announcing Conference Schedule for Pulsar Summit Asia 2022]]></title>
        <id>https://pulsar.apache.org/blog/2022/11/04/pulsar-summit-asia-2022-schedule-announced</id>
        <link href="https://pulsar.apache.org/blog/2022/11/04/pulsar-summit-asia-2022-schedule-announced"/>
        <updated>2022-11-04T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[This August, we concluded Pulsar Summit SF, our first-ever, in-person event in North America. It witnessed over 12 breakout sessions and 5 keynotes with over 200 attendees from Apple, Blizzard, IBM, Optum, Iterable, Twitter, Uber, and many more. As we could see from the conference, there is an increase in the adoption of Pulsar and growing interest in messaging and streaming. And now, we are excited to invite you to Pulsar Summit Aisa 2022 to explore the latest messaging and streaming technologies!]]></summary>
        <content type="html"><![CDATA[<p><img loading="lazy" src="/assets/images/pulsar-summit-asia-2022-top-image-9f0c3608846eaa3c4d1ac021d09287a3.jpg" width="855" height="364" class="img_ev3q"></p><p>This August, we concluded Pulsar Summit SF, our first-ever, in-person event in North America. It witnessed over 12 breakout sessions and 5 keynotes with over 200 attendees from Apple, Blizzard, IBM, Optum, Iterable, Twitter, Uber, and many more. As we could see from the conference, there is an increase in the adoption of Pulsar and growing interest in messaging and streaming. And now, we are excited to invite you to Pulsar Summit Aisa 2022 to explore the latest messaging and streaming technologies!</p><p>Held on November 19th and 20th, this two-day virtual event will feature 36 sessions by developers, engineers, architects, and technologists from ByteDance, Huawei, Tencent, Nippon Telegraph and Telephone Corporation (NTT) Software Innovation Center, Yum China, Netease, vivo, WeChat, Nutanix, StreamNative, and many more. It will include sessions on Pulsar use cases, its ecosystem, operations, and technology deep dives.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="featured-sessions">Featured sessions<a href="#featured-sessions" class="hash-link" aria-label="Direct link to Featured sessions" title="Direct link to Featured sessions">​</a></h2><p>Let’s have a quick look at some of the featured sessions.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="handling-100k-consumers-with-one-topic-practices-and-technical-details-english">Handling 100K Consumers with One Topic: Practices and Technical Details (English)<a href="#handling-100k-consumers-with-one-topic-practices-and-technical-details-english" class="hash-link" aria-label="Direct link to Handling 100K Consumers with One Topic: Practices and Technical Details (English)" title="Direct link to Handling 100K Consumers with One Topic: Practices and Technical Details (English)">​</a></h3><p>Hongjie Zhai, Researcher, NTT Software Innovation Center</p><p>With the development of smart factories and connected vehicles, exchanging messages between a considerable number of devices is required for monitoring and controlling systems. In this connection, Apache Pulsar is one of the best solutions to keeping message pipelines simple, real-time, and safe. As the current message brokers are mainly designed for cloud services, users may face performance problems when they have too many consumers. This session will share the practices and technical details of handling 100K consumers with a single Pulsar Topic.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="awesome-pulsar-in-yum-china-english">Awesome Pulsar in Yum China (English)<a href="#awesome-pulsar-in-yum-china-english" class="hash-link" aria-label="Direct link to Awesome Pulsar in Yum China (English)" title="Direct link to Awesome Pulsar in Yum China (English)">​</a></h3><p>Chauncey Yan, Backend Engineer, Yum China</p><p>Yum China Holdings, Inc. is the largest restaurant company in China with a vision of becoming the world’s most innovative pioneer in the restaurant industry. After its technical research on next-generation message queue solutions, it ultimately selected Pulsar as the implementation standard of message middleware for its technical middle platform. To date, Pulsar has been widely applied in different scenarios within Yum China such as business middle platform and system observability. This talk will be focused on why Yum China selected Pulsar for production use and its experience of performance tuning.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="streaming-wars-and-how-apache-pulsar-is-acing-the-battle-english">Streaming Wars and How Apache Pulsar is Acing the Battle (English)<a href="#streaming-wars-and-how-apache-pulsar-is-acing-the-battle-english" class="hash-link" aria-label="Direct link to Streaming Wars and How Apache Pulsar is Acing the Battle (English)" title="Direct link to Streaming Wars and How Apache Pulsar is Acing the Battle (English)">​</a></h3><p>Shivji Kumar Jha, Staff Engineer, Nutanix</p><p>Sachidananda Maharana, MTS IV, Nutanix</p><p>This session will cover the operational challenges Nutanix has faced over the past 4 years when running Pulsar and how Pulsar fits into different use cases given its multi-tenancy and configurability. It will also talk about how Nutanix has aced these challenges to stick to Pulsar and even moved applications from other messaging solutions to Pulsar. It will end with the challenges and learnings on migrating from Kafka and Kinesis to Pulsar.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pulsar--envoy-building-an-oto-marketing-platform-for-different-business-scenarios-on-microservices-mandarin">Pulsar + Envoy: Building an OTO Marketing Platform for Different Business Scenarios on Microservices (Mandarin)<a href="#pulsar--envoy-building-an-oto-marketing-platform-for-different-business-scenarios-on-microservices-mandarin" class="hash-link" aria-label="Direct link to Pulsar + Envoy: Building an OTO Marketing Platform for Different Business Scenarios on Microservices (Mandarin)" title="Direct link to Pulsar + Envoy: Building an OTO Marketing Platform for Different Business Scenarios on Microservices (Mandarin)">​</a></h3><p>Jason Jiang, Senior Engineer, Tencent</p><p>In game marketing, the OTO (One-time Offer) model provides an effective way to improve user experience. A very common OTO scenario is to recommend certain material when the player has met the required conditions. To offer such a capability with low cost and high efficiency, you can use a customized Envoy plugin to support the Pulsar protocol. With Envoy’s flexible routing configurations and various functional plugins, you can provide solutions to different OTO business scenarios with microservices. In this session, Jason Jiang from Tencent will share their experience of using Pulsar and Envoy to create an OTO marketing platform built on microservices for different business scenarios.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="apache-pulsar-in-volcano-engine-e-mapreduce-mandarin">Apache Pulsar in Volcano Engine E-MapReduce (Mandarin)<a href="#apache-pulsar-in-volcano-engine-e-mapreduce-mandarin" class="hash-link" aria-label="Direct link to Apache Pulsar in Volcano Engine E-MapReduce (Mandarin)" title="Direct link to Apache Pulsar in Volcano Engine E-MapReduce (Mandarin)">​</a></h3><p>Xin Liang, Senior Engineer, ByteDance</p><p>This session will introduce Volcano Engine E-MapReduce, a stateless, open-source big data platform, as well as the motivation for integrating Pulsar as a new cluster type into the Volcano Engine E-MapReduce ecosystem. It will cover some use cases of Pulsar in Volcano E-MapReduce, especially in real-time data warehouse and stream processing. It will also discuss typical real-time scenarios and common problems, and provide possible solutions powered by Pulsar with related services in Volcano Engine E-MapReduce.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="a-new-way-of-managing-pulsar-with-infrastructure-as-code-mandarin">A New Way of Managing Pulsar with Infrastructure as Code (Mandarin)<a href="#a-new-way-of-managing-pulsar-with-infrastructure-as-code-mandarin" class="hash-link" aria-label="Direct link to A New Way of Managing Pulsar with Infrastructure as Code (Mandarin)" title="Direct link to A New Way of Managing Pulsar with Infrastructure as Code (Mandarin)">​</a></h3><p>Max Xu, Software Engineer, StreamNative</p><p>Fushu Wang, Cloud Engineer, StreamNative</p><p>Infrastructure as Code (IaC) is the process of managing and provisioning infrastructure resources through code instead of manual configurations. IaC offers the benefits of understandable code, idempotence, and consistency over traditional manual configurations. StreamNative developed the Terraform Provider for Pulsar and the Pulsar Resources Operator, which utilize Terraform and Kubernetes CRDs respectively to provide declarative management of Pulsar resources, such as tenants, namespaces, and topics. In this talk, two engineers from StreamNative will discuss how to leverage these two IaC tools to help you better manage Pulsar.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="stability-optimization-of-apache-pulsar-at-huawei-mobile-services-mandarin">Stability Optimization of Apache Pulsar at Huawei Mobile Services (Mandarin)<a href="#stability-optimization-of-apache-pulsar-at-huawei-mobile-services-mandarin" class="hash-link" aria-label="Direct link to Stability Optimization of Apache Pulsar at Huawei Mobile Services (Mandarin)" title="Direct link to Stability Optimization of Apache Pulsar at Huawei Mobile Services (Mandarin)">​</a></h3><p>Lin Lin, Apache Pulsar PMC Member, SDE Expert, Huawei</p><p>HUAWEI Mobile Services is dedicated to enriching users’ lives with next-level content and services that meet every conceivable need and span diverse fields, including smart home, health and fitness, mobile office, apps, smart travel, and entertainment. Currently, HUAWEI Health, AppGallery, HUAWEI Video, and HUAWEI Mobile Cloud are all running on top of HUAWEI Mobile Services. In this session, Lin from Huawei will share their practices of using Apache Pulsar in complex business scenarios at Huawei Mobile Services and propose some of their enhancements for better stability.</p><p>To learn more about how companies and organizations today leverage Apache Pulsar for streaming and messaging, especially for mission-critical deployments in production, see the <a href="https://pulsar-summit.org/event/asia-2022/schedule" target="_blank" rel="noopener noreferrer">complete list of sessions</a> in Pulsar Summit Asia 2022.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-participate">How to participate<a href="#how-to-participate" class="hash-link" aria-label="Direct link to How to participate" title="Direct link to How to participate">​</a></h2><p>Pulsar Summit Asia 2022 is a virtual conference gathering speakers and audiences from different regions. As such, we arranged the conference schedule with time zones, regions, and languages all taken into consideration to provide the best possible experience.</p><p>All sessions on Day 1 will be presented in Mandarin, and all talks on Day 2 will be in English. For the Chinese audience, you can register on <a href="https://www.huodongxing.com/event/8674136399923" target="_blank" rel="noopener noreferrer">Huodongxing.com</a> with your WeChat account. For non-Chinese or English audiences, you can register on this <a href="https://streamnative.zoom.us/webinar/register/8616668631199/WN_qKibcbEFTxKv6-MszyFeAg" target="_blank" rel="noopener noreferrer">page</a> to watch the English sessions with Zoom.</p><p>Register now for free! Contact us at <a href="mailto:organizers@pulsar-summit.org" target="_blank" rel="noopener noreferrer">organizers@pulsar-summit.org</a> if you have any questions.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="about-the-organizer">About the organizer<a href="#about-the-organizer" class="hash-link" aria-label="Direct link to About the organizer" title="Direct link to About the organizer">​</a></h2><p>StreamNative is the organizer of Pulsar Summit Asia 2022. Founded by the original developers of Apache Pulsar and Apache BookKeeper, StreamNative builds a cloud-native event streaming platform that enables enterprises to easily access data as real-time event streams. As the core developers of Pulsar, the StreamNative team is deeply versed in the technology, the community, and the use cases. Today, StreamNative is focusing on growing the Apache Pulsar and BookKeeper communities and bringing its deep experience across diverse Pulsar use cases to companies across the globe.</p>]]></content>
        <author>
            <name>Sherlock Xu</name>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[What’s New in Apache Pulsar 2.7.5]]></title>
        <id>https://pulsar.apache.org/blog/2022/09/09/Apache-Pulsar-2-7-5</id>
        <link href="https://pulsar.apache.org/blog/2022/09/09/Apache-Pulsar-2-7-5"/>
        <updated>2022-09-09T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[The Apache Pulsar community releases version 2.7.5! 23 contributors provided improvements and bug fixes that delivered 89 commits. Thanks for all your contributions.]]></summary>
        <content type="html"><![CDATA[<p>The Apache Pulsar community releases version 2.7.5! 23 contributors provided improvements and bug fixes that delivered 89 commits. Thanks for all your contributions.</p><p>The highlight of the 2.7.5 release is that it fixes some critical bugs on broker, proxy, and storage, including message/data loss, broker deadlock, and connection leak. Note that 2.7.5 is the last release of 2.7.x.</p><p>This blog walks through the most noteworthy changes. For the complete list, including all feature enhancements and bug fixes, check out the <a href="https://pulsar.apache.org/release-notes/versioned/pulsar-2.7.5/" target="_blank" rel="noopener noreferrer">Pulsar 2.7.5 Release Notes</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fixed-the-deadlock-on-metadata-cache-missing-while-checking-replications-pr-16889">Fixed the deadlock on metadata cache missing while checking replications. <a href="https://github.com/apache/pulsar/pull/16889" target="_blank" rel="noopener noreferrer">PR-16889</a><a href="#fixed-the-deadlock-on-metadata-cache-missing-while-checking-replications-pr-16889" class="hash-link" aria-label="Direct link to fixed-the-deadlock-on-metadata-cache-missing-while-checking-replications-pr-16889" title="Direct link to fixed-the-deadlock-on-metadata-cache-missing-while-checking-replications-pr-16889">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="issue">Issue<a href="#issue" class="hash-link" aria-label="Direct link to Issue" title="Direct link to Issue">​</a></h4><p>After the changes in <a href="https://github.com/apache/pulsar/pull/12340" target="_blank" rel="noopener noreferrer">#12340</a>, there are still a couple of places making blocking calls. These calls occupy all the ordered scheduler threads preventing the callbacks from completing until the 30 seconds timeout expires.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="resolution">Resolution<a href="#resolution" class="hash-link" aria-label="Direct link to Resolution" title="Direct link to Resolution">​</a></h4><p>Change the blocking calls to async mode on the metadata callback thread.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fixed-the-deadlock-when-using-the-key_shared-mode-pr-11965">Fixed the deadlock when using the key_shared mode. <a href="https://github.com/apache/pulsar/pull/11965" target="_blank" rel="noopener noreferrer">PR-11965</a><a href="#fixed-the-deadlock-when-using-the-key_shared-mode-pr-11965" class="hash-link" aria-label="Direct link to fixed-the-deadlock-when-using-the-key_shared-mode-pr-11965" title="Direct link to fixed-the-deadlock-when-using-the-key_shared-mode-pr-11965">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="issue-1">Issue<a href="#issue-1" class="hash-link" aria-label="Direct link to Issue" title="Direct link to Issue">​</a></h4><p>When the key_shared mode is used in consumers, deadlock may happen in the broker due to some race conditions and result in a lot of <code>CLOSE_WAIT</code> status connections.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="resolution-1">Resolution<a href="#resolution-1" class="hash-link" aria-label="Direct link to Resolution" title="Direct link to Resolution">​</a></h4><p>Change unlock before the callback in the <code>asyncDelete</code> function of <code>ManagedCursorImpl</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fixed-the-message-loss-issue-due-to-ledger-rollover-pr-14703">Fixed the message loss issue due to ledger rollover. <a href="https://github.com/apache/pulsar/pull/14703" target="_blank" rel="noopener noreferrer">PR-14703</a><a href="#fixed-the-message-loss-issue-due-to-ledger-rollover-pr-14703" class="hash-link" aria-label="Direct link to fixed-the-message-loss-issue-due-to-ledger-rollover-pr-14703" title="Direct link to fixed-the-message-loss-issue-due-to-ledger-rollover-pr-14703">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="issue-2">Issue<a href="#issue-2" class="hash-link" aria-label="Direct link to Issue" title="Direct link to Issue">​</a></h4><p>If users config <code>managedLedgerMaxLedgerRolloverTimeMinutes &gt; 0</code>, and the rollover happens when the ManagedLedger state is <code>CreatingLedger</code>, the messages written during that time are lost.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="resolution-2">Resolution<a href="#resolution-2" class="hash-link" aria-label="Direct link to Resolution" title="Direct link to Resolution">​</a></h4><p>Rollover only when the ledger state is <code>LedgerOpened</code>. </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fixed-the-port-exhaustion-and-connection-issues-in-pulsar-proxy-pr-14078">Fixed the port exhaustion and connection issues in Pulsar Proxy. <a href="https://github.com/apache/pulsar/pull/14078" target="_blank" rel="noopener noreferrer">PR-14078</a><a href="#fixed-the-port-exhaustion-and-connection-issues-in-pulsar-proxy-pr-14078" class="hash-link" aria-label="Direct link to fixed-the-port-exhaustion-and-connection-issues-in-pulsar-proxy-pr-14078" title="Direct link to fixed-the-port-exhaustion-and-connection-issues-in-pulsar-proxy-pr-14078">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="issue-3">Issue<a href="#issue-3" class="hash-link" aria-label="Direct link to Issue" title="Direct link to Issue">​</a></h4><p>Pulsar Proxy can get into a state where it stops proxying Broker connections while Admin API proxying keeps working.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="resolution-3">Resolution<a href="#resolution-3" class="hash-link" aria-label="Direct link to Resolution" title="Direct link to Resolution">​</a></h4><p>Optimize the proxy connection to fail-fast when the target broker isn't active.
Fix the race conditions in Pulsar Proxy when establishing a connection, leading to invalid states and hanging connections.
Add connection timeout handling to proxy connections.
Add read timeout handling to incoming connections and proxied connections.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fixed-the-compaction-data-loss-due-to-missed-compaction-properties-during-cursor-reset-pr-16404">Fixed the compaction data loss due to missed compaction properties during cursor reset. <a href="https://github.com/apache/pulsar/pull/16404" target="_blank" rel="noopener noreferrer">PR-16404</a><a href="#fixed-the-compaction-data-loss-due-to-missed-compaction-properties-during-cursor-reset-pr-16404" class="hash-link" aria-label="Direct link to fixed-the-compaction-data-loss-due-to-missed-compaction-properties-during-cursor-reset-pr-16404" title="Direct link to fixed-the-compaction-data-loss-due-to-missed-compaction-properties-during-cursor-reset-pr-16404">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="issue-4">Issue<a href="#issue-4" class="hash-link" aria-label="Direct link to Issue" title="Direct link to Issue">​</a></h4><p>The compaction reader seeks the earliest position to read data from the topic, but the compaction properties are missed during cursor reset, which leads to the initialized compaction subscribe without a compaction horizon, so the compaction reader skips the last compacted data. It only happens when initializing the compaction subscription and can be introduced by the load balance or topic unloading manually.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="resolution-4">Resolution<a href="#resolution-4" class="hash-link" aria-label="Direct link to Resolution" title="Direct link to Resolution">​</a></h4><p>Keep the properties for resetting the cursor while the cursor is for data compaction.
Copy the properties to the new mark delete entry while advancing the cursor, which is triggered by the managed ledger internal. It's not only for the compacted topic, and the internal task should not lose the properties when trimming the cursor.</p><h1>What’s Next?</h1><p>If you are interested in learning more about Pulsar 2.7.5, you can <a href="https://pulsar.apache.org/en/versions/" target="_blank" rel="noopener noreferrer">download</a> and try it out now! </p><p>For more information about the Apache Pulsar project and current progress, visit the <a href="https://pulsar.apache.org" target="_blank" rel="noopener noreferrer">Pulsar website</a>, follow the project on Twitter <a href="https://twitter.com/apache_pulsar" target="_blank" rel="noopener noreferrer">@apache_pulsar</a>, and join <a href="https://apache-pulsar.herokuapp.com/" target="_blank" rel="noopener noreferrer">Pulsar Slack</a>!</p>]]></content>
        <author>
            <name>Jason918, momo-jun</name>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Pulsar Summit Asia 2022: CFP Is Open Now!]]></title>
        <id>https://pulsar.apache.org/blog/2022/08/22/pulsar-summit-asia-2022-cfp</id>
        <link href="https://pulsar.apache.org/blog/2022/08/22/pulsar-summit-asia-2022-cfp"/>
        <updated>2022-08-22T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Pulsar Summit is the conference dedicated to Apache Pulsar, and the messaging and event streaming community. The conference gathers an international audience of developers, data architects, data scientists, Apache Pulsar committers and contributors, as well as the messaging and streaming community. Together, they share experiences, exchange ideas and knowledge, and receive hands-on training sessions led by Pulsar experts.]]></summary>
        <content type="html"><![CDATA[<p>Pulsar Summit is the conference dedicated to Apache Pulsar, and the messaging and event streaming community. The conference gathers an international audience of developers, data architects, data scientists, Apache Pulsar committers and contributors, as well as the messaging and streaming community. Together, they share experiences, exchange ideas and knowledge, and receive hands-on training sessions led by Pulsar experts.</p><p>In January this year, Pulsar Summit Asia 2021 (delayed due to the COVID-19 pandemic) featured more than 25 interactive sessions by technologists, developers, software engineers, and software architects from StreamNative, BIGO, China Mobile, Nutanix, Tencent, and more. The conference drew over 1000 attendees around the world, including attendees from top technology, internet, and media companies, such as Tencent, TikTok, Alibaba, and Microsoft.</p><p>Pulsar Summit Asia 2022 will be hosted virtually on November 19th and 20th, 2022. It is expected to cover the pivotal topics and technologies at the core of Apache Pulsar.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="join-us-and-speak-at-pulsar-summit-asia-2022">Join us and speak at Pulsar Summit Asia 2022<a href="#join-us-and-speak-at-pulsar-summit-asia-2022" class="hash-link" aria-label="Direct link to Join us and speak at Pulsar Summit Asia 2022" title="Direct link to Join us and speak at Pulsar Summit Asia 2022">​</a></h2><p>Share your Pulsar story and speak at the summit! It is a great opportunity to participate and raise your profile in the rapidly growing Apache Pulsar community. We are looking for Pulsar stories that are innovative, informative, or thought-provoking. Here are some suggestions:</p><ul><li>Use cases, operations, tools, techniques, or the Pulsar ecosystem</li><li>A deep dive into technologies</li><li>Best practices and lessons learned</li><li>A Pulsar success story or case study</li><li>Anything else related to Pulsar that inspires the audience</li></ul><p>To speak at the summit, <a href="https://sessionize.com/pulsar-summit-asia-2022/" target="_blank" rel="noopener noreferrer">submit an abstract</a> about your session. All levels of talks (beginner, intermediate, and advanced) are welcome. Remember to keep your proposal short, relevant, and engaging. The following session formats are acceptable:</p><ul><li><strong>Presentation</strong>: 40-minute presentation, maximum of 2 speakers</li><li><strong>Panel</strong>: 40-minute of discussion amongst 3 to 5 speakers</li><li><strong>Workshop</strong>: 60-90 minutes, in-depth, hands-on tutorials, maximum of 2 speakers</li><li><strong>Lightning talk</strong>: 10-minute presentation, maximum of 2 speakers</li></ul><p>You need to pre-record your session after the proposal is approved. For time zone and network reasons, we do not recommend speakers present their talk live.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="dates-to-remember">Dates to remember<a href="#dates-to-remember" class="hash-link" aria-label="Direct link to Dates to remember" title="Direct link to Dates to remember">​</a></h2><ul><li><strong>CFP opens</strong>: August 22nd, 2022</li><li><strong>CFP closes</strong>: October 9th, 2022</li><li><strong>CFP notifications</strong>: October 19th, 2022</li><li><strong>Schedule announcement</strong>: November 4th, 2022</li><li><strong>Event dates</strong>: November 19th, 2022 - November 20th, 2022</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="sponsor-pulsar-summit">Sponsor Pulsar Summit<a href="#sponsor-pulsar-summit" class="hash-link" aria-label="Direct link to Sponsor Pulsar Summit" title="Direct link to Sponsor Pulsar Summit">​</a></h2><p>Pulsar Summit is a conference for the community and your support is needed. Sponsoring this event provides a great opportunity for your organization to further engage with the Apache Pulsar community. For more information on becoming a sponsor, contact us at <a href="mailto:organizers@pulsar-summit.org" target="_blank" rel="noopener noreferrer">organizers@pulsar-summit.org</a>.</p><p>Help us make #PulsarSummit Asia 2022 a big success by spreading the word and submitting your proposal! Follow us on Twitter (<a href="https://twitter.com/PulsarSummit" target="_blank" rel="noopener noreferrer">@pulsarsummit</a>) to receive the latest updates on the summit!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="about-apache-pulsar">About Apache Pulsar<a href="#about-apache-pulsar" class="hash-link" aria-label="Direct link to About Apache Pulsar" title="Direct link to About Apache Pulsar">​</a></h2><p>Apache Pulsar is a cloud-native, distributed messaging and streaming platform that empowers companies around the world to manage trillions of events per day. The Pulsar community has witnessed rapid growth since it became a top-level Apache Software Foundation project in 2018. Over the past four years, the vibrant community keeps driving innovation and improvements to the project.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="about-the-organizer">About the organizer<a href="#about-the-organizer" class="hash-link" aria-label="Direct link to About the organizer" title="Direct link to About the organizer">​</a></h2><p>StreamNative is the organizer of Pulsar Summit Asia 2022. Founded by the original developers of Apache Pulsar and Apache BookKeeper, StreamNative builds a cloud-native event streaming platform that enables enterprises to easily access data as real-time event streams. As the core developers of Pulsar, the StreamNative team is deeply versed in the technology, the community, and the use cases. Today, StreamNative is focusing on growing the Apache Pulsar and BookKeeper communities and bringing its deep experience across diverse Pulsar use cases to companies across the globe.</p>]]></content>
        <author>
            <name>Sherlock Xu</name>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[What’s New in Apache Pulsar 2.9.3]]></title>
        <id>https://pulsar.apache.org/blog/2022/07/27/Apache-Pulsar-2-9-3</id>
        <link href="https://pulsar.apache.org/blog/2022/07/27/Apache-Pulsar-2-9-3"/>
        <updated>2022-07-27T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[The Apache Pulsar community releases version 2.9.3! 50 contributors provided improvements and bug fixes that delivered 200+ commits. Thanks for all your contributions.]]></summary>
        <content type="html"><![CDATA[<p>The Apache Pulsar community releases version 2.9.3! 50 contributors provided improvements and bug fixes that delivered 200+ commits. Thanks for all your contributions.</p><p>The highlight of the 2.9.3 release is introducing 30+ transaction fixes and improvements. Earlier-adoption users of Pulsar transactions have documented long-term use in their production environments and reported valuable findings in real applications. This provides the Pulsar community with the opportunity to make a difference. </p><p>This blog walks through the most noteworthy changes. For the complete list including all feature enhancements and bug fixes, check out the <a href="https://pulsar.apache.org/release-notes/versioned/pulsar-2.9.3/" target="_blank" rel="noopener noreferrer">Pulsar 2.9.3 Release Notes</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="enabled-cursor-data-compression-to-reduce-persistent-cursor-data-size-14542">Enabled cursor data compression to reduce persistent cursor data size. <a href="https://github.com/apache/pulsar/pull/14542" target="_blank" rel="noopener noreferrer">14542</a><a href="#enabled-cursor-data-compression-to-reduce-persistent-cursor-data-size-14542" class="hash-link" aria-label="Direct link to enabled-cursor-data-compression-to-reduce-persistent-cursor-data-size-14542" title="Direct link to enabled-cursor-data-compression-to-reduce-persistent-cursor-data-size-14542">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="issue">Issue<a href="#issue" class="hash-link" aria-label="Direct link to Issue" title="Direct link to Issue">​</a></h4><p>The cursor data is managed by the ZooKeeper/Etcd metadata store. When the data size increases, it may take too much time to pull the data, and brokers may end up writing large chunks of data to the ZooKeeper/Etcd metadata store.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="resolution">Resolution<a href="#resolution" class="hash-link" aria-label="Direct link to Resolution" title="Direct link to Resolution">​</a></h4><p>Provide the ability to enable compression mechanisms to reduce cursor data size and the pulling time.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="reduced-the-memory-occupied-by-metadatapositions-and-avoid-oom-15137">Reduced the memory occupied by <code>metadataPositions</code> and avoid OOM. <a href="https://github.com/apache/pulsar/pull/15137" target="_blank" rel="noopener noreferrer">15137</a><a href="#reduced-the-memory-occupied-by-metadatapositions-and-avoid-oom-15137" class="hash-link" aria-label="Direct link to reduced-the-memory-occupied-by-metadatapositions-and-avoid-oom-15137" title="Direct link to reduced-the-memory-occupied-by-metadatapositions-and-avoid-oom-15137">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="issue-1">Issue<a href="#issue-1" class="hash-link" aria-label="Direct link to Issue" title="Direct link to Issue">​</a></h4><p>The map <code>metadataPositions</code> in MLPendingAckStore is used to clear useless data in PendingAck, where the key is the position that is persistent in PendingAck and the value is the max position acked by an operation. It judges whether the max subscription cursor position is smaller than the subscription cursor’s <code>markDeletePosition</code>. If the max position is smaller, then the log cursor will mark to delete the position. It causes two main issues:</p><ul><li>In normal cases, this map stores all transaction ack operations. This is a waste of memory and CPU.</li><li>If a transaction that has not been committed for a long time acks a message in a later position, the map will not be cleaned up, which finally leads to OOM (out-of-memory).</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="resolution-1">Resolution<a href="#resolution-1" class="hash-link" aria-label="Direct link to Resolution" title="Direct link to Resolution">​</a></h4><p>Regularly store a small amount of data according to certain rules. For more detailed implementation, refer to <a href="https://github.com/apache/pulsar/issues/15073" target="_blank" rel="noopener noreferrer">PIP-153</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="checked-lowwatermark-before-appending-transaction-entries-to-transaction-buffer-15424">Checked <code>lowWaterMark</code> before appending transaction entries to Transaction Buffer. <a href="https://github.com/apache/pulsar/pull/15424" target="_blank" rel="noopener noreferrer">15424</a><a href="#checked-lowwatermark-before-appending-transaction-entries-to-transaction-buffer-15424" class="hash-link" aria-label="Direct link to checked-lowwatermark-before-appending-transaction-entries-to-transaction-buffer-15424" title="Direct link to checked-lowwatermark-before-appending-transaction-entries-to-transaction-buffer-15424">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="issue-2">Issue<a href="#issue-2" class="hash-link" aria-label="Direct link to Issue" title="Direct link to Issue">​</a></h4><p>When a client sends messages using a previously committed transaction, these messages are visible to consumers unexpectedly.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="resolution-2">Resolution<a href="#resolution-2" class="hash-link" aria-label="Direct link to Resolution" title="Direct link to Resolution">​</a></h4><p>Add a map to store the <code>lowWaterMark</code> of Transaction Coordinator in Trasanction Buffer, and check <code>lowWaterMark</code> before appending transaction entries to Trasanction Buffer. So when sending messages using an invalid transaction, clients will receive <code>NotAllowedException</code>. </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fixed-the-consumption-performance-regression-pr-15162">Fixed the consumption performance regression. <a href="https://github.com/apache/pulsar/pull/15162" target="_blank" rel="noopener noreferrer">PR-15162</a><a href="#fixed-the-consumption-performance-regression-pr-15162" class="hash-link" aria-label="Direct link to fixed-the-consumption-performance-regression-pr-15162" title="Direct link to fixed-the-consumption-performance-regression-pr-15162">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="issue-3">Issue<a href="#issue-3" class="hash-link" aria-label="Direct link to Issue" title="Direct link to Issue">​</a></h4><p>This performance regression was introduced in 2.10.0, 2.9.1, and 2.8.3. You may find a significant performance drop with message listeners while using Java Client. The root cause is each message will introduce the thread switching from the external thread pool to the internal thread poll and then to the external thread pool.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="resolution-3">Resolution<a href="#resolution-3" class="hash-link" aria-label="Direct link to Resolution" title="Direct link to Resolution">​</a></h4><p>Avoid the thread switching for each message to improve consumption throughput.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fixed-a-deadlock-issue-of-topic-creation-pr-15570">Fixed a deadlock issue of topic creation. <a href="https://github.com/apache/pulsar/pull/15570" target="_blank" rel="noopener noreferrer">PR-15570</a><a href="#fixed-a-deadlock-issue-of-topic-creation-pr-15570" class="hash-link" aria-label="Direct link to fixed-a-deadlock-issue-of-topic-creation-pr-15570" title="Direct link to fixed-a-deadlock-issue-of-topic-creation-pr-15570">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="issue-4">Issue<a href="#issue-4" class="hash-link" aria-label="Direct link to Issue" title="Direct link to Issue">​</a></h4><p>This deadlock issue occurred during topic creation by trying to re-acquire the same <code>StampedLock</code> from the same thread when removing it. This will cause the topic to stop service for a long time, and ultimately with a failure in the deduplication or geo-replication check. The workaround is restarting the broker.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="optimized-the-memory-usage-of-brokers">Optimized the memory usage of brokers.<a href="#optimized-the-memory-usage-of-brokers" class="hash-link" aria-label="Direct link to Optimized the memory usage of brokers." title="Direct link to Optimized the memory usage of brokers.">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="issue-5">Issue<a href="#issue-5" class="hash-link" aria-label="Direct link to Issue" title="Direct link to Issue">​</a></h4><p>Pulsar has some internal data structures, such as <code>ConcurrentLongLongPairHashMap</code>, and <code>ConcurrentLongPairHashMap</code>, which can reduce the memory usage rather than using the Boxing type. However, in earlier versions, the data structures were not supported for shrinking even if the data was removed, which wasted a certain amount of memory in certain situations.</p><p><strong>Pull requests</strong></p><ul><li><a href="https://github.com/apache/pulsar/pull/15354" target="_blank" rel="noopener noreferrer">https://github.com/apache/pulsar/pull/15354</a></li><li><a href="https://github.com/apache/pulsar/pull/15342" target="_blank" rel="noopener noreferrer">https://github.com/apache/pulsar/pull/15342</a></li><li><a href="https://github.com/apache/pulsar/pull/14663" target="_blank" rel="noopener noreferrer">https://github.com/apache/pulsar/pull/14663</a></li><li><a href="https://github.com/apache/pulsar/pull/14515" target="_blank" rel="noopener noreferrer">https://github.com/apache/pulsar/pull/14515</a></li><li><a href="https://github.com/apache/pulsar/pull/14497" target="_blank" rel="noopener noreferrer">https://github.com/apache/pulsar/pull/14497</a></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="resolution-4">Resolution<a href="#resolution-4" class="hash-link" aria-label="Direct link to Resolution" title="Direct link to Resolution">​</a></h4><p>Support the shrinking of the internal data structures, such as <code>ConcurrentSortedLongPairSet</code>, <code>ConcurrentOpenHashMap</code>, and so on.</p><h1>What’s Next?</h1><p>If you are interested in learning more about Pulsar 2.9.3, you can <a href="https://pulsar.apache.org/versions/" target="_blank" rel="noopener noreferrer">download</a> and try it out now! </p><p><strong>Pulsar Summit San Francisco 2022</strong> will take place on August 18th, 2022. <a href="https://pulsar-summit.org/" target="_blank" rel="noopener noreferrer">Register now</a> and help us make it an even bigger success by spreading the word on social media!</p><p>For more information about the Apache Pulsar project and current progress, visit
the <a href="https://pulsar.apache.org" target="_blank" rel="noopener noreferrer">Pulsar website</a>, follow the project on Twitter
<a href="https://twitter.com/apache_pulsar" target="_blank" rel="noopener noreferrer">@apache_pulsar</a>, and join <a href="https://apache-pulsar.herokuapp.com/" target="_blank" rel="noopener noreferrer">Pulsar Slack</a>!</p>]]></content>
        <author>
            <name>mattisonchao, momo-jun</name>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Apache Pulsar Sessions in ApacheCon Asia 2022: Join Us Now and Check the Schedule]]></title>
        <id>https://pulsar.apache.org/blog/2022/07/26/pulsar-sessions-in-apachecon-aisa-2022</id>
        <link href="https://pulsar.apache.org/blog/2022/07/26/pulsar-sessions-in-apachecon-aisa-2022"/>
        <updated>2022-07-26T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[We are excited to invite you to ApacheCon Asia 2022 to explore the newest tools and tips, and connect with subject-matter experts in various Apache Pulsar-related sessions. The Apache Software Foundation will be holding ApacheCon Asia 2022 online between July 29th and July 31st, 2022. Register now for free to join us for this inspiring three-day event of cutting-edge technologies.]]></summary>
        <content type="html"><![CDATA[<p>We are excited to invite you to <a href="https://apachecon.com/acasia2022/index.html" target="_blank" rel="noopener noreferrer">ApacheCon Asia 2022</a> to explore the newest tools and tips, and connect with subject-matter experts in various Apache Pulsar-related sessions. The Apache Software Foundation will be holding ApacheCon Asia 2022 online between July 29th and July 31st, 2022. <a href="https://apachecon.com/acasia2022/register.html" target="_blank" rel="noopener noreferrer">Register now for free</a> to join us for this inspiring three-day event of cutting-edge technologies.</p><p>The conference gathers adopters, developers, engineers, and technologists from some of the most influential open source communities in the world. To date, there has been a total of over 200 proposals submitted by presenters from Intel, Huawei, Tencent Cloud, StreamNative, Sina Weibo, vivo, and many more. Nearly 50 of these sessions are related to streaming and messaging, 30 of which are focused on Apache Pulsar-based technologies.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="featured-sessions">Featured sessions<a href="#featured-sessions" class="hash-link" aria-label="Direct link to Featured sessions" title="Direct link to Featured sessions">​</a></h2><p>Let’s have a quick look at some of the featured sessions in messaging and streaming, ranging from technical deep dives, best practices, to tutorials, and insights.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="flipn-awesome-streaming-with-open-source-english">FLiPN Awesome Streaming with Open Source (English)<a href="#flipn-awesome-streaming-with-open-source-english" class="hash-link" aria-label="Direct link to FLiPN Awesome Streaming with Open Source (English)" title="Direct link to FLiPN Awesome Streaming with Open Source (English)">​</a></h3><p>Timothy Spann, Developer Advocate, StreamNative</p><p>In this talk, Tim will walk through how to build different types of streaming applications by using Apache NiFi, Apache Flink, Apache Spark, and Apache Pulsar together. The session will demonstrate how to ingest various data and REST feeds to enrich data and send them to Apache Pulsar. Applications will be built on top of the live streaming data with Web socket dashboards, Apache Spark SQL ETL, and Apache Flink continuous SQL.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="introducing-tableview-pulsars-database-table-abstraction-english">Introducing TableView: Pulsar's Database Table Abstraction (English)<a href="#introducing-tableview-pulsars-database-table-abstraction-english" class="hash-link" aria-label="Direct link to Introducing TableView: Pulsar's Database Table Abstraction (English)" title="Direct link to Introducing TableView: Pulsar's Database Table Abstraction (English)">​</a></h3><p>David Kjerrumgaard, Apache Pulsar Committer, Developer Advocate, StreamNative</p><p>In many use cases, applications are using Pulsar consumers or readers to fetch all the updates from a topic and construct a map with the latest value of each key for the messages that were received. The new TableView consumer offers support for this access pattern directly in the Pulsar client API itself and encapsulates the complexities of manually constructing such local caches manually. This talk will demonstrate how to use the new TableView consumer using a simple application and discuss best practices and patterns for using the TableView consumer.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="route-to-the-next-generation-message-middleware-how-vivo-migrated-to-pulsar-mandarin">Route to the Next-Generation Message Middleware: How vivo Migrated to Pulsar (Mandarin)<a href="#route-to-the-next-generation-message-middleware-how-vivo-migrated-to-pulsar-mandarin" class="hash-link" aria-label="Direct link to Route to the Next-Generation Message Middleware: How vivo Migrated to Pulsar (Mandarin)" title="Direct link to Route to the Next-Generation Message Middleware: How vivo Migrated to Pulsar (Mandarin)">​</a></h3><p>Limin Quan, Jianbo Chen, Big Data Engineer, vivo</p><p>vivo has used Kafka to support its business with over 1000 billion messages per day. Now, it has migrated to Apache Pulsar as its next-generation message middleware to handle an even larger amount of data. In this talk, Quan and Chen will share the reasons behind vivo’s choice of Apache Pulsar and how vivo has worked to put Pulsar into practice (for example, migrating plans and troubleshooting tips).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="practice-and-optimization-apache-pulsar-in-tencent-cloud-mandarin">Practice and Optimization: Apache Pulsar in Tencent Cloud (Mandarin)<a href="#practice-and-optimization-apache-pulsar-in-tencent-cloud-mandarin" class="hash-link" aria-label="Direct link to Practice and Optimization: Apache Pulsar in Tencent Cloud (Mandarin)" title="Direct link to Practice and Optimization: Apache Pulsar in Tencent Cloud (Mandarin)">​</a></h3><p>Xiaolong Ran, Apache Pulsar Committer, Senior R&amp;D Engineer, Tencent Cloud</p><p>As Apache Pulsar has been put into production at scale in Tencent Cloud, it is widely used in different scenarios supporting companies and organizations across industries. To bring the experience to another level, Tencent has worked out a series of strategies in terms of optimization and stability. In this talk, Ran will focus on Tencent Cloud's work on performance optimization and shed light upon some of the best practices and troubleshooting tips for using Apache Pulsar.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="apache-pulsar-as-lakehouse-introducing-the-lakehouse-tiered-storage-integration-for-apache-pulsar-mandarin">Apache Pulsar as Lakehouse: Introducing the Lakehouse Tiered Storage Integration for Apache Pulsar (Mandarin)<a href="#apache-pulsar-as-lakehouse-introducing-the-lakehouse-tiered-storage-integration-for-apache-pulsar-mandarin" class="hash-link" aria-label="Direct link to Apache Pulsar as Lakehouse: Introducing the Lakehouse Tiered Storage Integration for Apache Pulsar (Mandarin)" title="Direct link to Apache Pulsar as Lakehouse: Introducing the Lakehouse Tiered Storage Integration for Apache Pulsar (Mandarin)">​</a></h3><p>Hang Chen, Apache Pulsar PMC member, Software Engineer, StreamNative</p><p>Currently, tiered storage is introduced to offload cold data, while they are managed by Apache Pulsar in a non-open format. Therefore, it is very difficult to integrate the data into other big data components, such as Flink SQL and Spark SQL. In this talk, Chen will explain how to use Lakehouse to manage offloaded data and integrate it with the cold data offloading mechanism.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="build-high-performance-apache-pulsar-with-intel-optane-persistent-memory-mandarin">Build High-Performance Apache Pulsar with Intel Optane Persistent Memory (Mandarin)<a href="#build-high-performance-apache-pulsar-with-intel-optane-persistent-memory-mandarin" class="hash-link" aria-label="Direct link to Build High-Performance Apache Pulsar with Intel Optane Persistent Memory (Mandarin)" title="Direct link to Build High-Performance Apache Pulsar with Intel Optane Persistent Memory (Mandarin)">​</a></h3><p>Fenghua Hu, Cloud Software Architect, Intel</p><p>Intel Optane persistent memory (PMem) is a revolutionary memory product, which features high performance, large capacity, storage persistence, and more. In this talk, Hu will demonstrate how to use Intel Optane PMem to bring Apache Pulsar’s ability of high throughput and low latency to another level and effectively cope with performance-demanding scenarios.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-evolution-of-apache-pulsar-as-a-message-queue-in-huawei-device-mandarin">The Evolution of Apache Pulsar as A Message Queue in Huawei Device (Mandarin)<a href="#the-evolution-of-apache-pulsar-as-a-message-queue-in-huawei-device-mandarin" class="hash-link" aria-label="Direct link to The Evolution of Apache Pulsar as A Message Queue in Huawei Device (Mandarin)" title="Direct link to The Evolution of Apache Pulsar as A Message Queue in Huawei Device (Mandarin)">​</a></h3><p>Lin Lin, Apache Pulsar PMC member, SDE Expert, Huawei Device</p><p>Xiaotong Wang, Senior Engineer, Huawei Device</p><p>In the cloud-native era, Huawei Device is faced with many challenges in message queue infrastructure, such as maintenance difficulties in different message queue solutions, high overheads, and disaster tolerance ability building. This talk will cover Huawei Device’s experience in redesigning its message queue architecture and present some solutions to these problems.</p><p>To learn more about how companies and organizations today leverage Apache Pulsar for streaming and messaging, serverless computing, and mission-critical deployments in production, see other Apache Pulsar-related sessions in <a href="https://apachecon.com/acasia2022/tracks/streaming.html" target="_blank" rel="noopener noreferrer">streaming</a> and <a href="https://apachecon.com/acasia2022/tracks/messaging.html" target="_blank" rel="noopener noreferrer">messaging</a> tracks respectively.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-participate">How to participate<a href="#how-to-participate" class="hash-link" aria-label="Direct link to How to participate" title="Direct link to How to participate">​</a></h2><p><a href="https://apachecon.com/acasia2022/register.html" target="_blank" rel="noopener noreferrer">Register</a> now for free.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="more-resources">More resources<a href="#more-resources" class="hash-link" aria-label="Direct link to More resources" title="Direct link to More resources">​</a></h2><p>As we can see from topics submitted to ApacheCon Asia 2022, Apache Pulsar has become <a href="https://blogs.apache.org/foundation/entry/apache-in-2021-by-the" target="_blank" rel="noopener noreferrer">one of the most active Apache projects</a> over the past few years, with a vibrant community that continues to drive innovation and improvements to the project.</p><ol><li>Save your spot at the Pulsar Summit San Francisco. The first in-person Pulsar Summit is taking place this August! <a href="https://pulsar-summit.org/" target="_blank" rel="noopener noreferrer">Sign up today</a> to join the Pulsar community and the messaging and event streaming community.</li><li>Join the Apache Pulsar community. <a href="https://pulsar.apache.org/community#section-welcome" target="_blank" rel="noopener noreferrer">Subscribe to the Pulsar mailing lists</a> for user-related or Pulsar development discussions. You can also <a href="https://apache-pulsar.herokuapp.com/" target="_blank" rel="noopener noreferrer">join the Pulsar Slack</a> to ask quick questions or discuss specialized topics.</li></ol>]]></content>
        <author>
            <name>Sherlock Xu</name>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Speakers and Sponsorship Prospectus Announced for Pulsar Summit San Francisco 2022]]></title>
        <id>https://pulsar.apache.org/blog/2022/07/15/pulsar-summit-san-francisco</id>
        <link href="https://pulsar.apache.org/blog/2022/07/15/pulsar-summit-san-francisco"/>
        <updated>2022-07-15T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[We're excited to invite you to the Pulsar Summit San Francisco 2022! Join the Apache Pulsar community in-person at Hotel Nikko on August 18th for this action-packed, one-day event. Don’t miss the opportunity to join us for four keynotes and 12 breakout sessions and to network with fellow attendees at the Happy Hour event. Save your spot.]]></summary>
        <content type="html"><![CDATA[<p>We're excited to invite you to <a href="https://pulsar-summit.org/event/san-francisco-2022" target="_blank" rel="noopener noreferrer">the Pulsar Summit San Francisco 2022</a>! Join the Apache Pulsar community in-person at Hotel Nikko on August 18th for this action-packed, one-day event. Don’t miss the opportunity to join us for four keynotes and 12 breakout sessions and to network with fellow attendees at the Happy Hour event. <a href="https://www.eventbrite.com/e/pulsar-summit-san-francisco-2022-tickets-332014162297" target="_blank" rel="noopener noreferrer">Save your spot</a>.</p><p>The Pulsar Summit gathers developers, architects, and data engineers to discuss the latest in real-time data streaming and message queuing. Past Pulsar Summits have featured more than 200 interactive sessions presented by tech leaders from Intuit, Micro Focus, Salesforce, Splunk, Verizon Media, Tencent, and more. The Summits garnered 2,000+ global attendees representing top technology, fintech, and media companies, such as Google, Amazon, eBay, Microsoft, American Express, LEGO, Athena Health, Paypal, and many more. </p><p>This year, Pulsar Summit San Francisco will include tech deep dives, adoption stories, best practices, and insights into Pulsar’s global adoption and thriving community. Take a sneak peek below at a few of the featured sessions:</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="featured-sessions">Featured Sessions<a href="#featured-sessions" class="hash-link" aria-label="Direct link to Featured Sessions" title="Direct link to Featured Sessions">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-message-redelivery-an-unexpected-journey">1. Message Redelivery: An Unexpected Journey<a href="#1-message-redelivery-an-unexpected-journey" class="hash-link" aria-label="Direct link to 1. Message Redelivery: An Unexpected Journey" title="Direct link to 1. Message Redelivery: An Unexpected Journey">​</a></h3><p><strong>David Kjerrumgaard, Developer Advocate, StreamNative</strong></p><p>Understanding Pulsar’s redelivery semantics is critical for preventing duplicate or out-of-order processing when message acknowledgments are not received. This talk walks you through the redelivery semantics, highlights some of the mechanisms available to application developers to control this behavior, and provides best practices for configuring message redelivery to suit various use cases.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-is-using-kop-kafka-on-pulsar-a-good-idea">2. Is Using KoP (Kafka-On-Pulsar) a Good Idea?<a href="#2-is-using-kop-kafka-on-pulsar-a-good-idea" class="hash-link" aria-label="Direct link to 2. Is Using KoP (Kafka-On-Pulsar) a Good Idea?" title="Direct link to 2. Is Using KoP (Kafka-On-Pulsar) a Good Idea?">​</a></h3><p><strong>Ricardo Ferreira, Senior Developer Advocate, AWS</strong></p><p>Learn how to unlock infinite event stream retention, a rebalance-free architecture, native support for event processing, and the multi-tenancy with Apache Pulsar for your microservices written for Apache Kafka. This talk dives into the architecture of protocol handlers and how KoP (Kafka-on-Pulsar) works.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-cross-the-streams-creating-streaming-data-pipelines-with-apache-flink--apache-pulsar">3. Cross the Streams! Creating Streaming Data Pipelines with Apache Flink + Apache Pulsar<a href="#3-cross-the-streams-creating-streaming-data-pipelines-with-apache-flink--apache-pulsar" class="hash-link" aria-label="Direct link to 3. Cross the Streams! Creating Streaming Data Pipelines with Apache Flink + Apache Pulsar" title="Direct link to 3. Cross the Streams! Creating Streaming Data Pipelines with Apache Flink + Apache Pulsar">​</a></h3><p><strong>Caito Scherr, Developer Advocate, Ververica</strong> </p><p>Learn how to build a unified batch and streaming pipeline from scratch with Apache Pulsar and Flink SQL in this step-by-step demo. Leverage the power of Apache Flink, a high-speed, customizable stream processing engine, without the steep learning curve.  </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-building-reliable-lakehouses-with-apache-pulsar-and-delta-lake">4. Building Reliable Lakehouses with Apache Pulsar and Delta Lake<a href="#4-building-reliable-lakehouses-with-apache-pulsar-and-delta-lake" class="hash-link" aria-label="Direct link to 4. Building Reliable Lakehouses with Apache Pulsar and Delta Lake" title="Direct link to 4. Building Reliable Lakehouses with Apache Pulsar and Delta Lake">​</a></h3><p><strong>Denny Lee, Sr. Staff Developer Advocate and Delta Lake Committer, Databricks</strong></p><p>Explore the key features of Delta Lake that enable the Lakehouse architecture. Learn about the future ecosystem around Delta Lake, including supporting multiple languages and data processing systems. </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="5-towards-a-zookeeper-less-pulsar-etcd-etcd-etcd">5. Towards a ZooKeeper-less Pulsar, etcd, etcd, etcd.<a href="#5-towards-a-zookeeper-less-pulsar-etcd-etcd-etcd" class="hash-link" aria-label="Direct link to 5. Towards a ZooKeeper-less Pulsar, etcd, etcd, etcd." title="Direct link to 5. Towards a ZooKeeper-less Pulsar, etcd, etcd, etcd.">​</a></h3><p><strong>Matteo Merli, Apache Pulsar PMC Chair, CTO, StreamNative</strong></p><p>Apache Pulsar 2.10 eliminates Pulsar’s dependency on Apache ZooKeeper and introduces a pluggable framework to enable leveraging alternative metadata and coordination systems. Learn how to utilize the existing etcd service running inside Kubernetes to act as Pulsar's metadata store, achieving a Zookeeper-less Pulsar.</p><p>For more information, see the <a href="https://pulsar-summit.org/event/san-francisco-2022/schedule" target="_blank" rel="noopener noreferrer">Pulsar Summit schedule</a> and <a href="https://pulsar-summit.org/event/san-francisco-2022/speakers" target="_blank" rel="noopener noreferrer">speaker list</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="two-ways-to-participate">Two ways to participate:<a href="#two-ways-to-participate" class="hash-link" aria-label="Direct link to Two ways to participate:" title="Direct link to Two ways to participate:">​</a></h2><ol><li><a href="https://www.eventbrite.com/e/pulsar-summit-san-francisco-2022-tickets-332014162297" target="_blank" rel="noopener noreferrer">Sign up to attend.</a></li><li>Become a sponsor! Learn how your company can stand out as a thought leader in the fast-growing Apache Pulsar community by becoming a Summit Sponsor. <a href="https://6585952.fs1.hubspotusercontent-na1.net/hubfs/6585952/Pulsar%20Summit%20San%20Francisco%202022%20Sponsorship%20Prospectus%20v.2.pdf" target="_blank" rel="noopener noreferrer">Learn more</a> about the limited Sponsorship opportunities available, and secure your sponsorship by emailing: <a href="mailto:sponsors@pulsar-summit.org." target="_blank" rel="noopener noreferrer">sponsors@pulsar-summit.org.</a> </li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="register-now"><strong><a href="https://www.eventbrite.com/e/pulsar-summit-san-francisco-2022-tickets-332014162297" target="_blank" rel="noopener noreferrer">Register Now!</a></strong><a href="#register-now" class="hash-link" aria-label="Direct link to register-now" title="Direct link to register-now">​</a></h3><h2 class="anchor anchorWithStickyNavbar_LWe7" id="more-resources">More Resources<a href="#more-resources" class="hash-link" aria-label="Direct link to More Resources" title="Direct link to More Resources">​</a></h2><ol><li><strong>Download and try out the latest version of Pulsar</strong>. Recently, the Apache Pulsar community released <a href="https://pulsar.apache.org/versions/" target="_blank" rel="noopener noreferrer">version 2.10.1</a>. 50 contributors provided improvements and bug fixes that delivered 200+ commits. For more information, see <a href="https://pulsar.apache.org/blog/2022/07/12/Apache-Pulsar-2-10-1" target="_blank" rel="noopener noreferrer">What’s New in Apache Pulsar 2.10.1</a>.</li><li><strong>Meet the Apache Pulsar community</strong>. <a href="https://pulsar.apache.org/community#section-welcome" target="_blank" rel="noopener noreferrer">Subscribe to the Pulsar mailing lists</a> for user-related or Pulsar development discussions. You can also <a href="https://apache-pulsar.herokuapp.com/" target="_blank" rel="noopener noreferrer">join the Pulsar Slack</a> for quick questions or join discussions on specialized topics.</li></ol>]]></content>
        <author>
            <name>Alice Bi, Karin Landers</name>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[What’s New in Apache Pulsar 2.10.1]]></title>
        <id>https://pulsar.apache.org/blog/2022/07/12/Apache-Pulsar-2-10-1</id>
        <link href="https://pulsar.apache.org/blog/2022/07/12/Apache-Pulsar-2-10-1"/>
        <updated>2022-07-12T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[The Apache Pulsar community releases version 2.10.1! 50 contributors provided improvements and bug fixes that delivered 200+ commits. Thanks for all your contributions.]]></summary>
        <content type="html"><![CDATA[<p>The Apache Pulsar community releases version 2.10.1! 50 contributors provided improvements and bug fixes that delivered 200+ commits. Thanks for all your contributions.</p><p>The highlight of the 2.10.1 release is introducing 30+ transaction fixes and improvements. Earlier-adoption users of Pulsar transactions have documented long-term use in their production environments and reported valuable findings in real applications. This provides the Pulsar community with the opportunity to make a difference. </p><p>This blog walks through the most noteworthy changes. For the complete list including all feature enhancements and bug fixes, check out the <a href="https://pulsar.apache.org/release-notes/versioned/pulsar-2.10.1/" target="_blank" rel="noopener noreferrer">Pulsar 2.10.1 Release Notes</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fixed-ineffective-load-manager-due-to-brokers-zero-resource-usage-pr-15314">Fixed ineffective load manager due to broker’s zero resource usage. <a href="https://github.com/apache/pulsar/pull/15314" target="_blank" rel="noopener noreferrer">PR-15314</a><a href="#fixed-ineffective-load-manager-due-to-brokers-zero-resource-usage-pr-15314" class="hash-link" aria-label="Direct link to fixed-ineffective-load-manager-due-to-brokers-zero-resource-usage-pr-15314" title="Direct link to fixed-ineffective-load-manager-due-to-brokers-zero-resource-usage-pr-15314">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="issue">Issue<a href="#issue" class="hash-link" aria-label="Direct link to Issue" title="Direct link to Issue">​</a></h4><p>Introduced in 2.10.0, the leader broker’s resource usage (CPU, memory, direct memory…) was always 0 when performing load balance. The root cause is that deserializing the JSON data to ResourceUsage POJO didn’t use the constructor <code>ResourceUsage (double usage, double limit)</code>, so the percentage was always 0.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="allow-users-with-produceconsume-privileges-to-get-topic-schema-pr-15956">Allow users with produce/consume privileges to get topic schema. <a href="https://github.com/apache/pulsar/pull/15956" target="_blank" rel="noopener noreferrer">PR-15956</a><a href="#allow-users-with-produceconsume-privileges-to-get-topic-schema-pr-15956" class="hash-link" aria-label="Direct link to allow-users-with-produceconsume-privileges-to-get-topic-schema-pr-15956" title="Direct link to allow-users-with-produceconsume-privileges-to-get-topic-schema-pr-15956">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="issue-1">Issue<a href="#issue-1" class="hash-link" aria-label="Direct link to Issue" title="Direct link to Issue">​</a></h4><p>In earlier versions, only users with admin privileges were able to get topic schema, which made schema inconvenient to use. </p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="resolution">Resolution<a href="#resolution" class="hash-link" aria-label="Direct link to Resolution" title="Direct link to Resolution">​</a></h4><p>Allow users who have metadata access privileges to get topic schema. Subscribers can be from different teams, and the producers and subscribers should be able to get the topic schema instead of asking tenant admin to do so before publishing and consuming messages.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fixed-the-consumption-performance-regression-pr-15162">Fixed the consumption performance regression. <a href="https://github.com/apache/pulsar/pull/15162" target="_blank" rel="noopener noreferrer">PR-15162</a><a href="#fixed-the-consumption-performance-regression-pr-15162" class="hash-link" aria-label="Direct link to fixed-the-consumption-performance-regression-pr-15162" title="Direct link to fixed-the-consumption-performance-regression-pr-15162">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="issue-2">Issue<a href="#issue-2" class="hash-link" aria-label="Direct link to Issue" title="Direct link to Issue">​</a></h4><p>This performance regression was introduced in 2.10.0, 2.9.1, and 2.8.3. You may find a significant performance drop with message listeners while using Java Client. The root cause is each message will introduce the thread switching from the external thread pool to the internal thread poll, and then to the external thread pool.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="resolution-1">Resolution<a href="#resolution-1" class="hash-link" aria-label="Direct link to Resolution" title="Direct link to Resolution">​</a></h4><p>2.10.1 is the first version to have this issue fixed by avoiding the thread switching for each message to improve consumption throughput.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fixed-a-deadlock-issue-of-topic-creation-pr-15570">Fixed a deadlock issue of topic creation. <a href="https://github.com/apache/pulsar/pull/15570" target="_blank" rel="noopener noreferrer">PR-15570</a><a href="#fixed-a-deadlock-issue-of-topic-creation-pr-15570" class="hash-link" aria-label="Direct link to fixed-a-deadlock-issue-of-topic-creation-pr-15570" title="Direct link to fixed-a-deadlock-issue-of-topic-creation-pr-15570">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="issue-3">Issue<a href="#issue-3" class="hash-link" aria-label="Direct link to Issue" title="Direct link to Issue">​</a></h4><p>This deadlock issue occurred during topic creation by trying to re-acquire the same <code>StampedLock</code> from the same thread when removing it. This will cause the topic to stop service for a long time, and ultimately with a failure in the deduplication or geo-replication check. The workaround is restarting the broker.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fixed-key-shared-delivery-of-messages-with-interleaved-delays-pr-15409">Fixed key-shared delivery of messages with interleaved delays. <a href="https://github.com/apache/pulsar/pull/15409" target="_blank" rel="noopener noreferrer">PR-15409</a><a href="#fixed-key-shared-delivery-of-messages-with-interleaved-delays-pr-15409" class="hash-link" aria-label="Direct link to fixed-key-shared-delivery-of-messages-with-interleaved-delays-pr-15409" title="Direct link to fixed-key-shared-delivery-of-messages-with-interleaved-delays-pr-15409">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="issue-4">Issue<a href="#issue-4" class="hash-link" aria-label="Direct link to Issue" title="Direct link to Issue">​</a></h4><p>This is a regression issue introduced in 2.10.0. When delayed messages with interleaved delays occurred on a shared/key-shared subscription, many of the messages were not delivered but stayed in the backlog. The reason was that when peeking into <code>getMessagesToReplayNow()</code>, we could not discard the returned set due to untracked message IDs in the delayed message controller.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="optimized-the-memory-usage-of-brokers">Optimized the memory usage of brokers.<a href="#optimized-the-memory-usage-of-brokers" class="hash-link" aria-label="Direct link to Optimized the memory usage of brokers." title="Direct link to Optimized the memory usage of brokers.">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="issue-5">Issue<a href="#issue-5" class="hash-link" aria-label="Direct link to Issue" title="Direct link to Issue">​</a></h4><p>Pulsar has some internal data structures, such as <code>ConcurrentLongLongPairHashMap</code>, and <code>ConcurrentLongPairHashMap</code>, which can reduce the memory usage rather than using the Boxing type. However, in earlier versions, the data structures were not supported for shrinking even if the data was removed, which wasted a certain amount of memory in certain situations.</p><p><strong>Pull requests</strong></p><ul><li><a href="https://github.com/apache/pulsar/pull/15354" target="_blank" rel="noopener noreferrer">https://github.com/apache/pulsar/pull/15354</a></li><li><a href="https://github.com/apache/pulsar/pull/15342" target="_blank" rel="noopener noreferrer">https://github.com/apache/pulsar/pull/15342</a></li><li><a href="https://github.com/apache/pulsar/pull/14663" target="_blank" rel="noopener noreferrer">https://github.com/apache/pulsar/pull/14663</a></li><li><a href="https://github.com/apache/pulsar/pull/14515" target="_blank" rel="noopener noreferrer">https://github.com/apache/pulsar/pull/14515</a></li><li><a href="https://github.com/apache/pulsar/pull/14497" target="_blank" rel="noopener noreferrer">https://github.com/apache/pulsar/pull/14497</a></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="resolution-2">Resolution<a href="#resolution-2" class="hash-link" aria-label="Direct link to Resolution" title="Direct link to Resolution">​</a></h4><p>Support the shrinking of the internal data structures, such as <code>ConcurrentSortedLongPairSet</code>, <code>ConcurrentOpenHashMap</code>, and so on.</p><h1>What’s Next?</h1><p>If you are interested in learning more about Pulsar 2.10.1, you can <a href="https://pulsar.apache.org/en/versions/" target="_blank" rel="noopener noreferrer">download</a> and try it out now! </p><p><strong>Pulsar Summit San Francisco 2022</strong> will take place on August 18th, 2022. <a href="https://pulsar-summit.org/" target="_blank" rel="noopener noreferrer">Register now</a> and help us make it an even bigger success by spreading the word on social media!</p><p>For more information about the Apache Pulsar project and current progress, visit
the <a href="https://pulsar.apache.org" target="_blank" rel="noopener noreferrer">Pulsar website</a>, follow the project on Twitter
<a href="https://twitter.com/apache_pulsar" target="_blank" rel="noopener noreferrer">@apache_pulsar</a>, and join <a href="https://apache-pulsar.herokuapp.com/" target="_blank" rel="noopener noreferrer">Pulsar Slack</a>!</p>]]></content>
        <author>
            <name>codelipenghui, momo-jun</name>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[What’s New in Apache Pulsar 2.10]]></title>
        <id>https://pulsar.apache.org/blog/2022/05/11/Apache-Pulsar-2-10-0</id>
        <link href="https://pulsar.apache.org/blog/2022/05/11/Apache-Pulsar-2-10-0"/>
        <updated>2022-05-11T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[The Apache Pulsar community releases version 2.10. 99 contributors provided improvements and bug fixes that delivered over 800 commits.]]></summary>
        <content type="html"><![CDATA[<p>The Apache Pulsar community releases version 2.10. 99 contributors provided improvements and bug fixes that delivered over 800 commits.</p><h1>Highlights of this release:</h1><ul><li>Pulsar provides automatic failure recovery between the primary and backup clusters. #13316<ul><li>Original PIP <a href="https://www.google.com/url?q=https://github.com/apache/pulsar/issues/13315&amp;sa=D&amp;source=docs&amp;ust=1646058957138073&amp;usg=AOvVaw3mGki2sHW2QpIsoYf5pt3w" target="_blank" rel="noopener noreferrer">#13315</a></li></ul></li><li>Fewer producers needed and more efficient use of broker memory with lazy-loading feature added to <code>PartitionedProducer</code>. #10279</li><li>Topic map support added with new <code>TableView</code> type using key values in received messages.</li></ul><p>This blog documents the most noteworthy changes in this release. For the complete list including all features, enhancements, and bug fixes, check out the <a href="https://pulsar.apache.org/release-notes/#placeholder" target="_blank" rel="noopener noreferrer">Pulsar 2.10.1 Release Notes</a>.</p><h1>Notable bug fixes and enhancements</h1><hr><h4 class="anchor anchorWithStickyNavbar_LWe7" id="cluster">Cluster<a href="#cluster" class="hash-link" aria-label="Direct link to Cluster" title="Direct link to Cluster">​</a></h4><hr><h5 class="anchor anchorWithStickyNavbar_LWe7" id="pulsar-cluster-level-auto-failover-on-client-side-13316">Pulsar cluster level auto failover on client side #13316<a href="#pulsar-cluster-level-auto-failover-on-client-side-13316" class="hash-link" aria-label="Direct link to Pulsar cluster level auto failover on client side #13316" title="Direct link to Pulsar cluster level auto failover on client side #13316">​</a></h5><p><strong>Issue:</strong> A Pulsar administrator must manually failover a cluster.</p><p><strong>Resolution:</strong> Added Pulsar cluster-level auto-failover, which automatically and seamlessly switches from primary to one or more secondary clusters when a failover event is detected. When the primary cluster recovers, the client automatically switches back.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="topic-policy-across-multiple-clusters-12517">Topic policy across multiple clusters #12517<a href="#topic-policy-across-multiple-clusters-12517" class="hash-link" aria-label="Direct link to Topic policy across multiple clusters #12517" title="Direct link to Topic policy across multiple clusters #12517">​</a></h5><p><strong>Issue:</strong> Some topic policies for a geo-replicated cluster affect the entire geo-replicated cluster while some only affect the local cluster. </p><p><strong>Resolution:</strong> Topic policies now support cross-cluster replication. </p><ul><li>For local topic policies, set the <code>replicateTo</code> property of the message to avoid being replicated to the remote.</li><li>Retention supports setting global parameters.</li><li>Added global topic policies for <code>SystemTopicBasedTopicPoliciesService</code>. </li></ul><hr><h4 class="anchor anchorWithStickyNavbar_LWe7" id="producer">Producer<a href="#producer" class="hash-link" aria-label="Direct link to Producer" title="Direct link to Producer">​</a></h4><hr><h5 class="anchor anchorWithStickyNavbar_LWe7" id="add-lazy-loading-feature-to-partitionedproducer-10279">Add lazy-loading feature to PartitionedProducer #10279<a href="#add-lazy-loading-feature-to-partitionedproducer-10279" class="hash-link" aria-label="Direct link to Add lazy-loading feature to PartitionedProducer #10279" title="Direct link to Add lazy-loading feature to PartitionedProducer #10279">​</a></h5><p><strong>Issue:</strong> With the number of partitions set according to the highest rate producer, the lowest rate producer does not always need to connect to every partition, so extra producers take up broker memory.</p><p><strong>Resolution:</strong> Reduced the number of producers to use broker memory more efficiently by introducing lazy-loading for partitioned producers; also added round-robin routing mode class to limit the number of partitions.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="client-introduce-chunk-message-id-12403">[Client]<!-- --> Introduce chunk message ID #12403<a href="#client-introduce-chunk-message-id-12403" class="hash-link" aria-label="Direct link to client-introduce-chunk-message-id-12403" title="Direct link to client-introduce-chunk-message-id-12403">​</a></h5><p><strong>Issue:</strong> When sending chunked messages, the producer returns the message-id of the last chunk, causing incorrect behaviors in some processes.</p><p><strong>Resolution:</strong> Introduced the new <code>ChunkMessage-ID</code> type. The chunk message-id inherits from <code>MessageIdImpl</code> and adds two new methods: <code>getFirstChunkMessageId</code> and <code>getLastChunkMessageID</code>. For other method implementations, the <code>lastChunkMessageID</code> is called directly, which is compatible with much of the existing business logic. </p><hr><h4 class="anchor anchorWithStickyNavbar_LWe7" id="broker">Broker<a href="#broker" class="hash-link" aria-label="Direct link to Broker" title="Direct link to Broker">​</a></h4><hr><h5 class="anchor anchorWithStickyNavbar_LWe7" id="broker-extensions-to-allow-operators-of-enterprise-wide-cluster-better-control-and-flexibility-12536">Broker extensions to allow operators of enterprise wide cluster better control and flexibility #12536<a href="#broker-extensions-to-allow-operators-of-enterprise-wide-cluster-better-control-and-flexibility-12536" class="hash-link" aria-label="Direct link to Broker extensions to allow operators of enterprise wide cluster better control and flexibility #12536" title="Direct link to Broker extensions to allow operators of enterprise wide cluster better control and flexibility #12536">​</a></h5><p><strong>Issue:</strong> Operators of enterprise Pulsar cluster(s) need greater flexibility and control to intercept broker events (including ledger writes/reads) for template validations, observability and access control.</p><p><strong>Resolution:</strong> </p><ul><li>Enhanced org.apache.pulsar.broker.intercept.BrokerInterceptor interface to include additional events for tracing</li><li>Created a new interface org.apache.pulsar.common.intercept.MessagePayloadProcessor to allow interception of ledger write/read operations</li><li>Enhanced PulsarAdmin to give operators a control in managing super-users</li></ul><hr><h4 class="anchor anchorWithStickyNavbar_LWe7" id="consumer">Consumer<a href="#consumer" class="hash-link" aria-label="Direct link to Consumer" title="Direct link to Consumer">​</a></h4><hr><h5 class="anchor anchorWithStickyNavbar_LWe7" id="redeliver-command-add-epoch-10478">Redeliver command add epoch #10478<a href="#redeliver-command-add-epoch-10478" class="hash-link" aria-label="Direct link to Redeliver command add epoch #10478" title="Direct link to Redeliver command add epoch #10478">​</a></h5><p><strong>Issue:</strong> Pull and redeliver operations are asynchronous, so the client consumer may receive a new message, execute a cumulative ack based on a new messageID, and fail to consume older messages. </p><p><strong>Resolution:</strong> The Pulsar client synchronizes redeliver and pull messages operations using an incrementing epoch for the server and client consumer. </p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="support-pluggable-entry-filter-in-dispatcher-12269">Support pluggable entry filter in Dispatcher #12269<a href="#support-pluggable-entry-filter-in-dispatcher-12269" class="hash-link" aria-label="Direct link to Support pluggable entry filter in Dispatcher #12269" title="Direct link to Support pluggable entry filter in Dispatcher #12269">​</a></h5><p><strong>Issue:</strong> Message tagging is not natively supported. </p><p><strong>Resolution:</strong> Implemented an entry filter framework at the broker level.  Working to support namespace and topic level in an upcoming release.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="create-init-subscription-before-sending-message-to-dlq-13355">Create init subscription before sending message to DLQ #13355<a href="#create-init-subscription-before-sending-message-to-dlq-13355" class="hash-link" aria-label="Direct link to Create init subscription before sending message to DLQ #13355" title="Direct link to Create init subscription before sending message to DLQ #13355">​</a></h5><p><strong>Issue:</strong> DLQ data in unprocessed messages is removed automatically without a data retention policy for the namespace or a subscription for the DLQ.  </p><p><strong>Resolution:</strong> Initial subscription is now created before sending messages to the DLQ.
When <code>deadLetterProducer</code> is initialized, the consumer sets the initial subscription according to <code>DeadLetterPolicy</code>.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="apply-redelivery-backoff-policy-for-ack-timeout-13707">Apply redelivery backoff policy for ack timeout #13707<a href="#apply-redelivery-backoff-policy-for-ack-timeout-13707" class="hash-link" aria-label="Direct link to Apply redelivery backoff policy for ack timeout #13707" title="Direct link to Apply redelivery backoff policy for ack timeout #13707">​</a></h5><p><strong>Issue:</strong> The redelivery backoff policy recently introduced in PIP 106 only applies to the negative acknowledgment API. If ack timeout is used to trigger the message
redelivery instead of the negative acknowledgment API, the backoff policy is bypassed.</p><p><strong>Resolution:</strong> </p><ul><li>Applied message redelivery policy for ack timeout.</li><li>Alerted <code>NegativeAckBackoff</code> interface to <code>RedeliveryBackoff</code>.</li><li>Exposed <code>AckTimeoutRedeliveryBackoff</code> in <code>ConsumerBuilder</code>.</li><li>Added unit test case.</li></ul><p>Currently only the Java client is modified.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="resolve-produce-chunk-messages-failed-when-topic-level-maxmessagesize-is-set-13599">Resolve produce chunk messages failed when topic level maxMessageSize is set #13599<a href="#resolve-produce-chunk-messages-failed-when-topic-level-maxmessagesize-is-set-13599" class="hash-link" aria-label="Direct link to Resolve produce chunk messages failed when topic level maxMessageSize is set #13599" title="Direct link to Resolve produce chunk messages failed when topic level maxMessageSize is set #13599">​</a></h5><p><strong>Issue:</strong> Currently, chunk messages produce fails if topic level maxMessageSize is set to <!-- -->[1]<!-- -->. </p><p><strong>Resolution:</strong> Added <code>isChunked</code> in <code>PublishContext</code>. Skips the<code>maxMessageSize</code> check if it's chunked.</p><hr><h4 class="anchor anchorWithStickyNavbar_LWe7" id="function">Function<a href="#function" class="hash-link" aria-label="Direct link to Function" title="Direct link to Function">​</a></h4><hr><h5 class="anchor anchorWithStickyNavbar_LWe7" id="pulsar-functions-preload-and-release-external-resources-13205">Pulsar Functions: Preload and release external resources #13205<a href="#pulsar-functions-preload-and-release-external-resources-13205" class="hash-link" aria-label="Direct link to Pulsar Functions: Preload and release external resources #13205" title="Direct link to Pulsar Functions: Preload and release external resources #13205">​</a></h5><p><strong>Issue:</strong>  External resource initialization and release was accomplished either manually or through use of a complicated initialization logic.</p><p><strong>Resolution:</strong> Introduced <code>RichFunction</code> interface to extend <code>Function</code> by providing a setup and tearDown API. </p><hr><h5 class="anchor anchorWithStickyNavbar_LWe7" id="update-authentication-interfaces-to-include-async-authentication-methods-12104">Update Authentication Interfaces to Include Async Authentication Methods #12104<a href="#update-authentication-interfaces-to-include-async-authentication-methods-12104" class="hash-link" aria-label="Direct link to Update Authentication Interfaces to Include Async Authentication Methods #12104" title="Direct link to Update Authentication Interfaces to Include Async Authentication Methods #12104">​</a></h5><p><strong>Issue:</strong> Pulsar's current <code>AuthenticationProvider</code> interface only exposes synchronous methods for authenticating a connection. To date, this has been sufficient because we do not have any providers that rely on network calls. However, in looking at the OAuth2.0 spec, there are some cases where network calls are necessary to verify a token.</p><p><strong>Resolution:</strong> </p><h6 class="anchor anchorWithStickyNavbar_LWe7" id="authenticationprovider">AuthenticationProvider<a href="#authenticationprovider" class="hash-link" aria-label="Direct link to AuthenticationProvider" title="Direct link to AuthenticationProvider">​</a></h6><ul><li>Added <code>AuthenticationProvider#authenticateAsync</code>. Included a default implementation that calls the authenticate method.</li><li>Deprecated <code>AuthenticationProvider#authenticate</code>.</li><li>Added <code>AuthenticationProvider#authenticateHttpRequestAsync</code>.</li><li>Deprecated <code>AuthenticationProvider#authenticateHttpRequest</code>.</li></ul><h5 class="anchor anchorWithStickyNavbar_LWe7" id="authenticationstate">AuthenticationState<a href="#authenticationstate" class="hash-link" aria-label="Direct link to AuthenticationState" title="Direct link to AuthenticationState">​</a></h5><ul><li>Added <code>AuthenticationState#authenticateAsync</code>.</li><li>Deprecated <code>AuthenticationState#authenticate</code>. The preferred method is <code>AuthenticationState#authenticateAsync</code>.</li><li>Deprecated <code>AuthenticationState#isComplete</code>. This method can be avoided by inferring authentication completeness from the result of <code>AuthenticationState#authenticateAsync</code>.</li></ul><h5 class="anchor anchorWithStickyNavbar_LWe7" id="authenticationdatasource">AuthenticationDataSource<a href="#authenticationdatasource" class="hash-link" aria-label="Direct link to AuthenticationDataSource" title="Direct link to AuthenticationDataSource">​</a></h5><ul><li>Deprecated <code>AuthenticationDataSource#authenticate</code>. There is no need for an async version of this method.</li></ul><hr><h5 class="anchor anchorWithStickyNavbar_LWe7" id="initial-commit-for-tableview-12838">Initial commit for TableView #12838<a href="#initial-commit-for-tableview-12838" class="hash-link" aria-label="Direct link to Initial commit for TableView #12838" title="Direct link to Initial commit for TableView #12838">​</a></h5><p><strong>Issue:</strong> In many use cases, applications use Pulsar consumers or readers to fetch
all the updates from a topic and construct a map with the latest value of each
key for received messages. This is common when constructing a local cache of the data. We do not offer support for This access pattern was not included in the Pulsar client API. </p><p><strong>Resolution:</strong> Added new <code>TableView</code> type and updated the PulsarClient.</p><hr><h4 class="anchor anchorWithStickyNavbar_LWe7" id="topic">Topic<a href="#topic" class="hash-link" aria-label="Direct link to Topic" title="Direct link to Topic">​</a></h4><hr><h5 class="anchor anchorWithStickyNavbar_LWe7" id="support-topic-metadata---part-1-create-topic-with-properties-12818">Support Topic metadata - PART-1 create topic with properties #12818<a href="#support-topic-metadata---part-1-create-topic-with-properties-12818" class="hash-link" aria-label="Direct link to Support Topic metadata - PART-1 create topic with properties #12818" title="Direct link to Support Topic metadata - PART-1 create topic with properties #12818">​</a></h5><p><strong>Issue:</strong> Can’t store topic metadata.</p><p><strong>Resolution:</strong> </p><ul><li>Added new storage methods in topics.java.</li><li>Added two new paths to REST API to reduce compatibility issues.</li></ul><hr><h4 class="anchor anchorWithStickyNavbar_LWe7" id="metadata-store">Metadata Store<a href="#metadata-store" class="hash-link" aria-label="Direct link to Metadata Store" title="Direct link to Metadata Store">​</a></h4><hr><h5 class="anchor anchorWithStickyNavbar_LWe7" id="added-etcd-metadatastore-implementation-13225">Added Etcd MetadataStore implementation #13225<a href="#added-etcd-metadatastore-implementation-13225" class="hash-link" aria-label="Direct link to Added Etcd MetadataStore implementation #13225" title="Direct link to Added Etcd MetadataStore implementation #13225">​</a></h5><p><strong>Issue:</strong> We’re working to add metadata backends that support non-Zookeeper implementations.</p><p><strong>Resolution:</strong> Added Etcd support for:</p><ul><li>Batching of read/write requests</li><li>Session watcher</li><li>Lease manager</li></ul>]]></content>
        <author>
            <name>Penghui Li, Dave Duggins</name>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[The Apache Pulsar Community Welcomes 500th Contributor!]]></title>
        <id>https://pulsar.apache.org/blog/2022/05/11/apache-pulsar-community-welcomes-500th-contributor</id>
        <link href="https://pulsar.apache.org/blog/2022/05/11/apache-pulsar-community-welcomes-500th-contributor"/>
        <updated>2022-05-11T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Apache Pulsar is one of the fastest growing, most engaged open source projects, recognized by the Apache Software Foundation as a Top 5 Project based on engagement in 2021. The vitality of any open source project relies on continued community growth and engagement, and this month, the Apache Pulsar community hit another major milestone: welcoming its 500th contributor!]]></summary>
        <content type="html"><![CDATA[<p>Apache Pulsar is one of the fastest growing, most engaged open source projects, recognized by the <a href="https://thestack.technology/top-apache-projects-in-2021-from-superset-to-nuttx/" target="_blank" rel="noopener noreferrer">Apache Software Foundation</a> as a Top 5 Project based on engagement in 2021. The vitality of any open source project relies on continued community growth and engagement, and this month, the Apache Pulsar community hit another major milestone: <strong>welcoming its 500th contributor!</strong> </p><p>A cloud-native messaging and event streaming platform, Apache Pulsar was committed to open source in 2016, and graduated as a Top-Level Project (TLP) in September 2018. Since its inception, the project has received 10k+ Github stars, 2.7k+ forks, and 6.1k+ Slack users.</p><p><img loading="lazy" alt="pulsar star history" src="/assets/images/pulsar-stars-line-40f1d46441933963b8288286722c9470.png" width="1804" height="1468" class="img_ev3q"></p><p>The number of contributors in an open-source project is meaningful because it signals project adoption, growth, advancement, and accelerated development of the technology. This milestone is even more exciting, considering the speed at which the community is growing, adding an additional 100 contributors in under seven months, representing 8X contributor growth since becoming a top-level Apache Software Foundation project. </p><p><img loading="lazy" alt="pulsar contributor history" src="/assets/images/pulsar-contributors-line-975c3004a266fb3f8235e88372f424df.png" width="1884" height="1286" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="get-involved">Get Involved<a href="#get-involved" class="hash-link" aria-label="Direct link to Get Involved" title="Direct link to Get Involved">​</a></h2><p>Community growth leads to additional adoption and project enhancement, and new contributors are an excellent way to track progress of the Pulsar project. Thank you to the community and contributors for your continued involvement! </p><p>Looking for more ways to stay connected with the Pulsar community?</p><ul><li><a href="https://pulsar-summit.org/" target="_blank" rel="noopener noreferrer">Pulsar Summit Global 2022</a> is taking place in-person in San Francisco later this year. Follow @PulsarSummit on Twitter for updates and details of this much-anticipated event. </li><li>For information about the Apache Pulsar project and current progress, visit the <a href="https://pulsar.apache.org/" target="_blank" rel="noopener noreferrer">Pulsar website</a>, follow the project on Twitter @apache_pulsar, and join <a href="https://apache-pulsar.herokuapp.com/" target="_blank" rel="noopener noreferrer">Pulsar on Slack</a>!</li></ul>]]></content>
        <author>
            <name>Matteo Merli, Karin Landers, Alice Bi</name>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[What’s New in Apache Pulsar 2.9.2]]></title>
        <id>https://pulsar.apache.org/blog/2022/04/08/Apache-Pulsar-2-9-2</id>
        <link href="https://pulsar.apache.org/blog/2022/04/08/Apache-Pulsar-2-9-2"/>
        <updated>2022-04-08T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[The Apache Pulsar community releases version 2.9.2! 60 contributors provided improvements and bug fixes that delivered 317 commits.]]></summary>
        <content type="html"><![CDATA[<p>The Apache Pulsar community releases version 2.9.2! 60 contributors provided improvements and bug fixes that delivered 317 commits.</p><p>Highlights of this release are as below:</p><ul><li>Transactions performance test tool is available. <a href="https://github.com/apache/pulsar/pull/11933" target="_blank" rel="noopener noreferrer">PR-11933</a></li><li>Brokers decrease the number of unacked messages. <a href="https://github.com/apache/pulsar/pull/13383" target="_blank" rel="noopener noreferrer">PR-13383</a></li><li>Readers continue to read data from the compacted ledgers. <a href="https://github.com/apache/pulsar/pull/13629" target="_blank" rel="noopener noreferrer">PR-13629</a></li></ul><p>This blog walks through the most noteworthy changes grouped by the affected functionalities. For the complete list including all features, enhancements, and bug fixes, check out the <a href="https://github.com/apache/pulsar/releases/tag/v2.9.2" target="_blank" rel="noopener noreferrer">Pulsar 2.9.2 Release Notes</a>.</p><h1>Notable bug fixes and enhancements</h1><h3 class="anchor anchorWithStickyNavbar_LWe7" id="readers-continue-to-read-data-from-the-compacted-ledgers-pr-13629">Readers continue to read data from the compacted ledgers. <a href="https://github.com/apache/pulsar/pull/13629" target="_blank" rel="noopener noreferrer">PR-13629</a><a href="#readers-continue-to-read-data-from-the-compacted-ledgers-pr-13629" class="hash-link" aria-label="Direct link to readers-continue-to-read-data-from-the-compacted-ledgers-pr-13629" title="Direct link to readers-continue-to-read-data-from-the-compacted-ledgers-pr-13629">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="issue">Issue<a href="#issue" class="hash-link" aria-label="Direct link to Issue" title="Direct link to Issue">​</a></h4><p>Previously, when topics were unloaded, some data was lost to be read by readers if they have consumed some messages from some compacted ledgers.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="resolution">Resolution<a href="#resolution" class="hash-link" aria-label="Direct link to Resolution" title="Direct link to Resolution">​</a></h4><p>Rewound the reader cursor to the next message of the mark delete position if <code>readCompacted = true</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="brokers-decrease-the-number-of-unacked-messages-pr-13383">Brokers decrease the number of unacked messages. <a href="https://github.com/apache/pulsar/pull/13383" target="_blank" rel="noopener noreferrer">PR-13383</a><a href="#brokers-decrease-the-number-of-unacked-messages-pr-13383" class="hash-link" aria-label="Direct link to brokers-decrease-the-number-of-unacked-messages-pr-13383" title="Direct link to brokers-decrease-the-number-of-unacked-messages-pr-13383">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="issue-1">Issue<a href="#issue-1" class="hash-link" aria-label="Direct link to Issue" title="Direct link to Issue">​</a></h4><p>Previously, brokers did not decrease the number of unacked messages if batch ack was enabled. Consequently, consumers were blocked if they reached <code>maxUnackedMessagesPerConsumer</code> limit.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="resolution-1">Resolution<a href="#resolution-1" class="hash-link" aria-label="Direct link to Resolution" title="Direct link to Resolution">​</a></h4><p>Decreased the number of unacked messages when <code>individualAckNormal</code> was called.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="chunked-messages-can-be-queried-through-pulsar-sql-pr-12720">Chunked messages can be queried through Pulsar SQL. <a href="https://github.com/apache/pulsar/pull/12720" target="_blank" rel="noopener noreferrer">PR-12720</a><a href="#chunked-messages-can-be-queried-through-pulsar-sql-pr-12720" class="hash-link" aria-label="Direct link to chunked-messages-can-be-queried-through-pulsar-sql-pr-12720" title="Direct link to chunked-messages-can-be-queried-through-pulsar-sql-pr-12720">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="issue-2">Issue<a href="#issue-2" class="hash-link" aria-label="Direct link to Issue" title="Direct link to Issue">​</a></h4><p>Previously, chunked messages could not be queried through Pulsar SQL.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="resolution-2">Resolution<a href="#resolution-2" class="hash-link" aria-label="Direct link to Resolution" title="Direct link to Resolution">​</a></h4><p>Add a chunked message map in <code>PulsarRecordCursor</code> to maintain incomplete chunked messages. If one chunked message was received completely, it would be offered in the message queue to wait for deserialization. </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="support-enable-or-disable-schema-upload-at-the-broker-level-pr-12786">Support enable or disable schema upload at the broker level. <a href="https://github.com/apache/pulsar/pull/12786" target="_blank" rel="noopener noreferrer">PR-12786</a><a href="#support-enable-or-disable-schema-upload-at-the-broker-level-pr-12786" class="hash-link" aria-label="Direct link to support-enable-or-disable-schema-upload-at-the-broker-level-pr-12786" title="Direct link to support-enable-or-disable-schema-upload-at-the-broker-level-pr-12786">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="issue-3">Issue<a href="#issue-3" class="hash-link" aria-label="Direct link to Issue" title="Direct link to Issue">​</a></h4><p>Previously, Pulsar didn't support enabling or disabling schema upload at the broker level.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="resolution-3">Resolution<a href="#resolution-3" class="hash-link" aria-label="Direct link to Resolution" title="Direct link to Resolution">​</a></h4><p>Added the configuration <code>isSchemaAutoUploadEnabled</code> on the broker side.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="readers-can-read-the-latest-messages-in-compacted-topics-pr-14449">Readers can read the latest messages in compacted topics. <a href="https://github.com/apache/pulsar/pull/14449" target="_blank" rel="noopener noreferrer">PR-14449</a><a href="#readers-can-read-the-latest-messages-in-compacted-topics-pr-14449" class="hash-link" aria-label="Direct link to readers-can-read-the-latest-messages-in-compacted-topics-pr-14449" title="Direct link to readers-can-read-the-latest-messages-in-compacted-topics-pr-14449">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="issue-4">Issue<a href="#issue-4" class="hash-link" aria-label="Direct link to Issue" title="Direct link to Issue">​</a></h4><p>Previously, readers were not able to read the latest messages in compacted topics if readers enabled <code>readCompacted</code> and all the data of topics has been compacted to compacted ledgers.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="resolution-4">Resolution<a href="#resolution-4" class="hash-link" aria-label="Direct link to Resolution" title="Direct link to Resolution">​</a></h4><p>Added the <code>forceReset</code> configuration for the managed cursor, so that the cursor could be reset to a given position and readers can read data from compacted ledgers. </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="transaction-sequenceid-can-be-recovered-correctly-pr-13209">Transaction sequenceId can be recovered correctly. <a href="https://github.com/apache/pulsar/pull/13209" target="_blank" rel="noopener noreferrer">PR-13209</a><a href="#transaction-sequenceid-can-be-recovered-correctly-pr-13209" class="hash-link" aria-label="Direct link to transaction-sequenceid-can-be-recovered-correctly-pr-13209" title="Direct link to transaction-sequenceid-can-be-recovered-correctly-pr-13209">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="issue-5">Issue<a href="#issue-5" class="hash-link" aria-label="Direct link to Issue" title="Direct link to Issue">​</a></h4><p>Previously, the wrong transaction sequenceId was recovered due to incorrect <code>managedLedger</code> properties.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="resolution-5">Resolution<a href="#resolution-5" class="hash-link" aria-label="Direct link to Resolution" title="Direct link to Resolution">​</a></h4><p>Used <code>ManagedLedgerInterceptor </code> to update current sequenceId to <code>managedLedger</code> properties and more.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="transactions-performance-test-tool-is-available-pr-11933">Transactions performance test tool is available. <a href="https://github.com/apache/pulsar/pull/11933" target="_blank" rel="noopener noreferrer">PR-11933</a><a href="#transactions-performance-test-tool-is-available-pr-11933" class="hash-link" aria-label="Direct link to transactions-performance-test-tool-is-available-pr-11933" title="Direct link to transactions-performance-test-tool-is-available-pr-11933">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="issue-6">Issue<a href="#issue-6" class="hash-link" aria-label="Direct link to Issue" title="Direct link to Issue">​</a></h4><p>Previously, it was hard to test transaction performance (such as the delay and rate of sending and consuming messages) when opening a transaction.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="resolution-6">Resolution<a href="#resolution-6" class="hash-link" aria-label="Direct link to Resolution" title="Direct link to Resolution">​</a></h4><p>Added <code>PerformanceTransaction</code> class to support this enhancement.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="port-exhaustion-and-connection-issues-no-longer-exist-in-pulsar-proxy-pr-14078">Port exhaustion and connection issues no longer exist in Pulsar Proxy. <a href="https://github.com/apache/pulsar/pull/14078" target="_blank" rel="noopener noreferrer">PR-14078</a><a href="#port-exhaustion-and-connection-issues-no-longer-exist-in-pulsar-proxy-pr-14078" class="hash-link" aria-label="Direct link to port-exhaustion-and-connection-issues-no-longer-exist-in-pulsar-proxy-pr-14078" title="Direct link to port-exhaustion-and-connection-issues-no-longer-exist-in-pulsar-proxy-pr-14078">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="issue-7">Issue<a href="#issue-7" class="hash-link" aria-label="Direct link to Issue" title="Direct link to Issue">​</a></h4><p>Previously, Pulsar proxy would get into a state where it stopped proxying broker connections while Admin API proxying kept working.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="resolution-7">Resolution<a href="#resolution-7" class="hash-link" aria-label="Direct link to Resolution" title="Direct link to Resolution">​</a></h4><p>Optimized the proxy connection to fail-fast if the target broker was not active, added connect timeout handling to proxy connection, and more.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="no-race-condition-in-opsendmsgqueue-when-publishing-messages-pr-14231">No race condition in <code>OpSendMsgQueue</code> when publishing messages. <a href="https://github.com/apache/pulsar/pull/14231" target="_blank" rel="noopener noreferrer">PR-14231</a><a href="#no-race-condition-in-opsendmsgqueue-when-publishing-messages-pr-14231" class="hash-link" aria-label="Direct link to no-race-condition-in-opsendmsgqueue-when-publishing-messages-pr-14231" title="Direct link to no-race-condition-in-opsendmsgqueue-when-publishing-messages-pr-14231">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="issue-8">Issue<a href="#issue-8" class="hash-link" aria-label="Direct link to Issue" title="Direct link to Issue">​</a></h4><p>After the method <code>getPendingQueueSize()</code> was called and the send receipt came back, the peek from the <code>pendingMessages</code> might get NPE during the process.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="resolution-8">Resolution<a href="#resolution-8" class="hash-link" aria-label="Direct link to Resolution" title="Direct link to Resolution">​</a></h4><p>Added a thread-safe message count object in <code>OpSendMsgQueue</code> for each compute process.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="change-contextclassloader-to-narclassloader-in-additionalservlet-pr-13501">Change <code>ContextClassLoader</code> to <code>NarClassLoader</code> in AdditionalServlet. <a href="https://github.com/apache/pulsar/pull/13501" target="_blank" rel="noopener noreferrer">PR-13501</a><a href="#change-contextclassloader-to-narclassloader-in-additionalservlet-pr-13501" class="hash-link" aria-label="Direct link to change-contextclassloader-to-narclassloader-in-additionalservlet-pr-13501" title="Direct link to change-contextclassloader-to-narclassloader-in-additionalservlet-pr-13501">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="issue-9">Issue<a href="#issue-9" class="hash-link" aria-label="Direct link to Issue" title="Direct link to Issue">​</a></h4><p>Previously, if a class was dynamically loaded by <code>NarClassLoader</code>, <code>ClassNotFoundException</code> occurred when it was used by the default class load.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="resolution-9">Resolution<a href="#resolution-9" class="hash-link" aria-label="Direct link to Resolution" title="Direct link to Resolution">​</a></h4><p>Changed context class loader through <code>Thread.currentThread().setContextClassLoader(classLoader)</code> before every plugin calling back and changed the context class loader back to original class loader afterwards.</p><h1>What’s Next?</h1><p>If you are interested in learning more about Pulsar 2.9.2, you can <a href="https://pulsar.apache.org/en/versions/" target="_blank" rel="noopener noreferrer">download</a> and try it out now! </p><p><strong>Pulsar Summit San Francisco 2022</strong> will take place on August 18th, 2022. <a href="https://pulsar-summit.org/" target="_blank" rel="noopener noreferrer">Register now</a> and help us make it an even bigger success by spreading the word on social media!</p><p>For more information about the Apache Pulsar project and current progress, visit
the <a href="https://pulsar.apache.org" target="_blank" rel="noopener noreferrer">Pulsar website</a>, follow the project on Twitter <a href="https://twitter.com/apache_pulsar" target="_blank" rel="noopener noreferrer">@apache_pulsar</a>, and join <a href="https://apache-pulsar.herokuapp.com/" target="_blank" rel="noopener noreferrer">Pulsar Slack</a>!</p>]]></content>
        <author>
            <name>gaoran10, Anonymitaet</name>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[What’s New in Apache Pulsar 2.7.4]]></title>
        <id>https://pulsar.apache.org/blog/2021/12/14/Apache-Pulsar-2-7-4</id>
        <link href="https://pulsar.apache.org/blog/2021/12/14/Apache-Pulsar-2-7-4"/>
        <updated>2021-12-14T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[The Apache Pulsar community releases version 2.7.4! 32 contributors provided improvements and bug fixes that delivered 98 commits.]]></summary>
        <content type="html"><![CDATA[<p>The Apache Pulsar community releases version 2.7.4! 32 contributors provided improvements and bug fixes that delivered 98 commits.</p><p>Highlights of this release are as below:</p><ul><li><p>Upgrade Log4j to 2.17.0 - <a href="https://pulsar.apache.org/blog/2021/12/11/Log4j-CVE/" target="_blank" rel="noopener noreferrer">CVE-2021-45105</a>. <a href="https://github.com/apache/pulsar/pull/13392" target="_blank" rel="noopener noreferrer">PR-13392</a></p></li><li><p><code>ManagedLedger</code> can be referenced correctly when <code>OpAddEntry</code> is recycled. <a href="https://github.com/apache/pulsar/pull/12103" target="_blank" rel="noopener noreferrer">PR-12103</a></p></li><li><p>NPE does not occur on <code>OpAddEntry</code> while ManagedLedger is closing. <a href="https://github.com/apache/pulsar/pull/12364" target="_blank" rel="noopener noreferrer">PR-12364</a></p></li></ul><p>This blog walks through the most noteworthy changes grouped by the affected functionalities. For the complete list including all enhancements and bug fixes, check out the <a href="https://pulsar.apache.org/en/release-notes/#274" target="_blank" rel="noopener noreferrer">Pulsar 2.7.4 Release Notes</a>.</p><h1>Notable bug fixes and enhancements</h1><h3 class="anchor anchorWithStickyNavbar_LWe7" id="upgrade-log4j-to-2170---cve-2021-45105-pr-13392">Upgrade Log4j to 2.17.0 - <a href="https://pulsar.apache.org/blog/2021/12/11/Log4j-CVE/" target="_blank" rel="noopener noreferrer">CVE-2021-45105</a>. <a href="https://github.com/apache/pulsar/pull/13392" target="_blank" rel="noopener noreferrer">PR-13392</a><a href="#upgrade-log4j-to-2170---cve-2021-45105-pr-13392" class="hash-link" aria-label="Direct link to upgrade-log4j-to-2170---cve-2021-45105-pr-13392" title="Direct link to upgrade-log4j-to-2170---cve-2021-45105-pr-13392">​</a></h3><ul><li><p><strong>Issue</strong></p><p>A serious vulnerability was reported regarding Log4j that can allow remote execution for attackers. The vulnerability issue is described and tracked under <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228" target="_blank" rel="noopener noreferrer">CVE-2021-44228</a>.</p></li><li><p><strong>Resolution</strong></p><p>Pulsar 2.7.4 upgraded Log4j to 2.17.0.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="managedledger-can-be-referenced-correctly-when-opaddentry-is-recycled-pr-12103"><code>ManagedLedger</code> can be referenced correctly when <code>OpAddEntry</code> is recycled. <a href="https://github.com/apache/pulsar/pull/12103" target="_blank" rel="noopener noreferrer">PR-12103</a><a href="#managedledger-can-be-referenced-correctly-when-opaddentry-is-recycled-pr-12103" class="hash-link" aria-label="Direct link to managedledger-can-be-referenced-correctly-when-opaddentry-is-recycled-pr-12103" title="Direct link to managedledger-can-be-referenced-correctly-when-opaddentry-is-recycled-pr-12103">​</a></h3><ul><li><p><strong>Issue</strong></p><p>Previously, after a write failure, a task was scheduled in the background to force close the ledger and trigger the creation of  a new ledger. If the <code>OpAddEntry</code> instance was already recycled, that could lead to either an NPE or undefined behavior.</p></li><li><p><strong>Resolution</strong></p><p>The <code>ManagedLedgerImpl</code> object reference is copied to a final variable so the background task will not be dependent on the lifecycle of the <code>OpAddEntry</code> instance.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="no-potential-race-condition-in-the-blobstorebackedreadhandler-pr-12123">No potential race condition in the <code>BlobStoreBackedReadHandler</code>. <a href="https://github.com/apache/pulsar/pull/12123" target="_blank" rel="noopener noreferrer">PR-12123</a><a href="#no-potential-race-condition-in-the-blobstorebackedreadhandler-pr-12123" class="hash-link" aria-label="Direct link to no-potential-race-condition-in-the-blobstorebackedreadhandler-pr-12123" title="Direct link to no-potential-race-condition-in-the-blobstorebackedreadhandler-pr-12123">​</a></h3><ul><li><p><strong>Issue</strong></p><p>Previously, <code>BlobStoreBackedReadHandler</code> entered an infinite loop when reading an offload ledger. There was a race condition between the operation of reading entries and closing BlobStoreBackedReadHandler.</p></li><li><p><strong>Resolution</strong></p><p>Added a state check before reading entries and made the <code>BlobStoreBackedReadHandler</code> exit loop when the <code>entryID</code> is bigger than the <code>lastEntryID</code>.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="npe-does-not-occur-on-opaddentry-while-managedledger-is-closing-pr-12364">NPE does not occur on <code>OpAddEntry</code> while ManagedLedger is closing. <a href="https://github.com/apache/pulsar/pull/12364" target="_blank" rel="noopener noreferrer">PR-12364</a><a href="#npe-does-not-occur-on-opaddentry-while-managedledger-is-closing-pr-12364" class="hash-link" aria-label="Direct link to npe-does-not-occur-on-opaddentry-while-managedledger-is-closing-pr-12364" title="Direct link to npe-does-not-occur-on-opaddentry-while-managedledger-is-closing-pr-12364">​</a></h3><ul><li><p><strong>Issue</strong> </p><p>Previously, the test <code>ManagedLedgerBkTest#managedLedgerClosed</code> closed ManagedLedger object on some <code>asyncAddEntry</code> operations and failed with NPE.</p></li><li><p><strong>Resolution</strong></p><p>Closed <code>OpAddEntry</code>  when <code> ManagedLedger</code> signaled  <code>OpAddEntry</code> to fail. In this way, the <code>OpAddEntry</code> object was correctly recycled and the failed callback was correctly triggered.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="set-a-topic-policy-through-the-topic-name-of-a-partition-correctly-pr-11294">Set a topic policy through the topic name of a partition correctly. <a href="https://github.com/apache/pulsar/pull/11294" target="_blank" rel="noopener noreferrer">PR-11294</a><a href="#set-a-topic-policy-through-the-topic-name-of-a-partition-correctly-pr-11294" class="hash-link" aria-label="Direct link to set-a-topic-policy-through-the-topic-name-of-a-partition-correctly-pr-11294" title="Direct link to set-a-topic-policy-through-the-topic-name-of-a-partition-correctly-pr-11294">​</a></h3><ul><li><p><strong>Issue</strong></p><p>Previously, the topic name of a partition could not be used to set a topic policy.</p></li><li><p><strong>Resolution</strong></p><p>Allowed setting a topic policy through a topic name of a partition by converting the topic name of a partition in <code>SystemTopicBasedTopicPoliciesService</code>.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="dispatch-rate-limiter-takes-effect-for-consumers-pr-8611">Dispatch rate limiter takes effect for consumers. <a href="https://github.com/apache/pulsar/pull/8611" target="_blank" rel="noopener noreferrer">PR-8611</a><a href="#dispatch-rate-limiter-takes-effect-for-consumers-pr-8611" class="hash-link" aria-label="Direct link to dispatch-rate-limiter-takes-effect-for-consumers-pr-8611" title="Direct link to dispatch-rate-limiter-takes-effect-for-consumers-pr-8611">​</a></h3><ul><li><p><strong>Issue</strong></p><p>Previously, dispatch rate limiter did not take effect in cases where all consumers started reading in the next second since <code>acquiredPermits</code> was reset to 0 every second.</p></li><li><p><strong>Resolution</strong></p><p>Changed the behaviour of <code>DispatchRateLimiter</code> by minus <code>permits</code> every second instead of reset <code>acquiredPermits</code> to 0. Consumers stopped reading entries temporarily until <code>acquiredPermits</code> returned to a value less than <code>permits</code> .</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="npe-does-not-occur-when-executing-unload-bundles-operations-pr-11310">NPE does not occur when executing unload bundles operations. <a href="https://github.com/apache/pulsar/pull/11310" target="_blank" rel="noopener noreferrer">PR-11310</a><a href="#npe-does-not-occur-when-executing-unload-bundles-operations-pr-11310" class="hash-link" aria-label="Direct link to npe-does-not-occur-when-executing-unload-bundles-operations-pr-11310" title="Direct link to npe-does-not-occur-when-executing-unload-bundles-operations-pr-11310">​</a></h3><ul><li><p><strong>Issue</strong></p><p>When performing pressure tests on persistent partitioned topics, NPE occurred when executing unload bundles operations. Concurrently, producers did not write messages.</p></li><li><p><strong>Resolution</strong></p><p>Added more safety checks to fix this issue.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fix-inconsistent-behavior-for-namespace-bundles-cache-pr-11346">Fix inconsistent behavior for Namespace bundles cache. <a href="https://github.com/apache/pulsar/pull/11346" target="_blank" rel="noopener noreferrer">PR-11346</a><a href="#fix-inconsistent-behavior-for-namespace-bundles-cache-pr-11346" class="hash-link" aria-label="Direct link to fix-inconsistent-behavior-for-namespace-bundles-cache-pr-11346" title="Direct link to fix-inconsistent-behavior-for-namespace-bundles-cache-pr-11346">​</a></h3><ul><li><p><strong>Issue</strong></p><p>Previously, namespace bundle cache was not invalidated after a namespace was deleted.</p></li><li><p><strong>Resolution</strong></p><p>Invalidated namespace policy cache when bundle cache was invalidated.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="close-the-replicator-and-replication-client-after-a-cluster-is-deleted-pr-11342">Close the replicator and replication client after a cluster is deleted. <a href="https://github.com/apache/pulsar/pull/11342" target="_blank" rel="noopener noreferrer">PR-11342</a><a href="#close-the-replicator-and-replication-client-after-a-cluster-is-deleted-pr-11342" class="hash-link" aria-label="Direct link to close-the-replicator-and-replication-client-after-a-cluster-is-deleted-pr-11342" title="Direct link to close-the-replicator-and-replication-client-after-a-cluster-is-deleted-pr-11342">​</a></h3><ul><li><p><strong>Issue</strong></p><p>Previously, the replicator and the replication client were not closed after a cluster was deleted. The producer of the replicator would then try to reconnect to the deleted cluster continuously.</p></li><li><p><strong>Resolution</strong></p><p>Closed the relative replicator and replication client.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="publish-rate-limiter-takes-effect-as-expected-pr-10384">Publish rate limiter takes effect as expected. <a href="https://github.com/apache/pulsar/pull/10384" target="_blank" rel="noopener noreferrer">PR-10384</a><a href="#publish-rate-limiter-takes-effect-as-expected-pr-10384" class="hash-link" aria-label="Direct link to publish-rate-limiter-takes-effect-as-expected-pr-10384" title="Direct link to publish-rate-limiter-takes-effect-as-expected-pr-10384">​</a></h3><ul><li><p><strong>Issue</strong></p><p>Previously, there were various issues if <code>preciseTopicPublishRateLimiterEnable</code>  was set to <code>true</code> for rate limiting:</p><ul><li><p>Updating the limits did not set a boundary when changing the limits from a bounded limit to an unbounded limit.</p></li><li><p>Each topic created a scheduler thread for each limiter instance.</p></li><li><p>Topics did not release the scheduler thread when the topic was unloaded or the operation closed.</p></li><li><p>Updating the limits did not close the scheduler thread related to the replaced limiter instance</p></li></ul></li><li><p><strong>Resolution</strong></p><ul><li><p>Cleaned up the previous limiter instances before creating new limiter instances.</p></li><li><p>Used <code>brokerService.pulsar().getExecutor()</code> as the scheduler for the rate limiter instances.</p></li><li><p>Added resource cleanup hooks for topic closing (unload).</p></li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="clean-up-newly-created--ledgers-if-fails-to-update-znode-list-pr-12015">Clean up newly created  ledgers if fails to update ZNode list. <a href="https://github.com/apache/pulsar/pull/12015" target="_blank" rel="noopener noreferrer">PR-12015</a><a href="#clean-up-newly-created--ledgers-if-fails-to-update-znode-list-pr-12015" class="hash-link" aria-label="Direct link to clean-up-newly-created--ledgers-if-fails-to-update-znode-list-pr-12015" title="Direct link to clean-up-newly-created--ledgers-if-fails-to-update-znode-list-pr-12015">​</a></h3><ul><li><p><strong>Issue</strong></p><p>When updating a ZNode list, ZooKeeper threw an exception and did not clean up the created ledger. Newly created ledgers were not  indexed to a topic <code>managedLedger</code> list and could not be cleared up as topic retention. Also, ZNode numbers increased in ZooKeeper if the ZNode version mismatch exception was thrown out.</p></li><li><p><strong>Resolution</strong></p><p>Deleted the created ledger from broker cache and BookKeeper regardless of exception type when the ZNode list failed to update.</p></li></ul><h1>What’s Next?</h1><p>If you are interested in learning more about Pulsar 2.7.4, you can <a href="https://pulsar.apache.org/en/versions/" target="_blank" rel="noopener noreferrer">download</a> and try it out now! </p><p>Pulsar Summit Asia 2021 will take place on January 15-16, 2022. <a href="https://pulsar-summit.org/" target="_blank" rel="noopener noreferrer">Register now</a> and help us make it an even bigger success by spreading the word on social media!</p><p>For more information about the Apache Pulsar project and current  progress, visit
the <a href="https://pulsar.apache.org" target="_blank" rel="noopener noreferrer">Pulsar website</a>, follow the project on Twitter <a href="https://twitter.com/apache_pulsar" target="_blank" rel="noopener noreferrer">@apache_pulsar</a>, and join <a href="https://apache-pulsar.herokuapp.com/" target="_blank" rel="noopener noreferrer">Pulsar Slack</a>!</p>]]></content>
        <author>
            <name>Technoboy-, Anonymitaet</name>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Log4j2 Zero Day vulnerability (CVE-2021-44228)]]></title>
        <id>https://pulsar.apache.org/blog/2021/12/11/Log4j-CVE</id>
        <link href="https://pulsar.apache.org/blog/2021/12/11/Log4j-CVE"/>
        <updated>2021-12-11T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Yesterday, a new serious vulnerability was reported regarding Log4j that can]]></summary>
        <content type="html"><![CDATA[<p>Yesterday, a new serious vulnerability was reported regarding Log4j that can
allow remote execution for attackers.</p><p>The vulnerability issue is described and tracked under <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228" target="_blank" rel="noopener noreferrer">CVE-2021-44228</a>.</p><p>Current releases of Apache Pulsar are bundling Log4j2 versions that are affected by this vulnerability.
Default configuration, combined with JVM version and other factors, can render it exploitable.
We strongly recommend to follow the advisory of the Apache Log4j community and patch your systems
as soon as possible, as well as looking for unexpected behavior in your Pulsar logs.</p><p>There are 2 workarounds to patch a Pulsar deployments. You can set either of:</p><ol><li>Java property: <code>-Dlog4j2.formatMsgNoLookups=true</code></li><li>Environment variable: <code>LOG4J_FORMAT_MSG_NO_LOOKUPS=true</code></li></ol><p>Both approaches are effective in mitigating the vulnerability for Pulsar
services.</p><p>Additionally, when running Pulsar Functions with Kubernetes runtime, you should update
your Docker images, following the example described <a href="https://github.com/lhotari/pulsar-docker-images-patch-CVE-2021-44228" target="_blank" rel="noopener noreferrer">here</a>.</p><p>If you are using the Pulsar Helm Chart for deploying in Kubernetes, a <a href="https://github.com/apache/pulsar-helm-chart/releases/tag/pulsar-2.7.6" target="_blank" rel="noopener noreferrer">new
version of the chart</a> is already available and it applies the above mentioned workaround.
If upgrading is not an option, you may also mitigate by adding <code>-Dlog4j2.formatMsgNoLookups=true</code> to the <code>PULSAR_EXTRA_OPTS</code> in the <code>configData</code> section for proxy, broker, bookkeeper, zookeeper, auto-recovery, and relative components in the helm values file.</p><p>We are already preparing new patch releases, 2.7.4, 2.8.2 and 2.9.1. These
releases will be ready in the next few days and will bundle the Log4j2 2.15.0,
which contains the vulnerability fix.</p>]]></content>
        <author>
            <name>Matteo Merli</name>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Apache Pulsar 2.8.1]]></title>
        <id>https://pulsar.apache.org/blog/2021/09/23/Apache-Pulsar-2-8-1</id>
        <link href="https://pulsar.apache.org/blog/2021/09/23/Apache-Pulsar-2-8-1"/>
        <updated>2021-09-23T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[The Apache Pulsar community releases version 2.8.1! 49 contributors provided improvements and bug fixes that delivered 213 commits.]]></summary>
        <content type="html"><![CDATA[<p>The Apache Pulsar community releases version 2.8.1! 49 contributors provided improvements and bug fixes that delivered 213 commits.</p><p>Highlights of this release are as below:</p><ul><li><p>Key-shared subscriptions no longer stop dispatching to consumers when repeatedly opening and closing consumers. <a href="https://github.com/apache/pulsar/pull/10920" target="_blank" rel="noopener noreferrer">PR-10920</a></p></li><li><p>System topic no longer has potential data loss when not configured for compaction. <a href="https://github.com/apache/pulsar/pull/11003" target="_blank" rel="noopener noreferrer">PR-11003</a></p></li><li><p>Consumers are not allowed to read data on topics to which they are not subscribed. <a href="https://github.com/apache/pulsar/pull/11912" target="_blank" rel="noopener noreferrer">PR-11912</a></p></li></ul><p>This blog walks through the most noteworthy changes grouped by component. For the complete list including all features, enhancements, and bug fixes, check out the <a href="https://pulsar.apache.org/release-notes/#281-mdash-2021-09-10-a-id281a" target="_blank" rel="noopener noreferrer">Pulsar 2.8.1 Release Notes</a>.</p><h1>Notable bug fixes and enhancements</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="broker">Broker<a href="#broker" class="hash-link" aria-label="Direct link to Broker" title="Direct link to Broker">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="precise-publish-rate-limit-takes-effect-as-expected-pr-11446">Precise publish rate limit takes effect as expected. <a href="https://github.com/apache/pulsar/pull/11446" target="_blank" rel="noopener noreferrer">PR-11446</a><a href="#precise-publish-rate-limit-takes-effect-as-expected-pr-11446" class="hash-link" aria-label="Direct link to precise-publish-rate-limit-takes-effect-as-expected-pr-11446" title="Direct link to precise-publish-rate-limit-takes-effect-as-expected-pr-11446">​</a></h3><p><strong>Issue</strong>: Previously, when setting precise publish rate limits on topics, it did not work.</p><p><strong>Resolution</strong>: Implemented a new <code>RateLimiter</code> using the <code>LeakingBucket</code> and <code>FixedWindow</code> algorithms.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="messages-with-the-same-keys-are-delivered-to-the-correct-consumers-on-key-shared-subscriptions-pr-10762">Messages with the same keys are delivered to the correct consumers on Key-Shared subscriptions. <a href="https://github.com/apache/pulsar/pull/10762" target="_blank" rel="noopener noreferrer">PR-10762</a><a href="#messages-with-the-same-keys-are-delivered-to-the-correct-consumers-on-key-shared-subscriptions-pr-10762" class="hash-link" aria-label="Direct link to messages-with-the-same-keys-are-delivered-to-the-correct-consumers-on-key-shared-subscriptions-pr-10762" title="Direct link to messages-with-the-same-keys-are-delivered-to-the-correct-consumers-on-key-shared-subscriptions-pr-10762">​</a></h3><p><strong>Issue</strong>: Messages with the same keys were out of order when message redelivery occurred on a Key-Shared subscription.</p><p><strong>Resolution</strong>: When sending a message to <code>messagesToRedeliver</code>, the broker saved the hash value of the key. If the dispatcher attempted to send newer messages to the consumer that had a key corresponding to any one of the saved hash values, they were added to <code>messagesToRedeliver</code> instead of being sent. This prevented messages with the same key from being out of order.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="active-producers-with-the-same-name-are-no-longer-removed-from-the-topic-map-pr-11804">Active producers with the same name are no longer removed from the topic map. <a href="https://github.com/apache/pulsar/pull/11804" target="_blank" rel="noopener noreferrer">PR-11804</a><a href="#active-producers-with-the-same-name-are-no-longer-removed-from-the-topic-map-pr-11804" class="hash-link" aria-label="Direct link to active-producers-with-the-same-name-are-no-longer-removed-from-the-topic-map-pr-11804" title="Direct link to active-producers-with-the-same-name-are-no-longer-removed-from-the-topic-map-pr-11804">​</a></h3><p><strong>Issue</strong>: Previously, when there were producers with the same name, an error would be triggered and the old producer would be removed even though it was still writing to a topic.</p><p><strong>Resolution</strong>: Validated producers based on a connection ID (local &amp; remote addresses and unique ID) and a producer ID within that connection rather than a producer name.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="topics-in-a-fenced-state-can-recover-when-producers-continue-to-reconnect-to-brokers-pr-11737">Topics in a fenced state can recover when producers continue to reconnect to brokers. <a href="https://github.com/apache/pulsar/pull/11737" target="_blank" rel="noopener noreferrer">PR-11737</a><a href="#topics-in-a-fenced-state-can-recover-when-producers-continue-to-reconnect-to-brokers-pr-11737" class="hash-link" aria-label="Direct link to topics-in-a-fenced-state-can-recover-when-producers-continue-to-reconnect-to-brokers-pr-11737" title="Direct link to topics-in-a-fenced-state-can-recover-when-producers-continue-to-reconnect-to-brokers-pr-11737">​</a></h3><p><strong>Issue</strong>: Previously, when a producer continued to reconnect to a broker, the fenced state of the topic was always set to true, which caused the topic to be unable to recover.</p><p><strong>Resolution</strong>: Add an entry to <code>ManagedLedgerException</code> when the polled operation is not equal to the current operation.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="topic-properly-initializes-the-cursor-to-prevent-data-loss-pr-11547">Topic properly initializes the cursor to prevent data loss. <a href="https://github.com/apache/pulsar/pull/11547" target="_blank" rel="noopener noreferrer">PR-11547</a><a href="#topic-properly-initializes-the-cursor-to-prevent-data-loss-pr-11547" class="hash-link" aria-label="Direct link to topic-properly-initializes-the-cursor-to-prevent-data-loss-pr-11547" title="Direct link to topic-properly-initializes-the-cursor-to-prevent-data-loss-pr-11547">​</a></h3><p><strong>Issue</strong>: Previously, when subscribing to a topic with the earliest position, data would be lost because <code>ManagedLedger</code> used a wrong position to initialize a cursor.</p><p><strong>Resolution</strong>: Added a test to check a cursor's position when subscribing to a topic with the earliest position.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="deadlock-no-longer-occurs-when-using-hasmessageavailableasync-and-readnextasync-pr-11183">Deadlock no longer occurs when using <code>hasMessageAvailableAsync</code> and <code>readNextAsync</code>. <a href="https://github.com/apache/pulsar/pull/11183" target="_blank" rel="noopener noreferrer">PR-11183</a><a href="#deadlock-no-longer-occurs-when-using-hasmessageavailableasync-and-readnextasync-pr-11183" class="hash-link" aria-label="Direct link to deadlock-no-longer-occurs-when-using-hasmessageavailableasync-and-readnextasync-pr-11183" title="Direct link to deadlock-no-longer-occurs-when-using-hasmessageavailableasync-and-readnextasync-pr-11183">​</a></h3><p><strong>Issue</strong>: Previously, when messages were added to an incoming queue, a deadlock might occur. The deadlock might happen in two possible scenarios. First, if the message was added to the queue before the message was read. Second, if <code>readNextAsync</code> was completed before <code>future.whenComplete</code> was called.</p><p><strong>Resolution</strong>: Used an internal thread to process the callback of <code>hasMessageAvailableAsync</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="memory-leak-does-not-occur-when-calling-getlastmessageid-api-pr-10977">Memory leak does not occur when calling getLastMessageId API. <a href="https://github.com/apache/pulsar/pull/10977" target="_blank" rel="noopener noreferrer">PR-10977</a><a href="#memory-leak-does-not-occur-when-calling-getlastmessageid-api-pr-10977" class="hash-link" aria-label="Direct link to memory-leak-does-not-occur-when-calling-getlastmessageid-api-pr-10977" title="Direct link to memory-leak-does-not-occur-when-calling-getlastmessageid-api-pr-10977">​</a></h3><p><strong>Issue</strong>: Previously, the broker ran out of memory when calling the <code>getLastMessageId</code> API.</p><p><strong>Resolution</strong>: Added the <code>entry.release()</code> call to the <code>PersistentTopic.getLastMessageId</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="compaction-is-triggered-for-system-topics-pr-10941">Compaction is triggered for system topics. <a href="https://github.com/apache/pulsar/pull/10941" target="_blank" rel="noopener noreferrer">PR-10941</a><a href="#compaction-is-triggered-for-system-topics-pr-10941" class="hash-link" aria-label="Direct link to compaction-is-triggered-for-system-topics-pr-10941" title="Direct link to compaction-is-triggered-for-system-topics-pr-10941">​</a></h3><p><strong>Issue</strong>: Previously, when a topic had only non-durable subscriptions, the compaction was not triggered because it had 0 estimated backlog size. </p><p><strong>Resolution</strong>: Used the total backlog size to trigger the compaction. Changed the behavior in the case of no durable subscriptions to use the total backlog size</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="key-shared-subscriptions-no-longer-stop-dispatching-to-consumers-when-repeatedly-opening-and-closing-consumers-pr-10920">Key-shared subscriptions no longer stop dispatching to consumers when repeatedly opening and closing consumers. <a href="https://github.com/apache/pulsar/pull/10920" target="_blank" rel="noopener noreferrer">PR-10920</a><a href="#key-shared-subscriptions-no-longer-stop-dispatching-to-consumers-when-repeatedly-opening-and-closing-consumers-pr-10920" class="hash-link" aria-label="Direct link to key-shared-subscriptions-no-longer-stop-dispatching-to-consumers-when-repeatedly-opening-and-closing-consumers-pr-10920" title="Direct link to key-shared-subscriptions-no-longer-stop-dispatching-to-consumers-when-repeatedly-opening-and-closing-consumers-pr-10920">​</a></h3><p><strong>Issue</strong>: Repeatedly opening and closing consumers with a Key-Shared subscription might occasionally stop dispatching messages to all consumers.</p><p><strong>Resolution</strong>: Moved the mark-delete position and removed the consumer from the selector before calling <code>removeConsumer()</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="consumers-are-not-allowed-to-read-data-on-topics-to-which-they-are-not-subscribed-pr-11912">Consumers are not allowed to read data on topics to which they are not subscribed. <a href="https://github.com/apache/pulsar/pull/11912" target="_blank" rel="noopener noreferrer">PR-11912</a><a href="#consumers-are-not-allowed-to-read-data-on-topics-to-which-they-are-not-subscribed-pr-11912" class="hash-link" aria-label="Direct link to consumers-are-not-allowed-to-read-data-on-topics-to-which-they-are-not-subscribed-pr-11912" title="Direct link to consumers-are-not-allowed-to-read-data-on-topics-to-which-they-are-not-subscribed-pr-11912">​</a></h3><p><strong>Issue</strong>: Previously, the request ledger was not checked whether it belonged to a consumer’s connected topic, which allowed the consumer to read data that does not belong to the connected topic.</p><p><strong>Resolution</strong>: Added a check on the <code>ManagedLedger</code> level before executing read operations. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="topic-policy">Topic Policy<a href="#topic-policy" class="hash-link" aria-label="Direct link to Topic Policy" title="Direct link to Topic Policy">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="retention-policy-works-as-expected-pr-11021">Retention policy works as expected. <a href="https://github.com/apache/pulsar/pull/11021" target="_blank" rel="noopener noreferrer">PR-11021</a><a href="#retention-policy-works-as-expected-pr-11021" class="hash-link" aria-label="Direct link to retention-policy-works-as-expected-pr-11021" title="Direct link to retention-policy-works-as-expected-pr-11021">​</a></h3><p><strong>Issue</strong>: Previously, the retention policy did not work because it was not set in the <code>managedLedger</code> configuration.</p><p><strong>Resolution</strong>: Set the retention policy in the <code>managedLedger</code> configuration to the <code>onUpdate</code> listener method.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="system-topic-no-longer-has-potential-data-loss-when-not-configured-for-compaction-pr-11003">System topic no longer has potential data loss when not configured for compaction. <a href="https://github.com/apache/pulsar/pull/11003" target="_blank" rel="noopener noreferrer">PR-11003</a><a href="#system-topic-no-longer-has-potential-data-loss-when-not-configured-for-compaction-pr-11003" class="hash-link" aria-label="Direct link to system-topic-no-longer-has-potential-data-loss-when-not-configured-for-compaction-pr-11003" title="Direct link to system-topic-no-longer-has-potential-data-loss-when-not-configured-for-compaction-pr-11003">​</a></h3><p><strong>Issue</strong>: Previously, data might be lost if there were no durable subscriptions on topics.</p><p><strong>Resolution</strong>: Leveraged the topic compaction cursor to retain data.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="proxy">Proxy<a href="#proxy" class="hash-link" aria-label="Direct link to Proxy" title="Direct link to Proxy">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pulsar-proxy-correctly-shuts-down-outbound-connections-pr-11848">Pulsar proxy correctly shuts down outbound connections. <a href="https://github.com/apache/pulsar/pull/11848" target="_blank" rel="noopener noreferrer">PR-11848</a><a href="#pulsar-proxy-correctly-shuts-down-outbound-connections-pr-11848" class="hash-link" aria-label="Direct link to pulsar-proxy-correctly-shuts-down-outbound-connections-pr-11848" title="Direct link to pulsar-proxy-correctly-shuts-down-outbound-connections-pr-11848">​</a></h3><p><strong>Issue</strong>: Previously, there was a memory leak of outgoing TCP connections in the Pulsar proxy because the <code>ProxyConnectionPool</code> instances were created outside the <code>PulsarClientImpl</code> instance and not closed when the client was closed.</p><p><strong>Resolution</strong>: Shut down the <code>ConnectionPool</code> correctly.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="function">Function<a href="#function" class="hash-link" aria-label="Direct link to Function" title="Direct link to Function">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pulsar-functions-support-protobuf-schema-pr-11709">Pulsar Functions support Protobuf schema. <a href="https://github.com/apache/pulsar/pull/11709" target="_blank" rel="noopener noreferrer">PR-11709</a><a href="#pulsar-functions-support-protobuf-schema-pr-11709" class="hash-link" aria-label="Direct link to pulsar-functions-support-protobuf-schema-pr-11709" title="Direct link to pulsar-functions-support-protobuf-schema-pr-11709">​</a></h3><p><strong>Issue</strong>: Previously, the exception <code>GeneratedMessageV3 is not assignable</code> was thrown when using a Protobuf schema.</p><p><strong>Resolution</strong>: Added the relevant dependencies to the Pulsar instance.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="client">Client<a href="#client" class="hash-link" aria-label="Direct link to Client" title="Direct link to Client">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="partitioned-topic-consumers-clean-up-resources-after-a-failure-pr-11754">Partitioned-topic consumers clean up resources after a failure. <a href="https://github.com/apache/pulsar/pull/11754" target="_blank" rel="noopener noreferrer">PR-11754</a><a href="#partitioned-topic-consumers-clean-up-resources-after-a-failure-pr-11754" class="hash-link" aria-label="Direct link to partitioned-topic-consumers-clean-up-resources-after-a-failure-pr-11754" title="Direct link to partitioned-topic-consumers-clean-up-resources-after-a-failure-pr-11754">​</a></h3><p><strong>Issue</strong>: Previously, partitioned-topic consumers did not clean up the resources when failing to create consumers. If this failure occurred with non-recoverable errors, it triggered a memory leak, which made applications unstable.</p><p><strong>Resolution</strong>: Closed and cleaned timer task references.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="race-conditions-do-not-occur-on-multi-topic-consumers-pr-11764">Race conditions do not occur on multi-topic consumers. <a href="https://github.com/apache/pulsar/pull/11764" target="_blank" rel="noopener noreferrer">PR-11764</a><a href="#race-conditions-do-not-occur-on-multi-topic-consumers-pr-11764" class="hash-link" aria-label="Direct link to race-conditions-do-not-occur-on-multi-topic-consumers-pr-11764" title="Direct link to race-conditions-do-not-occur-on-multi-topic-consumers-pr-11764">​</a></h3><p><strong>Issue</strong>: Previously, there was a race condition between 2 threads when one of the individual consumers was in a "paused" state and the shared queue was full. </p><p><strong>Resolution</strong>: Validated the state of the shared queue after marking the consumer as "paused". The consumer is not blocked if the other thread has emptied the queue in the meantime. </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="consumers-are-not-blocked-on-batchreceive-pr-11691">Consumers are not blocked on <code>batchReceive</code>. <a href="https://github.com/apache/pulsar/pull/11691" target="_blank" rel="noopener noreferrer">PR-11691</a><a href="#consumers-are-not-blocked-on-batchreceive-pr-11691" class="hash-link" aria-label="Direct link to consumers-are-not-blocked-on-batchreceive-pr-11691" title="Direct link to consumers-are-not-blocked-on-batchreceive-pr-11691">​</a></h3><p><strong>Issue</strong>: Previously, consumers were blocked when <code>Consumer.batchReceive()</code> was called concurrently by different threads due to a race condition in <code>ConsumerBase.java</code>.</p><p><strong>Resolution</strong>: Put <code>pinnedInternalExecutor</code> in <code>ConsumerBase</code> to allow batch timer, <code>ConsumerImpl</code>, and <code>MultiTopicsConsumerImpl</code> to submit work in a single thread.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="python-client-correctly-enables-custom-logging-pr-11882">Python client correctly enables custom logging. <a href="https://github.com/apache/pulsar/pull/11882" target="_blank" rel="noopener noreferrer">PR-11882</a><a href="#python-client-correctly-enables-custom-logging-pr-11882" class="hash-link" aria-label="Direct link to python-client-correctly-enables-custom-logging-pr-11882" title="Direct link to python-client-correctly-enables-custom-logging-pr-11882">​</a></h3><p><strong>Issue</strong>: Previously, deadlock might happen when custom logging was enabled in the Python client.</p><p><strong>Resolution</strong>: Detached the worker thread and reduced log level.</p><h1>What is Next?</h1><p>If you are interested in learning more about Pulsar 2.8.1, you can <a href="https://pulsar.apache.org/download/" target="_blank" rel="noopener noreferrer">download</a> and try it out now! </p><p>The first-ever Pulsar Virtual Summit Europe 2021 will take place in October. <a href="https://hopin.com/events/pulsar-summit-europe-2021" target="_blank" rel="noopener noreferrer">Register now</a> and help us make it an even bigger success by spreading the word on social media!</p><p>For more information about the Apache Pulsar project and the progress, visit
the <a href="https://pulsar.apache.org" target="_blank" rel="noopener noreferrer">Pulsar website</a>, follow the project on Twitter <a href="https://twitter.com/apache_pulsar" target="_blank" rel="noopener noreferrer">@apache_pulsar</a>, and join <a href="https://apache-pulsar.herokuapp.com/" target="_blank" rel="noopener noreferrer">Pulsar Slack</a>!</p>]]></content>
        <author>
            <name>Hang Chen, Anonymitaet</name>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Announcing Pulsar Summit Asia 2021: CFP Is Open!]]></title>
        <id>https://pulsar.apache.org/blog/2021/08/18/asia-cfp</id>
        <link href="https://pulsar.apache.org/blog/2021/08/18/asia-cfp"/>
        <updated>2021-08-18T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[We’re proud to announce the Pulsar Summit Asia 2021!]]></summary>
        <content type="html"><![CDATA[<p>We’re proud to announce the Pulsar Summit Asia 2021!</p><p>2021 has been a remarkable year for the Apache Pulsar community. <a href="https://streamnative.io/en/blog/community/2021-06-14-pulsar-hits-its-400th-contributor-and-passes-kafka-in-monthly-active-contributors" target="_blank" rel="noopener noreferrer">Both the technology and community are growing rapidly this year</a>, and <a href="https://www.na2021.pulsar-summit.org" target="_blank" rel="noopener noreferrer">Pulsar Virtual Summit North America 2021</a> was a big success with 33 break-out sessions and more than 550 registrations.</p><p>Last year, <a href="https://pulsar-summit.org/en/event/asia-2020" target="_blank" rel="noopener noreferrer">Pulsar Summit Asia</a> featured more than 40 interactive sessions by tech leads, open-source developers, software engineers, and software architects from Tencent Group, BIGO, Kingsoft Cloud, Splunk, Yahoo! JAPAN, Nutanix, Dada Group, TIBCO, Huawei Cloud, and more. The conference garnered nearly 1,000 attendees around the globe mostly from Asia, including attendees from top tech, fintech and media companies.</p><p>Cumulatively, the Pulsar Summits drew more than 100 speakers, thousands of attendees, and hundreds of companies from diverse industries. It is a unique opportunity to network and learn about Pulsar project updates, ecosystem developments, best practices, and adoption stories.</p><p><strong>This year, the Pulsar Summit Asia will be hosted on November 20-21, 2021 by StreamNative. You can join us offline in Beijing for one day of Pulsar Training and one day of keynotes and breakout sessions. All the talks will be streamed live online.</strong></p><h1>CFP Details</h1><p>Join us and speak at the Pulsar Summit Asia 2021!
We are looking for Pulsar stories that are innovative, informative, or thought-provoking. Here are some suggestions:</p><ul><li>Your Pulsar use case / success story</li><li>A technical deep dive</li><li>Pulsar best practices</li><li>Pulsar ecosystem updates</li></ul><p>To speak at the summit, please <a href="https://sessionize.com/pulsar-summit-asia-2021/" target="_blank" rel="noopener noreferrer">submit an abstract</a> about your presentation. Remember to keep your proposal short, relevant and engaging.</p><h1>First-time Speakers Welcomed!</h1><p>First time submitting? Don't feel intimidated. We strongly encourage first-time speakers to submit talks for the Pulsar Summit Asia 2021. If your submission is similar to a previous talk in the past Pulsar Summits, please include information on how this version will be different. We hope to see some exciting updates on the topic.</p><p>We welcome submissions from around the globe. Our hybrid conference model has taken time differences into consideration. After your talk is accepted, we will schedule the sessions and send you the presentation options. </p><h1>Speaker Benefits</h1><p>As a speaker, you will receive: </p><ul><li>The chance to demonstrate your experience and deep knowledge in the rapidly growing event streaming space.</li><li>Your name, title, company, and bio will be featured on the Pulsar Summit Asia 2021 website.</li><li>Your session will be added to the Pulsar Summit YouTube Channel and promoted on Twitter,  LinkedIn, and WeChat.</li><li>A professionally produced video of your presentation.
Exclusive Pulsar swag only available to the speakers.</li></ul><h1>Important Dates</h1><ul><li>CFP opens: August 18th, 2021 </li><li>CFP closes: September 8th, 2021 </li><li>Speaker notifications: September 22th, 2021</li><li>Schedule announcement: October 13th, 2021 </li></ul><p>Submissions are open until September 8th. If you want some advice or feedback on your proposal, or have any questions about the summit, please do not hesitate to contact us at <a href="mailto:organizers@pulsar-summit.org." target="_blank" rel="noopener noreferrer">organizers@pulsar-summit.org.</a> We are happy to help!</p><h1>Sponsor Pulsar Summit Asia</h1><p>Pulsar Summit is a conference for the community and sponsorship is needed. Sponsoring this event provides a great opportunity for your organization to further engage with the Apache Pulsar community. Contact us at <a href="mailto:organizers@pulsar-summit.org" target="_blank" rel="noopener noreferrer">organizers@pulsar-summit.org</a> to learn more.</p><p>Help us make Pulsar Summit Asia 2021 a big success by spreading the word and submitting your proposal! Follow Pulsar Summit on <a href="https://twitter.com/PulsarSummit" target="_blank" rel="noopener noreferrer">Twitter</a> to receive the latest updates of the conference.</p>]]></content>
        <author>
            <name>Dianjin</name>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Apache Pulsar 2.7.3]]></title>
        <id>https://pulsar.apache.org/blog/2021/08/11/Apache-Pulsar-2-7-3</id>
        <link href="https://pulsar.apache.org/blog/2021/08/11/Apache-Pulsar-2-7-3"/>
        <updated>2021-08-11T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[The Apache Pulsar community releases version 2.7.3! 34 contributors provided improvements and bug fixes that delivered 79 commits.]]></summary>
        <content type="html"><![CDATA[<p>The Apache Pulsar community releases version 2.7.3! 34 contributors provided improvements and bug fixes that delivered 79 commits.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="highlights">Highlights<a href="#highlights" class="hash-link" aria-label="Direct link to Highlights" title="Direct link to Highlights">​</a></h2><ul><li><p>Cursor reads adhere to the dispatch byte rate limiter setting and no longer cause unexpected results. <a href="https://github.com/apache/pulsar/pull/11249" target="_blank" rel="noopener noreferrer">PR-11249</a></p></li><li><p>The ledger rollover scheduled task runs as expected. <a href="https://github.com/apache/pulsar/pull/11226" target="_blank" rel="noopener noreferrer">PR-11226</a></p></li></ul><p>This blog walks through the most noteworthy changes. For the complete list including all enhancements and bug fixes, check out the <a href="https://pulsar.apache.org/release-notes/#273-mdash-2021-07-27-a-id273a" target="_blank" rel="noopener noreferrer">Pulsar 2.7.3 Release Notes</a>.</p><h1>Notable bug fixes and enhancements</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="broker">Broker<a href="#broker" class="hash-link" aria-label="Direct link to Broker" title="Direct link to Broker">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cursor-reads-adhere-to-the-dispatch-byte-rate-limiter-setting-pr-9826">Cursor reads adhere to the dispatch byte rate limiter setting. <a href="https://github.com/apache/pulsar/pull/9826" target="_blank" rel="noopener noreferrer">PR-9826</a><a href="#cursor-reads-adhere-to-the-dispatch-byte-rate-limiter-setting-pr-9826" class="hash-link" aria-label="Direct link to cursor-reads-adhere-to-the-dispatch-byte-rate-limiter-setting-pr-9826" title="Direct link to cursor-reads-adhere-to-the-dispatch-byte-rate-limiter-setting-pr-9826">​</a></h3><ul><li><p><strong>Issue</strong>: When using byte rates, the dispatch rates were not respected (regardless
of being a namespace or topic policy). </p></li><li><p><strong>Resolution</strong>: Fixed behavior of dispatch byte rate limiter setting. Cursor reads adhere to the setting and no longer cause unexpected results. </p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-ledger-rollover-scheduled-task-runs-as-expected-pr-11226">The ledger rollover scheduled task runs as expected. <a href="https://github.com/apache/pulsar/pull/11226" target="_blank" rel="noopener noreferrer">PR-11226</a><a href="#the-ledger-rollover-scheduled-task-runs-as-expected-pr-11226" class="hash-link" aria-label="Direct link to the-ledger-rollover-scheduled-task-runs-as-expected-pr-11226" title="Direct link to the-ledger-rollover-scheduled-task-runs-as-expected-pr-11226">​</a></h3><ul><li><p><strong>Issue</strong>: Previously, the ledger rollover scheduled task was executed before reaching the ledger maximum rollover time, which caused the ledger not to roll over in time. </p></li><li><p><strong>Resolution</strong>: Fixed the timing of the ledger rollover schedule, so the task runs only after the ledger is created successfully. </p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-topic-level-retention-policy-works-correctly-when-restarting-a-broker-pr-11136">The topic-level retention policy works correctly when restarting a broker. <a href="https://github.com/apache/pulsar/pull/11136" target="_blank" rel="noopener noreferrer">PR-11136</a><a href="#the-topic-level-retention-policy-works-correctly-when-restarting-a-broker-pr-11136" class="hash-link" aria-label="Direct link to the-topic-level-retention-policy-works-correctly-when-restarting-a-broker-pr-11136" title="Direct link to the-topic-level-retention-policy-works-correctly-when-restarting-a-broker-pr-11136">​</a></h3><ul><li><p><strong>Issue</strong>: Previously, when setting a topic-level retention policy for a topic and then restarting the broker, the topic-level retention policy did not work.</p></li><li><p><strong>Resolution</strong>: Fixed behavior of the policy so it replays all policy messages after initiating <code>policyCacheInitMap</code> and added a retention policy check test when restarting the broker.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-lastmessageid-api-call-no-longer-causes-a-memory-leak-pr-10977">The lastMessageId API call no longer causes a memory leak. <a href="https://github.com/apache/pulsar/pull/10977" target="_blank" rel="noopener noreferrer">PR-10977</a><a href="#the-lastmessageid-api-call-no-longer-causes-a-memory-leak-pr-10977" class="hash-link" aria-label="Direct link to the-lastmessageid-api-call-no-longer-causes-a-memory-leak-pr-10977" title="Direct link to the-lastmessageid-api-call-no-longer-causes-a-memory-leak-pr-10977">​</a></h3><ul><li><p><strong>Issue</strong>: Previously, there was a memory leak when calling the <code>lastMessageId</code> API, which caused the broker process to be stopped by Kubernetes. </p></li><li><p><strong>Resolution</strong>: Added the missing entry.release() call to PersistentTopic.getLastMessageId to ensure the broker does not run out of memory. </p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="zookeeper-reads-are-cached-by-brokers-pr-10594">ZooKeeper reads are cached by brokers. <a href="https://github.com/apache/pulsar/pull/10594" target="_blank" rel="noopener noreferrer">PR-10594</a><a href="#zookeeper-reads-are-cached-by-brokers-pr-10594" class="hash-link" aria-label="Direct link to zookeeper-reads-are-cached-by-brokers-pr-10594" title="Direct link to zookeeper-reads-are-cached-by-brokers-pr-10594">​</a></h3><ul><li><p><strong>Issue</strong>: When performing the admin operation to get the namespace of a tenant, ZooKeeper reads were issued on the ZooKeeper client and not getting cached by the brokers.</p></li><li><p><strong>Resolution</strong>: Fixed ZooKeeper caching when fetching a list of namespaces for a tenant.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="monitoring-threads-that-call-leaderserviceisleader-are-no-longer-blocked-pr-10512">Monitoring threads that call <code>LeaderService.isLeader()</code> are no longer blocked. <a href="https://github.com/apache/pulsar/pull/10512" target="_blank" rel="noopener noreferrer">PR-10512</a><a href="#monitoring-threads-that-call-leaderserviceisleader-are-no-longer-blocked-pr-10512" class="hash-link" aria-label="Direct link to monitoring-threads-that-call-leaderserviceisleader-are-no-longer-blocked-pr-10512" title="Direct link to monitoring-threads-that-call-leaderserviceisleader-are-no-longer-blocked-pr-10512">​</a></h3><ul><li><strong>Issue</strong>:  When <code>LeaderService</code> changed leadership status, it was locked with a <code>synchronized</code> block, which also blocked other threads calling <code>LeaderService.isLeader()</code>. </li><li><strong>Resolution</strong>: Fixed the deadlock condition on the monitoring thread so it is not blocked by <code>LeaderService.isLeader() by modifying </code>ClusterServiceCoordinator<code>and</code>WorkerStatsManager<code>to check if it is a leader from</code>MembershipManager`. </li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="hasmessageavailable-can-read-messages-successfully-pr-10414"><code>hasMessageAvailable</code> can read messages successfully. <a href="https://github.com/apache/pulsar/pull/10414" target="_blank" rel="noopener noreferrer">PR-10414</a><a href="#hasmessageavailable-can-read-messages-successfully-pr-10414" class="hash-link" aria-label="Direct link to hasmessageavailable-can-read-messages-successfully-pr-10414" title="Direct link to hasmessageavailable-can-read-messages-successfully-pr-10414">​</a></h3><ul><li><p><strong>Issue</strong>: When <code>hasMessageAvailableAsync</code> returned <code>true</code>, it could not read messages because messages were filtered by <code>acknowledgmentsGroupingTracker</code>. </p></li><li><p><strong>Resolution</strong>: Fixed the race conditions by modifying <code>acknowledgmentsGroupingTracker</code> to filter duplicate messages, and then cleanup the messages when the connection is open.</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="proxy">Proxy<a href="#proxy" class="hash-link" aria-label="Direct link to Proxy" title="Direct link to Proxy">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="proxy-supports-creating-partitioned-topics-automatically-pr-8048">Proxy supports creating partitioned topics automatically. <a href="https://github.com/apache/pulsar/pull/8048" target="_blank" rel="noopener noreferrer">PR-8048</a><a href="#proxy-supports-creating-partitioned-topics-automatically-pr-8048" class="hash-link" aria-label="Direct link to proxy-supports-creating-partitioned-topics-automatically-pr-8048" title="Direct link to proxy-supports-creating-partitioned-topics-automatically-pr-8048">​</a></h3><ul><li><p><strong>Issue</strong>: Proxies were not creating partitions because they were using the current ZooKeeper metadata.</p></li><li><p><strong>Resolution</strong>: Changed the proxy to handle <code>PartitionMetadataRequest</code> by selecting and fetching from an available broker instead of using current ZooKeeper metadata.</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pulsar-admin">Pulsar admin<a href="#pulsar-admin" class="hash-link" aria-label="Direct link to Pulsar admin" title="Direct link to Pulsar admin">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="flag-added-to-indicate-whether-or-not-to-create-a-metadata-path-on-replicated-clusters-pr-11140">Flag added to indicate whether or not to create a metadata path on replicated clusters. <a href="https://github.com/apache/pulsar/pull/11140" target="_blank" rel="noopener noreferrer">PR-11140</a><a href="#flag-added-to-indicate-whether-or-not-to-create-a-metadata-path-on-replicated-clusters-pr-11140" class="hash-link" aria-label="Direct link to flag-added-to-indicate-whether-or-not-to-create-a-metadata-path-on-replicated-clusters-pr-11140" title="Direct link to flag-added-to-indicate-whether-or-not-to-create-a-metadata-path-on-replicated-clusters-pr-11140">​</a></h3><ul><li><p><strong>Issue</strong>: When creating a partitioned topic in a replicated namespace, it did not
create a metadata path <code>/managed-ledgers</code> on replicated clusters.</p></li><li><p><strong>Resolution</strong>: Added a flag (createLocalTopicOnly) to indicate whether or not to create a metadata path for a partitioned topic in replicated clusters.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="a-topic-policy-can-no-longer-be-set-for-a-non-existent-topic-pr-11131">A topic policy can no longer be set for a non-existent topic. <a href="https://github.com/apache/pulsar/pull/11131" target="_blank" rel="noopener noreferrer">PR-11131</a><a href="#a-topic-policy-can-no-longer-be-set-for-a-non-existent-topic-pr-11131" class="hash-link" aria-label="Direct link to a-topic-policy-can-no-longer-be-set-for-a-non-existent-topic-pr-11131" title="Direct link to a-topic-policy-can-no-longer-be-set-for-a-non-existent-topic-pr-11131">​</a></h3><ul><li><p><strong>Issue</strong>: Due to a redirect loop in a topic policy, you can set a policy for a non-existing topic or a partition of a partitioned topic. </p></li><li><p><strong>Resolution</strong>: The fix added an authoritative flag for a topic policy to avoid a redirect loop. You can not set a topic policy for a non-existent topic or a partition of a partitioned topic. If you set a topic policy for a partition of a 0-partition topic, it redirects to the broker. </p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="discovery-service-no-longer-hard-codes-the-topic-domain-as-persistent-pr-10806">Discovery service no longer hard codes the topic domain as persistent. <a href="https://github.com/apache/pulsar/pull/10806" target="_blank" rel="noopener noreferrer">PR-10806</a><a href="#discovery-service-no-longer-hard-codes-the-topic-domain-as-persistent-pr-10806" class="hash-link" aria-label="Direct link to discovery-service-no-longer-hard-codes-the-topic-domain-as-persistent-pr-10806" title="Direct link to discovery-service-no-longer-hard-codes-the-topic-domain-as-persistent-pr-10806">​</a></h3><ul><li><p><strong>Issue</strong>: When using the lookup discovery service for a partitioned non-persistent topic, it returned zero rather than the number of partitions. The Pulsar client tried to connect to the topic as if it were a normal topic.</p></li><li><p><strong>Resolution</strong>: Implemented <code>topicName.getDomain().value()</code> rather than hard coding <code>persistent.</code> Now you can use the discovery service for a partitioned, non-persistent topic successfully.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="other-connectors-can-now-use-the-kinesis-backoff-class-pr-10744">Other connectors can now use the Kinesis <code>Backoff</code> class. <a href="https://github.com/apache/pulsar/pull/10744" target="_blank" rel="noopener noreferrer">PR-10744</a><a href="#other-connectors-can-now-use-the-kinesis-backoff-class-pr-10744" class="hash-link" aria-label="Direct link to other-connectors-can-now-use-the-kinesis-backoff-class-pr-10744" title="Direct link to other-connectors-can-now-use-the-kinesis-backoff-class-pr-10744">​</a></h3><ul><li><p><strong>Issue</strong>: The Kinesis sink connector <code>Backoff</code> class in the Pulsar client implementation project in combination  with the dependency <code>org.apache.pulsar:pulsar-client-original</code> increased the connector size. </p></li><li><p><strong>Resolution</strong>: Added a new class <code>Backoff</code> in the function io-core project so that the Kinesis sink connector and other connectors can use the class.</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="client">Client<a href="#client" class="hash-link" aria-label="Direct link to Client" title="Direct link to Client">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="a-flow-request-with-zero-permits-can-not-be-sent-pr-10506">A <code>FLOW</code> request with zero permits can not be sent. <a href="https://github.com/apache/pulsar/pull/10506" target="_blank" rel="noopener noreferrer">PR-10506</a><a href="#a-flow-request-with-zero-permits-can-not-be-sent-pr-10506" class="hash-link" aria-label="Direct link to a-flow-request-with-zero-permits-can-not-be-sent-pr-10506" title="Direct link to a-flow-request-with-zero-permits-can-not-be-sent-pr-10506">​</a></h3><ul><li><strong>Issue</strong>: When a broker received a <code>FLOW</code> request with zero permits, an exception was thrown and then the connection was closed. This triggered frequent reconnections and caused duplicate or out-of-order messages. </li><li><strong>Resolution</strong>: Added a validation that verifies the permits of a <code>FLOW</code> request before sending it. If the permit is zero, the <code>FLOW</code> request can not be sent.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="function-and-connector">Function and connector<a href="#function-and-connector" class="hash-link" aria-label="Direct link to Function and connector" title="Direct link to Function and connector">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-kinesis-sink-connector-acknowledges-successful-messages-pr-10769">The Kinesis sink connector acknowledges successful messages. <a href="https://github.com/apache/pulsar/pull/10769" target="_blank" rel="noopener noreferrer">PR-10769</a><a href="#the-kinesis-sink-connector-acknowledges-successful-messages-pr-10769" class="hash-link" aria-label="Direct link to the-kinesis-sink-connector-acknowledges-successful-messages-pr-10769" title="Direct link to the-kinesis-sink-connector-acknowledges-successful-messages-pr-10769">​</a></h3><ul><li><strong>Issue</strong>: The Kinesis sink connector did not acknowledge messages after they were sent successfully. </li><li><strong>Resolution</strong>: Added acknowledgement for the Kinesis sink connector once a message is sent successfully. </li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="docker">Docker<a href="#docker" class="hash-link" aria-label="Direct link to Docker" title="Direct link to Docker">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="function-name-length-cannot-exceed-52-characters-when-using-kubernetes-runtime-pr-10531">Function name length cannot exceed 52 characters when using Kubernetes runtime. <a href="https://github.com/apache/pulsar/pull/10531" target="_blank" rel="noopener noreferrer">PR-10531</a><a href="#function-name-length-cannot-exceed-52-characters-when-using-kubernetes-runtime-pr-10531" class="hash-link" aria-label="Direct link to function-name-length-cannot-exceed-52-characters-when-using-kubernetes-runtime-pr-10531" title="Direct link to function-name-length-cannot-exceed-52-characters-when-using-kubernetes-runtime-pr-10531">​</a></h3><ul><li><strong>Issue</strong>: When using Kubernetes runtime, if a function was submitted with a valid length (less than 55 characters), a StatefulSet was created but it was unable to spawn pods. </li><li><strong>Resolution</strong>: Changed the maximum length of a function name from 55 to 53 characters for Kubernetes runtime. With this fix, the length of a function name can not exceed 52 characters. </li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="dependency">Dependency<a href="#dependency" class="hash-link" aria-label="Direct link to Dependency" title="Direct link to Dependency">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pulsar-admin-connection-to-proxy-is-stable-when-tls-is-enabled-pr-10907"><code>pulsar-admin</code> connection to proxy is stable when TLS is enabled. <a href="https://github.com/apache/pulsar/pull/10907" target="_blank" rel="noopener noreferrer">PR-10907</a><a href="#pulsar-admin-connection-to-proxy-is-stable-when-tls-is-enabled-pr-10907" class="hash-link" aria-label="Direct link to pulsar-admin-connection-to-proxy-is-stable-when-tls-is-enabled-pr-10907" title="Direct link to pulsar-admin-connection-to-proxy-is-stable-when-tls-is-enabled-pr-10907">​</a></h3><ul><li><strong>Issue</strong>: <code>pulsar-admin</code> was unstable over the TLS connection because of the Jetty bug in SSL buffering introduced in Jetty 9.4.39. It caused large function jar uploads to fail frequently.</li><li><strong>Resolution</strong>: Upgraded Jetty to 9.4.42.v20210604, so that <code>pulsar-admin</code> connection to proxy is stable when TLS is enabled.</li></ul><h1>What is Next?</h1><p>If you are interested in learning more about Pulsar 2.7.3, you can <a href="https://pulsar.apache.org/en/versions/" target="_blank" rel="noopener noreferrer">download 2.7.3</a> and try it out now! </p><p>The first-ever Pulsar Virtual Summit Europe 2021 will take place in October. <a href="https://hopin.com/events/pulsar-summit-europe-2021" target="_blank" rel="noopener noreferrer">Register now</a> and help us make it an even bigger success by spreading the word on social!</p><p>For more information about the Apache Pulsar project and the progress, visit
the <a href="https://pulsar.apache.org" target="_blank" rel="noopener noreferrer">Pulsar website</a>, follow the project on Twitter <a href="https://twitter.com/apache_pulsar" target="_blank" rel="noopener noreferrer">@apache_pulsar</a>, and join <a href="https://apache-pulsar.herokuapp.com/" target="_blank" rel="noopener noreferrer">Pulsar Slack</a>!</p>]]></content>
        <author>
            <name>Bo Cong, Anonymitaet</name>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Apache Pulsar 2.8.0]]></title>
        <id>https://pulsar.apache.org/blog/2021/06/12/Apache-Pulsar-2-8-0</id>
        <link href="https://pulsar.apache.org/blog/2021/06/12/Apache-Pulsar-2-8-0"/>
        <updated>2021-06-12T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[We are very glad to see the Apache Pulsar community has successfully released the 2.8.0 version, which includes a number of exciting upgrades and enhancements. This blog provides a deep dive into the updates from the 2.8.0 release as well as a detailed look at the major Pulsar developments that have helped it evolve into the unified messaging and streaming platform it is today.]]></summary>
        <content type="html"><![CDATA[<p>We are very glad to see the Apache Pulsar community has successfully released the 2.8.0 version, which includes a number of exciting upgrades and enhancements. This blog provides a deep dive into the updates from the 2.8.0 release as well as a detailed look at the major Pulsar developments that have helped it evolve into the unified messaging and streaming platform it is today.</p><p>Note: The Pulsar community typically releases a major release every 3 months, but it has been 6 months since the release of 2.7.0. We spent more time on 2.8.0 in order to make the transaction API generally available to the Pulsar community. </p><h1>Release 2.8 Overview</h1><p>The key features and updates in this release are:</p><ul><li>Exclusive Producer</li><li>Package Management API</li><li>Simplified Client Memory Limit Settings</li><li>Broker Entry Metadata</li><li>New Protobuf Code Generator</li><li>Transactions</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="exclusive-producer">Exclusive Producer<a href="#exclusive-producer" class="hash-link" aria-label="Direct link to Exclusive Producer" title="Direct link to Exclusive Producer">​</a></h2><p>By default, the Pulsar producer API provides a "multi-writer" semantic to append messages to a topic. However, there are several use cases that require exclusive access for a single writer, such as ensuring a linear non-interleaved history of messages or providing a mechanism for leader election.</p><p>This new feature allows applications to require exclusive producer access in order to achieve a "single-writer" situation. It guarantees that there should be 1 single writer in any combination of errors. If the producer loses its exclusive access, no more messages from it can be published on the topic.</p><p>One use case for this feature is the metadata controller in Pulsar Functions. In order to write a single linear history of all the functions metadata updates, the metadata controller requires to elect one leader and that all the "decisions" made by this leader be written on the metadata topic. By leveraging the exclusive producer feature, Pulsar guarantees that the metadata topic contains different segments of updates, one per each successive leader, and there is no interleaving across different leaders. See "<a href="https://github.com/apache/pulsar/wiki/PIP-68%3A-Exclusive-Producer" target="_blank" rel="noopener noreferrer">PIP-68: Exclusive Producer</a>" for more details.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="package-management-api">Package Management API<a href="#package-management-api" class="hash-link" aria-label="Direct link to Package Management API" title="Direct link to Package Management API">​</a></h2><p>Since its introduction in version 2.0, the Functions API has become hugely popular among Pulsar users. While it offers many benefits, there are a number of ways to improve the user experience. For example, today, if a function is deployed multiple times, the function package ends up being uploaded multiple times. Also, there is no version management in Pulsar for Functions and IO connectors. The newly introduced package management API provides an easier way to manage the packages for Functions and IO connectors and significantly simplifies the upgrade and rollback processes. Read "<a href="http://pulsar.apache.org/docs/en/admin-api-packages/" target="_blank" rel="noopener noreferrer">Package Management API</a>" for more details.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="simplified-client-memory-limit-settings">Simplified Client Memory Limit Settings<a href="#simplified-client-memory-limit-settings" class="hash-link" aria-label="Direct link to Simplified Client Memory Limit Settings" title="Direct link to Simplified Client Memory Limit Settings">​</a></h2><p>Prior to 2.8, there are multiple settings in producers and consumers that allow controlling the sizes of the internal message queues. These settings ultimately control the amount of memory the Pulsar client uses. However, there are few issues with this approach that make it complicated to select an overall configuration that controls the total usage of memory. </p><p>For example, the settings are based on the "number of messages", so the expected message size must be adjusted per producer or consumer. If an application has a large (or unknown) number of producers or consumers, it’s very difficult to select an appropriate value for queue sizes. The same is true for topics that have many partitions.</p><p>In 2.8, we introduced a new API to set the memory limit. This single <code>memoryLimit</code> setting specifies a maximum amount of memory on a given Pulsar client. The producers and consumers compete for the memory assigned. It ensures the memory used by the Pulsar client will not go beyond the set limit. Read "<a href="https://github.com/apache/pulsar/wiki/PIP-74%3A-Pulsar-client-memory-limits" target="_blank" rel="noopener noreferrer">PIP-74: Pulsar client memory limits</a>" for more details.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="broker-entry-metadata">Broker Entry Metadata<a href="#broker-entry-metadata" class="hash-link" aria-label="Direct link to Broker Entry Metadata" title="Direct link to Broker Entry Metadata">​</a></h2><p>Pulsar messages define a very comprehensive set of metadata properties. However, to add a new property, the <code>MessageMetadata</code> definition in Pulsar protocol must change to inform both broker and client of the newly introduced property. </p><p>But in certain cases, this metadata property might need to be added from the broker side, or need to be retrieved by the broker at a very low cost. To prevent deserializing these properties from the message metadata, we introduced "Broker Entry Metadata" in 2.8.0 to provide a lightweight approach to add additional metadata properties without serializing and deserializing the protobuf-encoded <code>MessageMetadata</code>. </p><p>This feature unblocks a new set of capabilities for Pulsar. For example, we can leverage broker entry metadata to generate broker publish time for the messages appended to the Pulsar topic. The other example is to generate a monotonically increasing sequence-id for messages produced to a Pulsar topic. We use this feature in Kafka-on-Pulsar to implement Kafka offset.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="new-protobuf-code-generator">New Protobuf Code Generator<a href="#new-protobuf-code-generator" class="hash-link" aria-label="Direct link to New Protobuf Code Generator" title="Direct link to New Protobuf Code Generator">​</a></h2><p>Pulsar uses Google Protobuf in order to perform serialization and deserialization of the commands that are exchanged between clients and brokers. Because of the overhead involved with the regular Protobuf implementation, we have been using a modified version of Protobuf 2.4.1. The modifications were done to ensure a more efficient serialization code that used thread local cache for the objects used in the process.</p><p>This approach introduced a few issues. For example, the patch to the Protobuf code generator is only based on Protobuf version 2.4.1 and cannot be upgraded to the newer Protobuf versions. In 2.8, we switched the patched Protobuf 2.4.1 to Splunk LightProto as the code generator. The new code generator generates the fastest possible Java code for Protobuf SerDe, is 100% compatible with proto2 definition and wire protocol, and provides zero-copy deserialization using Netty ByteBuf.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="transactions">Transactions<a href="#transactions" class="hash-link" aria-label="Direct link to Transactions" title="Direct link to Transactions">​</a></h2><p>Prior to Pulsar 2.8, Pulsar only supported exactly-once semantics on single topic through Idempotent Producer. While powerful, Idempotent producer only solves a narrow scope of challenges for exactly-once semantics. For example, there is no <code>atomicity</code> when a producer attempts to produce messages to multiple topics. A publish error can occur when the broker serving one of the topics crashes. If the producer doesn’t retry publishing the message again, it results in some messages being persisted once and others being lost. If the producer retries, it results in some messages being persisted multiple times.</p><p>In order to address the remaining challenges described above, we’ve strengthened the Pulsar’s delivery semantics by introducing a Pulsar Transaction API to support atomic writes and acknowledgements across multiple topics. The addition of the Transaction API to Apache Pulsar completes our vision of making Pulsar a complete unified messaging and streaming platform.</p><p>Pulsar PMC member, Penghui Li, goes over this functionality in great detail in his recent blog, Exactly-once Semantics with Transactions in Pulsar. You can read it to learn more about the <a href="https://streamnative.io/en/blog/release/2021-06-14-exactly-once-semantics-with-transactions-in-pulsar" target="_blank" rel="noopener noreferrer">exactly-once semantics support in Pulsar</a>.</p><h1>Building a Unified Messaging and Streaming Platform with Apache Pulsar</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-evolution-of-apache-pulsar">The Evolution of Apache Pulsar<a href="#the-evolution-of-apache-pulsar" class="hash-link" aria-label="Direct link to The Evolution of Apache Pulsar" title="Direct link to The Evolution of Apache Pulsar">​</a></h2><p>Apache Pulsar is widely adopted by hundreds of companies across the globe, including Splunk, Tencent, Verizon, and Yahoo! JAPAN, just to name a few. Born as a cloud-native distributed messaging system, Apache Pulsar has evolved into a complete messaging and streaming platform for publishing and subscribing, storing, and processing streams of data at scale and in real-time. </p><p>Back in 2012 the Yahoo! team was looking for a global, geo-replicated infrastructure that could manage all of Yahoo!’s messaging data. After vetting the messaging and streaming landscape it became clear that existing technologies were not able to serve the need for an event-driven organization. As a result, the team at Yahoo! set out to build its own.</p><p>At the time, there were generally two types of systems to handle in-motion data: message queues that handled mission-critical business events in real-time, and streaming systems that handled scalable data pipelines at scale. Companies had to limit their capabilities to one or the other, or they had to adopt multiple different technologies. If they chose multiple technologies, they would end up with a complex infrastructure that often resulted in data segregation and data silos, with one silo for message queues used to build application services and the other silo for streaming systems used to build data services. The figure below illustrates what this can look like. </p><p><img loading="lazy" src="/assets/images/280-1-98d0691de155a939f53568aa08a2bac4.png" width="1508" height="1060" class="img_ev3q"></p><p>However, with the diversity of data that companies need to process beyond operational data (like log data, click events, etc), coupled with the increase in the number of downstream systems that need access to combined business data and operational data, the system would need to support message queueing and streaming. </p><p>Beyond that, companies need an infrastructure platform that would allow them to build all of their applications on top of it, and then have those applications handle in-motion data (messaging and streaming data) by default. This way real-time data infrastructure could be significantly simplified, as illustrated in the diagram below.</p><p><img loading="lazy" src="/assets/images/280-2-10c31765a2c1024630b6c7bcce3dcc23.png" width="1240" height="892" class="img_ev3q"></p><p>With that vision, the Yahoo! team started working on building a unified messaging and streaming platform for in-motion data. Below is an overview of the key milestones on the Pulsar journey, from inception to today.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-1-a-scalable-storage-for-streams-of-data">Step 1: A scalable storage for streams of data<a href="#step-1-a-scalable-storage-for-streams-of-data" class="hash-link" aria-label="Direct link to Step 1: A scalable storage for streams of data" title="Direct link to Step 1: A scalable storage for streams of data">​</a></h2><p>The journey of Pulsar began with Apache BookKeeper. Apache BookKeeper implements a log-like abstraction for continuous streams and provides the ability to run it at internet-scale with simple write-read log APIs. A log provides a great abstraction for building distributed systems, such as distributed databases and pub-sub messaging. The write APIs are in the form of appends to the log. And the read APIs are in the form of continuous read from a starting offset defined by the readers. The implementation of BookKeeper created the foundation - a scalable log-backed messaging and streaming system. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-2-a-multi-layered-architecture-that-separates-compute-from-storage">Step 2: A multi-layered architecture that separates compute from storage.<a href="#step-2-a-multi-layered-architecture-that-separates-compute-from-storage" class="hash-link" aria-label="Direct link to Step 2: A multi-layered architecture that separates compute from storage." title="Direct link to Step 2: A multi-layered architecture that separates compute from storage.">​</a></h2><p>On top of the scalable log storage, a stateless serving layer was introduced which runs stateless brokers for publishing and consuming messages. This multi-layered architecture separates serving/compute from storage, allowing Pulsar to manage serving and storage in separate layers.</p><p>This architecture also ensures instant scalability and higher availability. Both of these factors are extremely important and make Pulsar well-suited for building mission-critical services, such as billing platforms for financial use cases, transaction processing systems for e-commerce and retailers, and real-time risk control systems for financial institutions.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-3-unified-messaging-model-and-api">Step 3: Unified messaging model and API<a href="#step-3-unified-messaging-model-and-api" class="hash-link" aria-label="Direct link to Step 3: Unified messaging model and API" title="Direct link to Step 3: Unified messaging model and API">​</a></h2><p>In a modern data architecture, the real-time use cases can typically be categorized into two categories: queueing and streaming. Queueing is typically used for building core business application services while streaming is typically used for building real-time data services such as data pipelines.</p><p>To provide one platform able to serve both application and data services required a unified messaging model that integrates queuing and streaming semantics. The Pulsar topics become the source of truth for consumption. Messages can be stored only once on topics, but can be consumed in different ways via different subscriptions. Such unification significantly reduces the complexity of managing and developing messaging and streaming applications.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-4-schema-api">Step 4: Schema API<a href="#step-4-schema-api" class="hash-link" aria-label="Direct link to Step 4: Schema API" title="Direct link to Step 4: Schema API">​</a></h2><p>Next, a new Pulsar schema registry and a new type-safe producer &amp; consumer API were added. The built-in schema registry enables message producers and consumers on Pulsar topics to coordinate on the structure of the topic’s data through the Pulsar broker itself, without needing an external coordination mechanism. With data schemas, every single piece of data traveling through Pulsar is completely discoverable, enabling you to build systems that can easily adapt as the data changes.</p><p>Furthermore, the schema registry keeps track of data compatibility between versions of the schema. As the new schemas are uploaded the registry ensures that new schema versions are able to be read by old consumers. This ensures that Producers cannot break Consumers.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-5-functions-and-io-api">Step 5: Functions and IO API<a href="#step-5-functions-and-io-api" class="hash-link" aria-label="Direct link to Step 5: Functions and IO API" title="Direct link to Step 5: Functions and IO API">​</a></h2><p>The next step was to build APIs that made it easy to get data in and out of Pulsar and process it. The goal was to make it easy to build event-driven applications and real-time data pipelines with Apache Pulsar, so you can then process those events when they arrive, no matter where they originated from. </p><p>The Pulsar IO API allows you to build real-time streaming data pipelines by plugging various source connectors to get data from external systems into Pulsar and sink connectors to get data from Pulsar into external systems. Today, Pulsar provides several built-in connectors that you can use. </p><p>Additionally, StreamNative Hub (a registry of Pulsar connectors) provides dozens of connectors integrated with popular data systems. If the IO API is for building streaming data pipelines, the Functions API is for building event-driven applications and real-time stream processors. </p><p>The serverless function concepts were adopted into stream processing and then built the Functions API as a lightweight serverless library that you can write any event processing logic using any language you like. The underlying motivation was to enable your engineering team to write stream processing logic without the operational complexity of running and maintaining yet another cluster.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-6-infinite-storage-for-pulsar-via-tiered-storage">Step 6: Infinite storage for Pulsar via Tiered Storage<a href="#step-6-infinite-storage-for-pulsar-via-tiered-storage" class="hash-link" aria-label="Direct link to Step 6: Infinite storage for Pulsar via Tiered Storage" title="Direct link to Step 6: Infinite storage for Pulsar via Tiered Storage">​</a></h2><p>As adoption of Apache Pulsar continued and the amount of data stored in Pulsar increased, users eventually hit a "retention cliff", at which point it became significantly more expensive to store, manage, and retrieve data in Apache BookKeeper. To work around this, operators and application developers typically use an external store like AWS S3 as a sink for long-term storage. This means you lose most of the benefits of Pulsar’s immutable stream and ordering semantics, and instead end up having to manage two different systems with different access patterns.</p><p>The introduction of Tiered Storage allows Pulsar to offload the majority of the data to a remote cloud-native storage. This cheaper form of storage readily scales with the volume of data. More importantly, with the addition of Tiered Storage, Pulsar provides the batch storage capabilities needed to support batch processing when integrating with a unified batch and stream processor like Flink. The unified batch and stream processing capabilities integrated with Pulsar enable companies to query real-time streams with historical context quickly and easily, unlocking a unique competitive advantage.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-7-protocol-handler">Step 7: Protocol Handler<a href="#step-7-protocol-handler" class="hash-link" aria-label="Direct link to Step 7: Protocol Handler" title="Direct link to Step 7: Protocol Handler">​</a></h2><p>After introducing tiered storage, Pulsar evolved from a Pub/Sub messaging system into a scalable stream data system that can ingest, store, and process streams of data. However, existing applications written using other messaging protocols such as Kafka, AMQP, MQTT, etc had to be rewritten to adopt Pulsar’s messaging protocol.</p><p>The Protocol Handler API  further reduces the overhead of adopting Pulsar for building messaging and streaming applications, and allows developers to extend Pulsar capabilities to other messaging domains by leveraging all the benefits provided by Pulsar architecture. This resulted in major collaborations between Pulsar and other industry leaders to develop popular protocol handlers including:</p><ul><li><a href="https://hub.streamnative.io/protocol-handlers/kop/0.2.0" target="_blank" rel="noopener noreferrer">Kafka-on-Pulsar (KoP)</a>, which was <a href="https://streamnative.io/en/blog/tech/2020-03-24-bring-native-kafka-protocol-support-to-apache-pulsar" target="_blank" rel="noopener noreferrer">launched in March 2020</a> by OVHCloud and StreamNative. </li><li><a href="https://hub.streamnative.io/protocol-handlers/aop/0.1.0" target="_blank" rel="noopener noreferrer">AMQP-on-Pulsar (AoP)</a>, which was <a href="https://streamnative.io/en/blog/tech/2020-06-15-announcing-aop-on-pulsar" target="_blank" rel="noopener noreferrer">announced in June 2020</a> by China Mobile and StreamNative.</li><li><a href="https://hub.streamnative.io/protocol-handlers/mop/0.2.0" target="_blank" rel="noopener noreferrer">MQTT-on-Pulsar (MoP)</a>, which was <a href="https://streamnative.io/en/blog/tech/2020-09-28-announcing-mqtt-on-pulsar" target="_blank" rel="noopener noreferrer">announced in August 2020</a> by StreamNative.</li><li><a href="https://github.com/streamnative/rop" target="_blank" rel="noopener noreferrer">RocketMQ-on-Pulsar (RoP)</a>, which was launched in May 2021 by Tencent Cloud and StreamNative.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-8-transaction-api-for-exactly-once-stream-processing">Step 8: Transaction API for exactly-once stream processing<a href="#step-8-transaction-api-for-exactly-once-stream-processing" class="hash-link" aria-label="Direct link to Step 8: Transaction API for exactly-once stream processing" title="Direct link to Step 8: Transaction API for exactly-once stream processing">​</a></h2><p>More recently, transactions were added to Apache Pulsar to enable exactly-once semantics for stream processing. This is a fundamental feature that provides a strong guarantee for streaming data transformations, making it easy to build scalable, fault-tolerant, stateful messaging and streaming applications that process streams of data.</p><p>Furthermore, the transaction API capabilities are not limited to a given language client. Pulsar’s support for transactional messaging and streaming is primarily a protocol-level capability that can be presented in any language. Such protocol-level capability can be leveraged in all kinds of applications. </p><h1>Building an ecosystem for unified messaging and streaming</h1><p>In addition to contributing to the Pulsar technology, the community is also working to build a robust ecosystem to support it. Pulsar’s ability to support a rich ecosystem of pub-sub libraries, connectors, functions, protocol handlers, and integrations with popular query engines will enable Pulsar adopters to streamline workflows and achieve new use cases.</p><h1>What is Next?</h1><p>If you are interested in learning more about Pulsar 2.8.0, you can <a href="https://pulsar.apache.org/en/versions/" target="_blank" rel="noopener noreferrer">download 2.8.0</a> and try it out today! </p><p>If you want to learn more about how companies have adopted Pulsar, you can <a href="https://hopin.com/events/pulsar-summit-north-america-2021" target="_blank" rel="noopener noreferrer">sign up</a> for Pulsar Summit NA 2021!</p><p>For more information about the Apache Pulsar project and the progress, please visit the official website at <a href="https://pulsar.apache.org" target="_blank" rel="noopener noreferrer">https://pulsar.apache.org</a> and follow the project on Twitter <a href="https://twitter.com/apache_pulsar" target="_blank" rel="noopener noreferrer">@apache_pulsar</a>.</p>]]></content>
        <author>
            <name>Matteo Merli, Sijie Guo</name>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Apache Pulsar 2.7.2]]></title>
        <id>https://pulsar.apache.org/blog/2021/05/13/Apache-Pulsar-2-7-2</id>
        <link href="https://pulsar.apache.org/blog/2021/05/13/Apache-Pulsar-2-7-2"/>
        <updated>2021-05-13T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[We are very glad to see the Apache Pulsar community has successfully released the 2.7.2 version.]]></summary>
        <content type="html"><![CDATA[<p>We are very glad to see the Apache Pulsar community has successfully released the 2.7.2 version.
This is a minor release that introduces stability fixes and a few new features without breaking changes.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="news-and-noteworthy">News and noteworthy<a href="#news-and-noteworthy" class="hash-link" aria-label="Direct link to News and noteworthy" title="Direct link to News and noteworthy">​</a></h3><p>Here is a selection of the most awesome and major enhancements added to Pulsar 2.7.2.</p><ul><li>Improvement in stability in the Kinesis connector <a href="https://github.com/apache/pulsar/pull/10420" target="_blank" rel="noopener noreferrer">#10420</a>.</li><li>Improvement in passing ENV variables to the bookie (PULSAR_EXTRA_OPTS) <a href="https://github.com/apache/pulsar/pull/10397" target="_blank" rel="noopener noreferrer">#10397</a>.</li><li>Allow the C++ client to be built in Windows and add CI for verification <a href="https://github.com/apache/pulsar/pull/10387" target="_blank" rel="noopener noreferrer">#10387</a>.</li><li>Allow activating every BookKeeper client features in the broker <a href="https://github.com/apache/pulsar/pull/9232" target="_blank" rel="noopener noreferrer">#9232</a>.</li><li>Improvement in Pulsar proxy.</li><li>Upgrade core networking libraries: Jetty and Netty.</li></ul><p><a href="https://github.com/apache/pulsar/pulls?page=1&amp;q=is%3Apr+label%3Arelease%2F2.7.2%5D" target="_blank" rel="noopener noreferrer">Here</a> you can find the list of all the improvements and bug fixes.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="contributors-for-272-release">Contributors for 2.7.2 release<a href="#contributors-for-272-release" class="hash-link" aria-label="Direct link to Contributors for 2.7.2 release" title="Direct link to Contributors for 2.7.2 release">​</a></h3><p>We would like to thank all the contributors for this release.
Same to other sustainable open source projects, Apache Pulsar is great because it is supported by a vibrant community.</p><p>Code contributors (names taken from GitHub API):
Ali Ahmed, Andrey Yegorov, Binbin Guo, David Kjerrumgaard, Deon van der Vyver, Devin Bost, Enrico Olivelli, Guangning E, Kevin Wilson,
Lari Hotari, Marvin Cai, Masahiro Sakamoto, Matteo Merli, Michael Marshall, Rajan Dhabalia, Shen Liu, Ting Yuan, Vincent Royer,
Yong Zhang, Yunze Xu, Zhanpeng Wu, Zike Yang, baomingyu, CongBo, dockerzhang, feynmanlin, hangc0276, li jinquan, limingnihao,
linlinnn, mlyahmed, PengHui Li, Ran.</p><p>Documentation contributors:
Anonymitaet (Yu Liu), Jennifer Huang</p><p>Also, we want to thank everyone who spent his time reporting issues and sharing the story about using Pulsar.</p><p>Looking forward to your contributions to <a href="https://github.com/apache/pulsar" target="_blank" rel="noopener noreferrer">Apache Pulsar</a>.</p>]]></content>
        <author>
            <name>Enrico Olivelli</name>
            <uri>https://twitter.com/eolivelli</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Apache Pulsar 2.7.0]]></title>
        <id>https://pulsar.apache.org/blog/2020/12/24/Apache-Pulsar-2-7-0</id>
        <link href="https://pulsar.apache.org/blog/2020/12/24/Apache-Pulsar-2-7-0"/>
        <updated>2020-12-24T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[We are very glad to see the Apache Pulsar community has successfully released the wonderful 2.7.0 version after accumulated hard work. It is a great milestone for this fast-growing project and the whole Pulsar community. This is the result of a huge effort from the community, with over 450 commits and a long list of new features, improvements, and bug fixes.]]></summary>
        <content type="html"><![CDATA[<p>We are very glad to see the Apache Pulsar community has successfully released the wonderful 2.7.0 version after accumulated hard work. It is a great milestone for this fast-growing project and the whole Pulsar community. This is the result of a huge effort from the community, with over 450 commits and a long list of new features, improvements, and bug fixes.</p><p>Here is a selection of the most interesting and major features added to Pulsar 2.7.0.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="major-features">Major features<a href="#major-features" class="hash-link" aria-label="Direct link to Major features" title="Direct link to Major features">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="transaction-support">Transaction support<a href="#transaction-support" class="hash-link" aria-label="Direct link to Transaction support" title="Direct link to Transaction support">​</a></h3><p>Transactional semantics enable event streaming applications to consume, process, and produce messages in one atomic operation. With transactions, Pulsar achieves the exactly-once semantics for a single partition and multiple partitions as well. This enables new use cases with Pulsar where a client (either as a producer or consumer) can work with messages across multiple topics and partitions and ensure those messages will all be processed as a single unit. This will strengthen the message delivery semantics of Apache Pulsar and processing guarantees for Pulsar Functions.</p><p>Currently, Pulsar transactions are in developer preview. The community will work further to enhance the feature to be used in the production environment soon.</p><p>To enable transactions in Pulsar, you need to configure the parameter in the <code>broker.conf</code> file.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">transactionCoordinatorEnabled=true</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Initialize transaction coordinator metadata, so the transaction coordinators can leverage advantages of the partitioned topic, such as load balance.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">bin/pulsar initialize-transaction-coordinator-metadata -cs 127.0.0.1:2181 -c standalone</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>From the client-side, you can also enable the transactions for the Pulsar client.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token class-name">PulsarClient</span><span class="token plain"> pulsarClient </span><span class="token operator">=</span><span class="token plain"> </span><span class="token class-name">PulsarClient</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">builder</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">serviceUrl</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"pulsar://localhost:6650"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">enableTransaction</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">build</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Here is an example to demonstrate the Pulsar transactions.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// Open a transaction</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token class-name">Transaction</span><span class="token plain"> txn </span><span class="token operator">=</span><span class="token plain"> pulsarClient</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">newTransaction</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">withTransactionTimeout</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">5</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token class-name">TimeUnit</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">MINUTES</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">build</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">get</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//  Publish messages with the transaction</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">producer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">newMessage</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">txn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"Hello Pulsar Transaction"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">getBytes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">send</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// Consume and acknowledge messages with the transaction</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token class-name">Message</span><span class="token operator">&lt;</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">byte</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token operator">&gt;</span><span class="token plain"> message </span><span class="token operator">=</span><span class="token plain"> consumer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">receive</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">consumer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">acknowledgeAsync</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">message</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">getMessageId</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> txn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// Commit the transaction</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">txn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">commit</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For more details about the Pulsar transactions, refer to <a href="http://pulsar.apache.org/docs/en/transactions/" target="_blank" rel="noopener noreferrer">here</a>. For more details about the design of Pulsar transactions, refer to <a href="https://github.com/apache/pulsar/wiki/PIP-31%3A-Transaction-Support" target="_blank" rel="noopener noreferrer">here</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="topic-level-policy">Topic level policy<a href="#topic-level-policy" class="hash-link" aria-label="Direct link to Topic level policy" title="Direct link to Topic level policy">​</a></h3><p>Pulsar 2.7.0 introduces the system topic which can maintain all policy change events to achieve the topic level policy. All policies at the namespace level are now also available at the topic level, so users can set different policies at the topic level flexibly without using lots of metadata service resources. The topic level policy enables users to manage topics more flexibly and adds no burden to ZooKeeper.</p><p>To enable topic level policy in Pulsar, you need to configure the parameter in the <code>broker.conf</code> file.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">systemTopicEnabled=true</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">topicLevelPoliciesEnabled=true</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>After topic level policy is enabled, you can use Pulsar Admin to update the policy of a topic. Here is an example for setting the data retention for a specific topic.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">bin/pulsar-admin topics set-retention -s 10G -t 7d persistent://public/default/my-topic</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For more details about the system topic and topic level policy, refer to <a href="https://github.com/apache/pulsar/wiki/PIP-39%3A-Namespace-Change-Events" target="_blank" rel="noopener noreferrer">here</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="support-azure-blobstore-offloader">Support Azure BlobStore offloader<a href="#support-azure-blobstore-offloader" class="hash-link" aria-label="Direct link to Support Azure BlobStore offloader" title="Direct link to Support Azure BlobStore offloader">​</a></h3><p>In Pulsar 2.7.0, we add support for Azure BlobStore offloader, which allows users to offload topic data into Azure BlobStore. You can configure the Azure BlobStore offloader driver in the configuration <code>broker.conf</code> file.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">managedLedgerOffloadDriver=azureblob</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For more details, refer to <a href="https://github.com/apache/pulsar/pull/8436" target="_blank" rel="noopener noreferrer">here</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="native-protobuf-schema-support">Native protobuf schema support<a href="#native-protobuf-schema-support" class="hash-link" aria-label="Direct link to Native protobuf schema support" title="Direct link to Native protobuf schema support">​</a></h3><p>Pulsar 2.7.0 introduces a native protobuf schema support, which can provide more ability for protobuf users who want to integrate with Pulsar. Here is an example to show how to use native protobuf schema in Java client:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token class-name">Consumer</span><span class="token generics punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token generics class-name">PBMessage</span><span class="token generics punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"> consumer </span><span class="token operator">=</span><span class="token plain"> client</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">newConsumer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">Schema</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">PROTOBUFNATIVE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">PBMessage</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">topic</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">topic</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">subscriptionName</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"my-subscription-name"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">subscribe</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For more details, refer to <a href="https://github.com/apache/pulsar/pull/8372" target="_blank" rel="noopener noreferrer">here</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="resource-limitation">Resource limitation<a href="#resource-limitation" class="hash-link" aria-label="Direct link to Resource limitation" title="Direct link to Resource limitation">​</a></h3><p>In Pulsar, tenant, namespace, and topic are the core resources of a cluster. Pulsar 2.7.0 enables you to limit the maximum tenants of a cluster, the maximum namespaces per tenant, the maximum topics per namespace, and the maximum subscriptions per topic.</p><p>You can configure the resource limitations in the <code>broker.conf</code> file.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">maxTenants=0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">maxNamespacesPerTenant=0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">maxTopicsPerNamespace=0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">maxSubscriptionsPerTopic=0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This provides Pulsar administrators with great convenience in resource management.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="support-e2e-encryption-for-pulsar-functions">Support e2e encryption for Pulsar Functions<a href="#support-e2e-encryption-for-pulsar-functions" class="hash-link" aria-label="Direct link to Support e2e encryption for Pulsar Functions" title="Direct link to Support e2e encryption for Pulsar Functions">​</a></h3><p>Pulsar 2.7.0 enables you to add End-to-End (e2e) encryption for Pulsar Functions. You can use the public and private key pair that the application configured to perform encryption. Only consumers with a valid key can decrypt encrypted messages.</p><p>To enable End-to-End encryption on Functions Worker, you can set it by specifying <code>--producer-config</code> in the command line terminal. For more information, refer to <a href="http://pulsar.apache.org/docs/en/security-encryption/" target="_blank" rel="noopener noreferrer">Pulsar Encryption</a>.</p><p>For more details, you can see <a href="https://github.com/apache/pulsar/pull/8432" target="_blank" rel="noopener noreferrer">here</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="function-rebalance">Function rebalance<a href="#function-rebalance" class="hash-link" aria-label="Direct link to Function rebalance" title="Direct link to Function rebalance">​</a></h3><p>Before 2.7.0, there was no mechanism for rebalancing functions scheduler on workers. The workload for functions m become skewed. Pulsar 2.7.0 supports manual trigger functions rebalance and automatic periodic functions rebalance.</p><p>For more details, refer to <a href="https://github.com/apache/pulsar/pull/7388" target="_blank" rel="noopener noreferrer">https://github.com/apache/pulsar/pull/7388</a>  and <a href="https://github.com/apache/pulsar/pull/7449" target="_blank" rel="noopener noreferrer">https://github.com/apache/pulsar/pull/7449</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="more-information">More information<a href="#more-information" class="hash-link" aria-label="Direct link to More information" title="Direct link to More information">​</a></h2><ul><li>To download Apache Pulsar 2.7.0, click <a href="https://pulsar.apache.org/download/" target="_blank" rel="noopener noreferrer">here</a>.</li><li>For more information about Apache Pulsar 2.7.0, see <a href="https://pulsar.apache.org/release-notes/#2.7.0" target="_blank" rel="noopener noreferrer">2.7.0 release notes</a> and <a href="https://github.com/apache/pulsar/pulls?q=milestone%3A2.7.0+-label%3Arelease%2F2.6.2+-label%3Arelease%2F2.6.1+" target="_blank" rel="noopener noreferrer">2.7.0 PR list</a>.</li></ul><p>If you have any questions or suggestions, contact us with mailing lists or slack.</p><ul><li><a href="mailto:users@pulsar.apache.org" target="_blank" rel="noopener noreferrer">users@pulsar.apache.org</a></li><li><a href="mailto:dev@pulsar.apache.org" target="_blank" rel="noopener noreferrer">dev@pulsar.apache.org</a></li><li>Pulsar slack channel: <a href="https://apache-pulsar.slack.com/" target="_blank" rel="noopener noreferrer">https://apache-pulsar.slack.com/</a></li><li>Self-registration at <a href="https://apache-pulsar.herokuapp.com/" target="_blank" rel="noopener noreferrer">https://apache-pulsar.herokuapp.com/</a></li></ul><p>Looking forward to your contributions to <a href="https://github.com/apache/pulsar" target="_blank" rel="noopener noreferrer">Apache Pulsar</a>.</p>]]></content>
        <author>
            <name>Penghui Li</name>
            <uri>https://twitter.com/lipenghui6</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Apache Pulsar 2.6.2]]></title>
        <id>https://pulsar.apache.org/blog/2020/11/09/Apache-Pulsar-2-6-2</id>
        <link href="https://pulsar.apache.org/blog/2020/11/09/Apache-Pulsar-2-6-2"/>
        <updated>2020-11-09T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[We are excited to see that the Apache Pulsar community has successfully released the 2.6.2 version after a lot of hard work. It is a great milestone for this fast-growing project and the Pulsar community. 2.6.2 is the result of a big effort from the community, with over 154 commits and a long list of improvements and bug fixes.]]></summary>
        <content type="html"><![CDATA[<p>We are excited to see that the Apache Pulsar community has successfully released the 2.6.2 version after a lot of hard work. It is a great milestone for this fast-growing project and the Pulsar community. 2.6.2 is the result of a big effort from the community, with over 154 commits and a long list of improvements and bug fixes.</p><p>Here are some highlights and major features added in Pulsar 2.6.2.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="broker">Broker<a href="#broker" class="hash-link" aria-label="Direct link to Broker" title="Direct link to Broker">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="catch-throwable-when-starting-pulsar">Catch <code>throwable</code> when starting Pulsar<a href="#catch-throwable-when-starting-pulsar" class="hash-link" aria-label="Direct link to catch-throwable-when-starting-pulsar" title="Direct link to catch-throwable-when-starting-pulsar">​</a></h3><p>Before 2.6.2, Pulsar catched exceptions only when <code>BrokerStarter.start()</code> failed. Some errors such as <code>NoSuchMethodError</code> or <code>NoClassDefFoundError</code> could not be caught, and Pulsar was in abnormal status yet no error log was found in the log file.</p><p>In 2.6.2, we modify exceptions to use <code>throwable</code> to avoid this issue.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/7221" target="_blank" rel="noopener noreferrer">PR-7221</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="handle-subscriptionbusyexception-in-resetcursor-api">Handle SubscriptionBusyException in resetCursor API<a href="#handle-subscriptionbusyexception-in-resetcursor-api" class="hash-link" aria-label="Direct link to Handle SubscriptionBusyException in resetCursor API" title="Direct link to Handle SubscriptionBusyException in resetCursor API">​</a></h3><p>In <code>PersistentSubscription.resetCursor</code> method, <code>SubscriptionFencedException</code> is thrown in several places, but it is not handled in <code>PersistentTopicBase</code>, so error messages are not clear.</p><p>In 2.6.2, we export <code>SubscriptionBusyException</code> in <code>PersistentTopicBase</code> for <code>resetCursor</code>, so error messages in the REST API are clear. </p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/7335" target="_blank" rel="noopener noreferrer">PR-7335</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="update-jersey-to-231">Update Jersey to 2.31<a href="#update-jersey-to-231" class="hash-link" aria-label="Direct link to Update Jersey to 2.31" title="Direct link to Update Jersey to 2.31">​</a></h3><p>Before 2.6.1, Pulsar used the Jersey 2.27, which has security concerns. In Pulsar 2.6.2, we update the Jersey version to the latest stable version(2.31) to enhance security.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/7515" target="_blank" rel="noopener noreferrer">PR-7515</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="stop-to-dispatch-when-consumers-using-the-key_shared-subscription-stuck">Stop to dispatch when consumers using the Key_Shared subscription stuck<a href="#stop-to-dispatch-when-consumers-using-the-key_shared-subscription-stuck" class="hash-link" aria-label="Direct link to Stop to dispatch when consumers using the Key_Shared subscription stuck" title="Direct link to Stop to dispatch when consumers using the Key_Shared subscription stuck">​</a></h3><p>Consumers using the <code>Key_Shared</code> subscription would encounter disorder messages occasionally. The following are steps to reproduce the situation:</p><ol><li>Connect Consumer1 to Key_Shared subscription <code>sub</code> and stop to receive</li></ol><ul><li>receiverQueueSize: 500</li></ul><ol start="2"><li>Connect Producer and publish 500 messages with key <code>(i % 10)</code></li><li>Connect Consumer2 to same subscription and start to receive</li></ol><ul><li>receiverQueueSize: 1</li><li>since <a href="https://github.com/apache/pulsar/pull/7106" target="_blank" rel="noopener noreferrer">https://github.com/apache/pulsar/pull/7106</a>, Consumer2 can't receive (expected)</li></ul><ol start="4"><li>Producer publish more 500 messages with same key generation algorithm</li><li>After that, Consumer1 start to receive</li><li>Check Consumer2 message ordering</li></ol><ul><li>sometimes message ordering was broken in same key</li></ul><p>In 2.6.2, when consumers use the Key_Shared subscription, Pulsar stops dispatching messages to consumers that are stuck on delivery to guarantee message order. </p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/7553" target="_blank" rel="noopener noreferrer">PR-7553</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="reestablish-namespace-bundle-ownership-from-false-negative-releasing-and-false-positive-acquiring">Reestablish namespace bundle ownership from false negative releasing and false positive acquiring<a href="#reestablish-namespace-bundle-ownership-from-false-negative-releasing-and-false-positive-acquiring" class="hash-link" aria-label="Direct link to Reestablish namespace bundle ownership from false negative releasing and false positive acquiring" title="Direct link to Reestablish namespace bundle ownership from false negative releasing and false positive acquiring">​</a></h3><p>In acquiring/releasing namespace bundle ownership, ZooKeeper might be disconnected before or after these operations are persisted in the ZooKeeper cluster. It leads to inconsistency between the local ownership cache and ZooKeeper cluster.</p><p>In 2.6.2, we fix the issue with the following:</p><ul><li>In ownership releasing, do not retain ownership in failure.</li><li>In ownership checking, querying and acquiring, reestablish the lost ownership in false negative releasing and false positive acquiring.</li></ul><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/7773" target="_blank" rel="noopener noreferrer">PR-7773</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="enable-users-to-configure-the-executor-pool-size">Enable users to configure the executor pool size<a href="#enable-users-to-configure-the-executor-pool-size" class="hash-link" aria-label="Direct link to Enable users to configure the executor pool size" title="Direct link to Enable users to configure the executor pool size">​</a></h3><p>Before 2.6.2, the executor pool size in Pulsar was set to <code>20</code> when starting Pulsar services. Users could not configure the executor pool size.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">private final ScheduledExecutorService executor = Executors.newScheduledThreadPool(20,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">           new DefaultThreadFactory("pulsar"));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In 2.6.2, users can configure the executor pool size in the <code>broker.conf</code> file based on their needs.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/7782" target="_blank" rel="noopener noreferrer">PR-7782</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="add-replicated-check-for-checkinactivesubscriptions">Add replicated check for <code>checkInactiveSubscriptions</code><a href="#add-replicated-check-for-checkinactivesubscriptions" class="hash-link" aria-label="Direct link to add-replicated-check-for-checkinactivesubscriptions" title="Direct link to add-replicated-check-for-checkinactivesubscriptions">​</a></h3><p>After the replicated subscription is deleted by <code>checkInactiveSubscriptions</code>, replicated subscriptions are created with <code>receiveSubscriptionUpdated</code>. In this case, the position becomes the latest position.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">topic.createSubscription(update.getSubscriptionName(),</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        InitialPosition.Latest, true /* replicateSubscriptionState */);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In 2.6.2, the replicated subscription is excluded from automatic deletion by fixing the <code>PersistentTopic</code>.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/8066" target="_blank" rel="noopener noreferrer">PR-8066</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="upgrade-jetty-util-version-to-9431">Upgrade jetty-util version to 9.4.31<a href="#upgrade-jetty-util-version-to-9431" class="hash-link" aria-label="Direct link to Upgrade jetty-util version to 9.4.31" title="Direct link to Upgrade jetty-util version to 9.4.31">​</a></h3><p>Pulsar client depends on jetty-util. Jetty-util versions earlier than 9.4.30 contain known vulnerabilities.</p><p>In 2.6.2, we upgrade the jetty-util version to <code>9.4.31</code> to enhance security.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/8035" target="_blank" rel="noopener noreferrer">PR-8035</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="add-command-to-delete-a-clusters-metadata-from-zookeeper">Add command to delete a cluster's metadata from ZooKeeper<a href="#add-command-to-delete-a-clusters-metadata-from-zookeeper" class="hash-link" aria-label="Direct link to Add command to delete a cluster's metadata from ZooKeeper" title="Direct link to Add command to delete a cluster's metadata from ZooKeeper">​</a></h3><p>When we share the same ZooKeeper and BookKeeper cluster among multiple broker clusters, if a cluster was removed, its metadata in ZooKeeper were also removed.</p><p>In 2.6.2, we fix the issue in the following ways:</p><ul><li>Add a <code>PulsarClusterMetadataTeardown</code> class to delete the relative nodes from ZooKeeper;</li><li>Wrap the class to <code>bin/pulsar</code> script.</li></ul><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/8169" target="_blank" rel="noopener noreferrer">PR-8169</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="replace-eventloop-with-threadpoolexecutor-to-improve-performance-instead-of-eventloop">Replace EventLoop with ThreadPoolExecutor to improve performance instead of EventLoop<a href="#replace-eventloop-with-threadpoolexecutor-to-improve-performance-instead-of-eventloop" class="hash-link" aria-label="Direct link to Replace EventLoop with ThreadPoolExecutor to improve performance instead of EventLoop" title="Direct link to Replace EventLoop with ThreadPoolExecutor to improve performance instead of EventLoop">​</a></h3><p>In 2.6.2, we replace EventLoop with a native JDK thread pool(ThreadPoolExecutor) to improve performance.</p><p>The following is the test result with pulsar perf.</p><p>Before 2.6.1:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Aggregated throughput stats --- 11715556 records received --- 68813.420 msg/s --- 537.605 Mbit/s</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In 2.6.2：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Aggregated throughput stats --- 18392800 records received --- 133314.602 msg/s --- 1041.520 Mbit/s</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/8208" target="_blank" rel="noopener noreferrer">PR-8208</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fix-deadlock-that-occurred-during-topic-ownership-check">Fix deadlock that occurred during topic ownership check<a href="#fix-deadlock-that-occurred-during-topic-ownership-check" class="hash-link" aria-label="Direct link to Fix deadlock that occurred during topic ownership check" title="Direct link to Fix deadlock that occurred during topic ownership check">​</a></h3><p>Some broker servers had deadlocks while splitting namespace bundles. When checking the thread dump of the broker, some threads were blocked in <code>NamespaceService#getBundle()</code>.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">"pulsar-ordered-OrderedExecutor-7-0" #34 prio=5 os_prio=0 tid=0x00007eeeab05a800 nid=0x81a5 waiting on condition [0x00007eeeafbd2000]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  java.lang.Thread.State: WAITING (parking)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">       at sun.misc.Unsafe.park(Native Method)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">       - parking to wait for  &lt;0x00007f17fa965418&gt; (a java.util.concurrent.CompletableFuture$Signaller)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">       at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">       at org.apache.pulsar.common.naming.NamespaceBundleFactory.getBundles(NamespaceBundleFactory.java:155)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The reason for the issue is that the <code>getBundle()</code> method leads to deadlock in <code>NamespaceService#isTopicOwned()</code>. To fix the issue, we remove the <code>getBundle()</code> method. When <code>isTopicOwned()</code> returns <code>false</code>, the bundle metadata is cached and can be got asynchronously. When the client reconnects the next time, Pulsar returns the correct bundle metadata from the cache.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/8406" target="_blank" rel="noopener noreferrer">PR-8406</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="proxy">Proxy<a href="#proxy" class="hash-link" aria-label="Direct link to Proxy" title="Direct link to Proxy">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="enable-users-to-configure-advertisedaddress-in-proxy">Enable users to configure <code>advertisedAddress</code> in proxy<a href="#enable-users-to-configure-advertisedaddress-in-proxy" class="hash-link" aria-label="Direct link to enable-users-to-configure-advertisedaddress-in-proxy" title="Direct link to enable-users-to-configure-advertisedaddress-in-proxy">​</a></h3><p>Before 2.6.2, users could not configure <code>advertisedAddress</code> on the proxy side. In 2.6.2, users can configure <code>advertisedAddress</code> in proxy just as they do in Pulsar broker.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/7542" target="_blank" rel="noopener noreferrer">PR-7542</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="add-proxy-plugin-interface-to-support-user-defined-additional-servlet">Add proxy plugin interface to support user defined additional servlet<a href="#add-proxy-plugin-interface-to-support-user-defined-additional-servlet" class="hash-link" aria-label="Direct link to Add proxy plugin interface to support user defined additional servlet" title="Direct link to Add proxy plugin interface to support user defined additional servlet">​</a></h3><p>To enable users to access the broker flexibly, Pulsar provides plugins similar to broker protocol and broker interceptor. However, users could not access the proxy before 2.6.2.</p><p>To enable users to customize data requests in proxy, we add the protocol plugin for proxy in 2.6.2.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/8067" target="_blank" rel="noopener noreferrer">PR-8067</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fix-the-null-exception-when-starting-the-proxy-service">Fix the null exception when starting the proxy service<a href="#fix-the-null-exception-when-starting-the-proxy-service" class="hash-link" aria-label="Direct link to Fix the null exception when starting the proxy service" title="Direct link to Fix the null exception when starting the proxy service">​</a></h3><p>When enabling the broker TLS and broker client authentication with OAuth2 plugin,
the proxy service exits with an unexpected null exception.</p><p>The reason is that when initializing the flow, authentication is called, so the token client is not initialized before using.</p><p>In 2.6.2, we fix the null exception when starting the proxy service.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/8019" target="_blank" rel="noopener noreferrer">PR-8019</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="java-client">Java Client<a href="#java-client" class="hash-link" aria-label="Direct link to Java Client" title="Direct link to Java Client">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="support-input-stream-for-truststore-cert">Support input-stream for trustStore cert<a href="#support-input-stream-for-truststore-cert" class="hash-link" aria-label="Direct link to Support input-stream for trustStore cert" title="Direct link to Support input-stream for trustStore cert">​</a></h3><p>In 2.6.1, Pulsar supports dynamic cert loading by using input stream for TLS cert and key file. The feature is mainly used by container. However, container also requires dynamic loading for truststore certs and users cannot store trust-store cert into file-system. </p><p>In 2.6.2, Pulsar supports loading truststore cert dynamically using input stream.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/7442" target="_blank" rel="noopener noreferrer">PR-7442</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="avoid-subscribing-the-same-topic">Avoid subscribing the same topic<a href="#avoid-subscribing-the-same-topic" class="hash-link" aria-label="Direct link to Avoid subscribing the same topic" title="Direct link to Avoid subscribing the same topic">​</a></h3><p>The current key of <code>MultiTopicsConsumerImpl.topics</code> is the topic name passed by the user. The <code>topicNameValid</code> method checks if the name is valid and <code>topics</code> doesn't contain the key.</p><p>However, if a multi-topic consumer subscribes a partition of a subscribed partitioned topic,  <code>subscribeAsync</code> succeeds and a new <code>ConsumerImpl</code> of the same partition is created, which is redundant.</p><p>Also, if a multi-topic consumer subscribes <code>public/default/topic</code> or <code>persistent://public/default/topic</code>, while the initial subscribed topic is <code>topic</code>, the redundant consumers would be created.</p><p>In 2.6.2, we fix the issue in the following ways to avoid subscribing the same topic again:</p><ul><li>Use the full topic name as key for <code>MultiTopicsConsumerImpl.topics</code>.</li><li>Check that both the full topic name and the full partitioned topic name do not exist in <code>MultiTopicsConsumerImpl.topics</code> when <code>subscribeAsync</code> is called.</li><li>Throw a different exception to a different topic is invalid and the topic is already subscribed</li></ul><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/7823" target="_blank" rel="noopener noreferrer">PR-7823</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="cpp-client">CPP Client<a href="#cpp-client" class="hash-link" aria-label="Direct link to CPP Client" title="Direct link to CPP Client">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="wait-for-all-seek-operations-complete">Wait for all seek operations complete<a href="#wait-for-all-seek-operations-complete" class="hash-link" aria-label="Direct link to Wait for all seek operations complete" title="Direct link to Wait for all seek operations complete">​</a></h3><p>When a partitioned consumer calls <code>seek</code>, it waits for only one partition's seek operation completion because each internal consumer calls callback(result) to complete the same promise.</p><p>In 2.6.2, we use the following methods to avoid this problem:</p><ul><li>Add a <code>MultiResultCallback</code> implementation, the callback completes only when all N events complete successfully or one of N events fails.</li><li>Use <code>MultiResultCallback</code> to wrap callback from <code>PartitionedConsumerImpl::seekAsync</code>.</li></ul><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/7216" target="_blank" rel="noopener noreferrer">PR-7216</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="make-clear-thread-safe">Make <code>clear()</code> thread-safe<a href="#make-clear-thread-safe" class="hash-link" aria-label="Direct link to make-clear-thread-safe" title="Direct link to make-clear-thread-safe">​</a></h3><p>Before 2.6.2, the <code>clear()</code> methods of <code>BatchAcknowledgementTracker</code> and <code>UnAckedMessageTrackerEnabled</code> are not thread-safe.</p><p>In 2.6.2, we acquire a mutex in these <code>clear()</code> methods to make it thread-safe.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/7862" target="_blank" rel="noopener noreferrer">PR-7862</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="add-snappy-library-to-docker-images-for-building-c-packages">Add Snappy library to Docker images for building C++ packages<a href="#add-snappy-library-to-docker-images-for-building-c-packages" class="hash-link" aria-label="Direct link to Add Snappy library to Docker images for building C++ packages" title="Direct link to Add Snappy library to Docker images for building C++ packages">​</a></h3><p>The program crashes when Snappy compression is enabled on the C++ client packaged as RPM/DEB. This is because Snappy library is not included in the Docker image for building the RPM/DEB package.</p><p>In 2.6.2, we add the Snappy library to the docker images to avoid the issue.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/8086" target="_blank" rel="noopener noreferrer">PR-8086</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="support-key-based-batching">Support key based batching<a href="#support-key-based-batching" class="hash-link" aria-label="Direct link to Support key based batching" title="Direct link to Support key based batching">​</a></h3><p>Support key based batching for the C++ client. In addition, currently, the implementation of <code>BatchMessageContainer</code> is coupling to <code>ProducerImpl</code> tightly. The batch message container registers a timer to the producer's executor and the timeout callback is also the producer's method. Even its <code>add</code> method could call <code>sendMessage</code> to send a batch to the producer's pending queue. These should be the producer's work.</p><p>In 2.6.2, we implement the feature in the following ways:</p><ul><li>Add a <code>MessageAndCallbackBatch</code> to store a <code>MessageImpl</code> of serialized single messages and a callback list.</li><li>Add a <code>BatchMessageContainerBase</code> to provide interface methods and methods like update/clear message number/bytes, create <code>OpSendMsg</code>.</li><li>Let <code>ProducerImpl</code> manage the batch timer and determine whether to create <code>OpSendMsg</code> from <code>BatchMessageContainerBase</code> and send it.</li><li>Make <code>BatchMessageContainer</code> inherit <code>BatchMessageContainerBase</code>, it only manages a <code>MessageAndCallbackBatch</code>.</li><li>Add a <code>BatchMessageKeyBasedContainer</code> that inherits <code>BatchMessageContainerBase</code>, it manages a map of message key and <code>MessageAndCallbackBatch</code>.</li><li>Add a producer config to change batching type.</li></ul><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/7996" target="_blank" rel="noopener noreferrer">PR-7996</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="functions">Functions<a href="#functions" class="hash-link" aria-label="Direct link to Functions" title="Direct link to Functions">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="enable-kubernetes-runtime-to-customize-function-instance-class-path">Enable Kubernetes runtime to customize function instance class path<a href="#enable-kubernetes-runtime-to-customize-function-instance-class-path" class="hash-link" aria-label="Direct link to Enable Kubernetes runtime to customize function instance class path" title="Direct link to Enable Kubernetes runtime to customize function instance class path">​</a></h3><p>Before 2.6.2, the function worker's classpath is used to configure the function instance (runner)'s classpath. When the broker (function worker) uses an image that is different from the function instance (runner) for Kubernetes runtime, the classpath is wrong and the function instance could not load the instance classes.</p><p>In 2.6.2, we add a function instance classpath entry to the Kubernetes runtime config, and construct the function launch command accordingly.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/7844" target="_blank" rel="noopener noreferrer">PR-7844</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="set-dryrun-of-kubernetes-runtime-to-null">Set <code>dryrun</code> of Kubernetes Runtime to null<a href="#set-dryrun-of-kubernetes-runtime-to-null" class="hash-link" aria-label="Direct link to set-dryrun-of-kubernetes-runtime-to-null" title="Direct link to set-dryrun-of-kubernetes-runtime-to-null">​</a></h3><p>Before 2.6.2, we upgraded the <code>client-java</code> of Kubernetes to <code>0.9.2</code> to enhance security. However, during the creation of statefulsets, secrets, and services, the value of <code>dryrun</code> was set to <code>true</code>, which was not accepted by Kubernetes. Only <code>All</code> is allowed in Kubernetes. </p><p>In 2.6.2, we set the <code>dryrun</code> of Kubernetes Runtime to null.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/8064" target="_blank" rel="noopener noreferrer">PR-8064</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pulsar-sql">Pulsar SQL<a href="#pulsar-sql" class="hash-link" aria-label="Direct link to Pulsar SQL" title="Direct link to Pulsar SQL">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="upgrade-presto-version-to-332">Upgrade Presto version to 332<a href="#upgrade-presto-version-to-332" class="hash-link" aria-label="Direct link to Upgrade Presto version to 332" title="Direct link to Upgrade Presto version to 332">​</a></h3><p>Upgrade Presto version to 332. Resolve different packages between prestosql and prestodb. Although the latest version is 334, versions higher than 333 require Java 11.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/7194" target="_blank" rel="noopener noreferrer">PR-7194</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pulsar-admin">pulsar-admin<a href="#pulsar-admin" class="hash-link" aria-label="Direct link to pulsar-admin" title="Direct link to pulsar-admin">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="add-cli-command-to-get-the-last-message-id">Add CLI command to get the last message ID<a href="#add-cli-command-to-get-the-last-message-id" class="hash-link" aria-label="Direct link to Add CLI command to get the last message ID" title="Direct link to Add CLI command to get the last message ID">​</a></h3><p>Add <code>last-message-id</code> command in CLI, so users can get the last message ID with this command.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/8082" target="_blank" rel="noopener noreferrer">PR-8082</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="support-deleting-schema-ledgers-when-deleting-topics">Support deleting schema ledgers when deleting topics<a href="#support-deleting-schema-ledgers-when-deleting-topics" class="hash-link" aria-label="Direct link to Support deleting schema ledgers when deleting topics" title="Direct link to Support deleting schema ledgers when deleting topics">​</a></h3><p>Users could not delete schema of topics with the <code>PersistentTopics#deleteTopic</code> and <code>PersistentTopics#deletePartitionedTopic</code> in REST APIs. After topics were deleted, the schema ledgers still existed with adding an empty schema ledger.</p><p>In 2.6.2, we implement the feature in the following ways:</p><ul><li>Add a <code>deleteSchema</code> query param to REST APIs of deleting topics/partitioned topics;</li><li>Add a map to record the created ledgers in <code>BookkeeperSchemaStorage</code>;</li><li>Expose <code>deleteSchema</code> param in pulsar-admin APIs;</li><li>Delete schema ledgers when deleting the cluster with <code>-a</code> option.</li></ul><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/8167" target="_blank" rel="noopener noreferrer">PR-8167</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="support-deleting-all-data-associated-with-a-cluster">Support deleting all data associated with a cluster<a href="#support-deleting-all-data-associated-with-a-cluster" class="hash-link" aria-label="Direct link to Support deleting all data associated with a cluster" title="Direct link to Support deleting all data associated with a cluster">​</a></h3><p>When multiple broker clusters shared the same bookie cluster, if users wanted to remove a broker cluster, the associated ledgers in bookies were not deleted as expected.</p><p>In 2.6.2, we add a <code>cluster delete</code> command to enable users to delete all the data associated with the cluster.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/8133" target="_blank" rel="noopener noreferrer">PR-8133</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pulsar-perf">Pulsar Perf<a href="#pulsar-perf" class="hash-link" aria-label="Direct link to Pulsar Perf" title="Direct link to Pulsar Perf">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="enable-users-to-configure-iothread-number-in-pulsar-perf">Enable users to configure ioThread number in pulsar-perf<a href="#enable-users-to-configure-iothread-number-in-pulsar-perf" class="hash-link" aria-label="Direct link to Enable users to configure ioThread number in pulsar-perf" title="Direct link to Enable users to configure ioThread number in pulsar-perf">​</a></h3><p>In pulsar-perf, the default Pulsar client ioThread number is <code>Runtime.getRuntime().availableProcessors()</code> and users could not configure it in the command line. When running a pulsar-perf producer, it may cause messages to enqueue competition and lead to high latency.</p><p>In 2.6.2, we implement the feature in the following ways:</p><ol><li>Enable users to configure the ioThread number in the command line;</li><li>Change the default ioThead number from <code>Runtime.getRuntime().availableProcessors()</code> to <code>1</code></li></ol><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/8090" target="_blank" rel="noopener noreferrer">PR-8090</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="more-information">More information<a href="#more-information" class="hash-link" aria-label="Direct link to More information" title="Direct link to More information">​</a></h2><ul><li>To download Apache Pulsar 2.6.2, click <a href="https://pulsar.apache.org/download/" target="_blank" rel="noopener noreferrer">download</a>.</li><li>For more information about Apache Pulsar 2.6.2, see <!-- -->[2.6.2 release notes]<!-- -->(<a href="https://pulsar.apache.org/release-notes/#2.6.2" target="_blank" rel="noopener noreferrer">https://pulsar.apache.org/release-notes/#2.6.2</a> and <a href="https://github.com/apache/pulsar/pulls?q=is%3Apr+label%3Arelease%2F2.6.2+is%3Aclosed" target="_blank" rel="noopener noreferrer">2.6.2 PR list</a>.</li></ul><p>If you have any questions or suggestions, contact us with mailing lists or slack.</p><ul><li><a href="mailto:users@pulsar.apache.org" target="_blank" rel="noopener noreferrer">users@pulsar.apache.org</a></li><li><a href="mailto:dev@pulsar.apache.org" target="_blank" rel="noopener noreferrer">dev@pulsar.apache.org</a></li><li>Pulsar slack channel: <a href="https://apache-pulsar.slack.com/" target="_blank" rel="noopener noreferrer">https://apache-pulsar.slack.com/</a></li><li>Self-registration at <a href="https://apache-pulsar.herokuapp.com/" target="_blank" rel="noopener noreferrer">https://apache-pulsar.herokuapp.com/</a></li></ul><p>Looking forward to your contributions to <a href="https://github.com/apache/pulsar" target="_blank" rel="noopener noreferrer">Pulsar</a>.</p>]]></content>
        <author>
            <name>Xiaolong Ran</name>
            <uri>https://twitter.com/wolf4j1</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Pulsar Summit Asia 2020 Schedule is Now Online]]></title>
        <id>https://pulsar.apache.org/blog/2020/11/04/pulsar-summit-asia-schedule</id>
        <link href="https://pulsar.apache.org/blog/2020/11/04/pulsar-summit-asia-schedule"/>
        <updated>2020-11-04T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[The Pulsar Summit is a global conference dedicated to sharing best practices, project updates, and insights across the Apache Pulsar community. Pulsar’s inaugural global summit, the Pulsar Summit Virtual Conference 2020, took place in June 2020 and featured more than 30 sessions from top Pulsar experts, developers and thought-leaders from companies such as Salesforce, Verizon Media, and Splunk, and the conference attracted 600+ attendees.]]></summary>
        <content type="html"><![CDATA[<p>The Pulsar Summit is a global conference dedicated to sharing best practices, project updates, and insights across the Apache Pulsar community. Pulsar’s inaugural global summit, the <a href="https://pulsar-summit.org/en/event/virtual-conference-2020" target="_blank" rel="noopener noreferrer">Pulsar Summit Virtual Conference 2020</a>, took place in June 2020 and featured more than 30 sessions from top Pulsar experts, developers and thought-leaders from companies such as Salesforce, Verizon Media, and Splunk, and the conference attracted 600+ attendees. </p><p>The rapid adoption of Apache Pulsar over the past few years has led to a high demand for Pulsar events. Today, StreamNative, a cloud-native event streaming company powered by Apache Pulsar, and also the host of <a href="https://pulsar-summit.org/en/event/asia-2020" target="_blank" rel="noopener noreferrer">Pulsar Summit Asia 2020</a>, announced more details on the upcoming event. Taking place on November 28th &amp; 29th, the two-day event will feature more than 30 live sessions by tech leads, open-source developers, software engineers, and software architects from <strong>Splunk, Yahoo! JAPAN, TIBCO, China Mobile, Tencent, Dada Group, KingSoft Cloud, Tuya Smart, and PingCAP</strong>, and will include sessions on Pulsar use cases, its ecosystem, operations, and technology deep dives. </p><p>See below for some of our featured sessions, which include both English and Mandarin tracks:</p><ul><li><a href="https://pulsar-summit.org/en/event/asia-2020/sessions/how-splunk-is-using-pulsar-io" target="_blank" rel="noopener noreferrer">How Splunk is using Pulsar IO （English）</a> - In this talk, Jerry Peng, Principal Software Engineer at Splunk will share insights on Splunk’s evaluation and decision to adopt the Pulsar IO framework, details on how Splunk's DSP product leverages the Pulsar IO framework, and insights on batch sources, a feature that was recently added to Pulsar IO.</li></ul><ul><li><a href="https://pulsar-summit.org/en/event/asia-2020/sessions/apache%E2%80%93pulsar%E2%80%93at%E2%80%93yahoo%E2%80%93japan%E2%80%93adoption%E2%80%93operational%E2%80%93experiences%E2%80%93and%E2%80%93future" target="_blank" rel="noopener noreferrer">Apache Pulsar at Yahoo! JAPAN - Adoption, Operational Insights and the Future（English）</a> - In this talk, Nozomi Kurihara, Manager of the Messaging Platform team in Yahoo!Japan Corporation will share practical use cases of Apache Pulsar on production and insights on how to operate Apache Pulsar for large scale data streams.</li><li><a href="https://pulsar-summit.org/en/event/asia-2020/sessions/running-apache-pulsar-on-tencent-cloud-new-challenges-discussion-practice" target="_blank" rel="noopener noreferrer">Running Apache Pulsar on Tencent Cloud: New Challenges, Discussion, Practice (Mandarin)</a> - In this talk, Lin Lin, senior engineer of Tencent Cloud will address how Pulsar helps solve challenges with message queues on Tencent Cloud, such as dynamic expansion and contraction, and large numbers of partitions.</li><li><a href="https://pulsar-summit.org/en/event/asia-2020/sessions/how-bigo-builds-real-time-message-system-with-apache-pulsar-and-flink" target="_blank" rel="noopener noreferrer">How BIGO built a Real-Time Message System with Apache Pulsar and Flink (Mandarin) </a> - In this talk, Hang Chen, Leader of the Messaging Platform team from BIGO will share how BIGO leveraged Apache Pulsar to build a real-time message system and how they tune Pulsar for production.</li><li><a href="https://pulsar-summit.org/en/event/asia-2020/sessions/a-daredevil-story-apache-pulsar-in-zhaopin-com" target="_blank" rel="noopener noreferrer">A Daredevil' Story: Apache Pulsar in Zhaopin.com (Mandarin)</a> - In this talk, Shunli Gao, Senior Engineer at Zhaopin will share details on the development and future prospects of Apache Pulsar at Zhaopin.</li><li><a href="https://pulsar-summit.org/en/event/asia-2020/sessions/transactional-event-streaming-with-apache-pulsar" target="_blank" rel="noopener noreferrer">Transactional Event Streaming with Apache Pulsar (Mandarin)</a> - In this talk, Bo Cong, software engineer at StreamNative will share how Pulsar transaction works and how it is supported by Pulsar Functions.</li><li><a href="https://pulsar-summit.org/en/event/asia-2020/sessions/benchmarking-pulsar-vs-kafka-on-aws-process-results" target="_blank" rel="noopener noreferrer">Benchmarking Pulsar vs. Kafka on AWS: Process &amp; Results (Mandarin) </a> - In this talk, Penghui Li, the Apache Pulsar PMC member and software engineer at StreamNative will share the results of a benchmark test comparing Pulsar and Kafka that was run on AWS. The test ran Pulsar and Kafka under the same hardware environments on the write throughput, tailing read throughput, catchup read throughput, publish latency, and end-to-end latency of these two systems.</li></ul><p>More featured talks coming soon!</p><p>The number and diversity of the sessions demonstrate the accelerated adoption of Pulsar in PoC and production environments, as well as the rapid development in functionalities and diverse ecosystems. To learn more about how companies leverage Pulsar for <strong>messaging and event streaming, serverless computing, real-time analytics, event-driven applications, and mission-critical deployment management in production</strong>, <a href="https://hopin.to/events/pulsar-summit-asia-2020" target="_blank" rel="noopener noreferrer">RSVP</a> today!</p><p>We would like to say special thanks to the speakers for sharing their Pulsar expertise and experience with the community.</p><h1>About Apache Pulsar <a href="https://pulsar.apache.org" target="_blank" rel="noopener noreferrer">Apache Pulsar</a> is a cloud-native, distributed messaging and streaming platform that manages hundreds of billions of events per day. Pulsar was originally developed at Yahoo! as the unified messaging platform connecting critical Yahoo applications such as Yahoo Finance, Yahoo Mail, and Flickr to data.</h1><p>Today, Pulsar is used for real-time event streaming use cases, including data pipelines, microservices, and stream processing. Its cloud-native architecture and built-in multi-tenancy differentiate it from its predecessors and uniquely position it as an enterprise-ready, event streaming platform. Pulsar's multi-layer architecture enables stability, reliability, scalability, and high performance, simplifies management and reduces costs. Its built-in multi-tenancy and geo-replication ensure that companies are able to build applications with disaster recovery. </p><h1>About StreamNative <a href="https://streamnative.io" target="_blank" rel="noopener noreferrer">StreamNative</a>, founded by the original developers of Apache Pulsar and Apache BookKeeper, enables organizations to build the next generation of messaging and event streaming applications. Leveraging Apache Pulsar and BookKeeper, we optimize for scalability and resiliency while reducing the overhead management and complexity required by incumbent technologies. We do this by offering Pulsar and StreamNative’s ‘products as a service’. StreamNative is building a world-class team that is passionate about building amazing products and committed to customer success.</h1>]]></content>
        <author>
            <name>Carolyn King, Dianjin Wang</name>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Pulsar Summit Asia 2020 CFP is now open]]></title>
        <id>https://pulsar.apache.org/blog/2020/09/01/pulsar-summit-asia-2020-cfp</id>
        <link href="https://pulsar.apache.org/blog/2020/09/01/pulsar-summit-asia-2020-cfp"/>
        <updated>2020-09-01T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[The Pulsar Summit is an annual conference dedicated to the Apache Pulsar community. The summit brings together an international audience of CTOs/CIOs, developers, data architects, data scientists, Apache Pulsar committers/contributors, and the messaging and streaming community. Together, they share experiences, ideas, and insights on Pulsar and its growing community, and receive hands-on training sessions led by Pulsar experts.]]></summary>
        <content type="html"><![CDATA[<p>The Pulsar Summit is an annual conference dedicated to the Apache Pulsar community. The summit brings together an international audience of CTOs/CIOs, developers, data architects, data scientists, Apache Pulsar committers/contributors, and the messaging and streaming community. Together, they share experiences, ideas, and insights on Pulsar and its growing community, and receive hands-on training sessions led by Pulsar experts.</p><p>After a very successful Pulsar Summit Virtual Conference in June, we have decided to present our Pulsar Summit Asia 2020 in the same way on November 28-29, 2020. The two-day conference will be free to attend! Are you interested in presenting? Suggested topics include Pulsar use cases, operations, technology deep dive, and ecosystem. CFP and registration are now open!</p><p><img loading="lazy" src="/assets/images/pulsar-summit-asia-2020-432702f8b984b9bca0dba0d33c4aa951.png" width="1440" height="440" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="speak-at-pulsar-summit">Speak at Pulsar Summit<a href="#speak-at-pulsar-summit" class="hash-link" aria-label="Direct link to Speak at Pulsar Summit" title="Direct link to Speak at Pulsar Summit">​</a></h2><p>The opportunity to speak at the second global Pulsar Summit is a great chance to participate in the rapidly growing Apache Pulsar community. Join us for the opportunity to be on stage with top Pulsar thought-leaders, including Apache Pulsar PMC members Sijie Guo and Jia Zhai from <a href="https://streamnative.io/" target="_blank" rel="noopener noreferrer">StreamNative</a>, Penghui Li from Zhaopin.com, Nozomi Kurihara from <a href="https://about.yahoo.co.jp/" target="_blank" rel="noopener noreferrer">Yahoo Japan Corporation</a>, and other community leaders such as Dezhi Liu from <a href="https://www.tencent.com/en-us" target="_blank" rel="noopener noreferrer">Tencent</a>, Vincent Xie from <a href="https://www.bestpay.com.cn/" target="_blank" rel="noopener noreferrer">Orange Finance</a>. Proposals for speaker presentations are currently being accepted. Suggested topics include Pulsar use cases, operations, technology deep dive, and ecosystem. Submissions are open until <strong>October 14, 2020</strong>.</p><p>If you have questions about submitting a proposal, or want some feedback or advice in general, please do not hesitate to reach out to <a href="mailto:organizers@pulsar-summit.org" target="_blank" rel="noopener noreferrer">organizers@pulsar-summit.org</a>. We are happy to help out! Details are available on the <a href="https://pulsar-summit.org/en/event/asia-2020/cfp" target="_blank" rel="noopener noreferrer">CFP website</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="dates-to-remember">Dates to remember<a href="#dates-to-remember" class="hash-link" aria-label="Direct link to Dates to remember" title="Direct link to Dates to remember">​</a></h2><ul><li>CFP opens: September 1, 2020</li><li>CFP closes: October 21, 2020 - 23:59 (CST: China Standard Time/UTC+8 time zone)</li><li>CFP notification: October 28, 2020</li><li>Schedule announcement: November 4, 2020</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="speaker-benefits">Speaker benefits<a href="#speaker-benefits" class="hash-link" aria-label="Direct link to Speaker benefits" title="Direct link to Speaker benefits">​</a></h2><p>When your speaking proposal is approved, you will enjoy the following benefits:</p><ul><li>The opportunity to expand your network and raise your profile in the Apache Pulsar community.</li><li>The chance to demonstrate your experience and deep knowledge in the rapidly growing event streaming space.</li><li>Your name, title, company, and bio will be featured on the Pulsar Summit Asia 2020 website.</li><li>Your session will be added to the Pulsar Summit YouTube Channel and promoted on Twitter and LinkedIn.</li><li>A professionally produced video of your presentation.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="speaker-requirements">Speaker requirements<a href="#speaker-requirements" class="hash-link" aria-label="Direct link to Speaker requirements" title="Direct link to Speaker requirements">​</a></h2><p>In addition to your talk, we ask that you actively participate in promoting the event via your personal and company channels. These include posting on your Twitter, LinkedIn, WeChat, Weibo, blog and other channels. We would also like to work directly with your marketing team on co-marketing opportunities. These include, but are not limited to, posting to your company’s Twitter, LinkedIn, WeChat and other developer communities and sending a dedicated Pulsar Summit email to your company’s email list. Contact us at <a href="mailto:organizers@pulsar-summit.org" target="_blank" rel="noopener noreferrer">organizers@pulsar-summit.org</a> with any questions. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="registration">Registration<a href="#registration" class="hash-link" aria-label="Direct link to Registration" title="Direct link to Registration">​</a></h2><p>If you are interested in attending Pulsar Summit Asia 2020, please sign in Hopin and <a href="https://hopin.to/events/pulsar-summit-asia-2020" target="_blank" rel="noopener noreferrer">checkout our event</a>. Your ideas are very important to us, and we will prepare the content accordingly. </p><p>After you checkout the event in Hopin, you will be notified with the event update at the first time when announcing.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="sponsor-pulsar-summit">Sponsor Pulsar Summit<a href="#sponsor-pulsar-summit" class="hash-link" aria-label="Direct link to Sponsor Pulsar Summit" title="Direct link to Sponsor Pulsar Summit">​</a></h2><p>Pulsar Summit is a community run conference and your support is needed. Sponsoring this event will provide a great opportunity for your organization to further engage with the Apache Pulsar community. <a href="mailto:partners@pulsar-summit.org" target="_blank" rel="noopener noreferrer">Contact us</a> to learn more.</p><p>Help us make #PulsarSummit 2020 a big success by spreading the word and submitting your proposal! Follow us on Twitter (<a href="https://twitter.com/PulsarSummit" target="_blank" rel="noopener noreferrer">@pulsarsummit</a>) to receive the latest updates of the conference!</p><p>Hope to see you at Pulsar Summit Asia 2020!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="about-apache-pulsar">About Apache Pulsar<a href="#about-apache-pulsar" class="hash-link" aria-label="Direct link to About Apache Pulsar" title="Direct link to About Apache Pulsar">​</a></h2><p>Apache Pulsar is a cloud-native, distributed messaging and streaming platform that manages hundreds of billions of events per day. Pulsar was originally developed and deployed inside Yahoo as the consolidated messaging platform connecting critical Yahoo applications such as Yahoo Finance, Yahoo Mail, and Flickr, to data. Pulsar was contributed to open source by Yahoo in 2016 and became a top-level Apache Software Foundation project in 2018.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="about-streamnative">About StreamNative<a href="#about-streamnative" class="hash-link" aria-label="Direct link to About StreamNative" title="Direct link to About StreamNative">​</a></h2><p>StreamNative is the organizer of Pulsar Summit Asia 2020. StreamNative is enabling organizations to build the next generation of messaging and event streaming applications. Leveraging Apache Pulsar and BookKeeper, we optimize for scalability and resiliency while reducing the overhead management and complexity required by incumbent technologies. We do this by offering Pulsar and StreamNative’s "products as a service". StreamNative is building a world-class team that is passionate about building amazing products and committed to customer success.</p>]]></content>
        <author>
            <name>Jennifer Huang</name>
            <uri>https://twitter.com/Jennife06125739</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Apache Pulsar Celebrates 300 Contributors]]></title>
        <id>https://pulsar.apache.org/blog/2020/08/24/Pulsar-300-contributors</id>
        <link href="https://pulsar.apache.org/blog/2020/08/24/Pulsar-300-contributors"/>
        <updated>2020-08-24T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Dear Pulsar community,]]></summary>
        <content type="html"><![CDATA[<p>Dear Pulsar community,</p><p>Over the last few years, the shift to real-time streaming technologies has bolstered the adoption of Pulsar and there has been a major increase in both the interest and adoption of Pulsar in 2020 alone. With Pulsar being sought out by companies developing messaging and event-streaming applications — from Fortune 100 companies to forward-thinking start-ups — the community is growing quickly. </p><p>This community growth has contributed to a new milestone for Pulsar - our <a href="https://github.com/apache/pulsar/graphs/contributors" target="_blank" rel="noopener noreferrer">300th contributor</a> to the Pulsar repository. This milestone is even more exciting given that we added 100 contributors in the last 8 months alone!</p><p>As many of you know, Apache Pulsar is a cloud-native messaging and event streaming platform that has experienced rapid growth since it was committed to open source in 2016. Pulsar graduated as a Top-Level Project (TLP) in September 2018, has launched 92 releases, attracted 5100+ commits from 300 contributors, received 6.5k+ stars, 1.6k+ forks, and 2.2k+ Slack users. </p><p>The influx of developers joining the Pulsar community is in large part due to the high market demand for next-generation messaging technologies, big-data insights, and real-time streaming. Top developers and industry leaders are joining the Pulsar community for the opportunity to help shape the future of this technology. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="community-events">Community Events<a href="#community-events" class="hash-link" aria-label="Direct link to Community Events" title="Direct link to Community Events">​</a></h2><p>To meet the high demand for education and training in the Pulsar community, the community has launched some key initiatives this year. We host weekly TGIP(Thank God It's Pulsar) training, which features Pulsar thought-leaders and Pulsar PMC Members. To meet global demand, we currently host two different weekly trainings. One <a href="https://www.youtube.com/watch?v=Vc_a2ppRzlI&amp;list=PLqRma1oIkcWhWAhKgImEeRiQi5vMlqTc-" target="_blank" rel="noopener noreferrer">TGIP training</a> runs on Pacific Time, and the other <a href="https://github.com/streamnative/tgip-cn" target="_blank" rel="noopener noreferrer">TGIP-CN training</a> runs on Beijing Time. </p><p>We also host monthly <a href="https://www.youtube.com/watch?v=mncXc_T6JkU&amp;list=PLqRma1oIkcWhfmUuJrMM5YIG8hjju62Ev" target="_blank" rel="noopener noreferrer">webinars</a> to bring together Pulsar and messaging community thought-leaders to share best practices, insights and product news. Thank <a href="https://twitter.com/merlimat" target="_blank" rel="noopener noreferrer">Matteo Merli</a>, <a href="https://twitter.com/addisonjh" target="_blank" rel="noopener noreferrer">Addison Higham</a>, Joe Francis, <a href="https://twitter.com/ShivjiJha" target="_blank" rel="noopener noreferrer">Shivji Kumar Jha</a>, <a href="https://twitter.com/DevinBost" target="_blank" rel="noopener noreferrer">Devin Bost</a>, <a href="https://twitter.com/PierreZ" target="_blank" rel="noopener noreferrer">Pierre Zemb</a>, <a href="https://twitter.com/jessetanderson" target="_blank" rel="noopener noreferrer">Jesse Anderson</a>, <a href="https://twitter.com/sijieg" target="_blank" rel="noopener noreferrer">Sijie Guo</a> and other speakers for contributing so much valuable knowledge.</p><p>This year also marked our first global summit, held in June 2020. Hosted by StreamNative and Splunk, the first-ever <a href="https://pulsar-summit.org/" target="_blank" rel="noopener noreferrer">Pulsar Summit Virtual Conference</a> featured 30+ talks from 20+ organizations. Thank all speakers for sharing your stories about Pulsar, and thank you to all of the attendees for joining the event.</p><p>We are excited to announce that we will be hosting Pulsar Summit Asia 2020 on November 28 and 29, and the call for presentations for this event will be coming soon.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pulsar-adoption">Pulsar Adoption<a href="#pulsar-adoption" class="hash-link" aria-label="Direct link to Pulsar Adoption" title="Direct link to Pulsar Adoption">​</a></h2><p>In addition to the growth in contributors, we are excited to see accelerated adoption of Pulsar in PoC and production environments. Pulsar is helping companies globally to unlock the power of real-time data and to grow their businesses with efficiency and simplicity. </p><p>Key adoption stories illustrate Pulsar's ability to handle mission-critical applications. These include <a href="https://streamnative.io/success-stories/tencent" target="_blank" rel="noopener noreferrer">Tencent’s adoption</a> of Pulsar for its transactional billing system, which processes more than 10 billion transactions and 10+ TBs of data daily. <a href="https://www.youtube.com/watch?v=FXQvsHz_S1A" target="_blank" rel="noopener noreferrer">Verizon Media is another success story</a>, having operated Pulsar in production for more than 5 years, managing millions of write requests/second, and supporting the business across six global data centers. Most recently Splunk, which had used Kafka in production environments for years, <a href="https://www.youtube.com/watch?v=_q8s3_0-BRQ" target="_blank" rel="noopener noreferrer">adopted Pulsar for their new data processor</a>. </p><p>For more insights on Pulsar adoption, you can find a list for companies using or contributing to Apache Pulsar on <a href="http://pulsar.apache.org/en/powered-by/" target="_blank" rel="noopener noreferrer">Pulsar Powered by page</a>. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ecosystem-development">Ecosystem Development<a href="#ecosystem-development" class="hash-link" aria-label="Direct link to Ecosystem Development" title="Direct link to Ecosystem Development">​</a></h2><p>Committed community partners have also contributed to key project advancements. Below, we look at two recent product launches.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ovhcloud-helps-companies-move-from-kafka-to-pulsar">OVHCloud Helps Companies Move from Kafka to Pulsar<a href="#ovhcloud-helps-companies-move-from-kafka-to-pulsar" class="hash-link" aria-label="Direct link to OVHCloud Helps Companies Move from Kafka to Pulsar" title="Direct link to OVHCloud Helps Companies Move from Kafka to Pulsar">​</a></h3><p>In March 2020, <a href="https://streamnative.io/blog/tech/2020-03-24-bring-native-kafka-protocol-support-to-apache-pulsar" target="_blank" rel="noopener noreferrer">OVHCloud and StreamNative launched Kafka-on-Pulsar (KoP)</a>, the result of the two companies working closely in partnership. <a href="https://github.com/streamnative/kop" target="_blank" rel="noopener noreferrer">KoP</a> enables Kafka users to migrate their existing Kafka applications and services to Pulsar without modifying the code. Although only recently released, KoP has already been adopted by several organizations and is being used in production environments. Moreover, KoP's availability is helping to expand Pulsar's adoption.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="china-mobile-helps-companies-move-from-rabbitmq-to-pulsar">China Mobile Helps Companies Move from RabbitMQ to Pulsar<a href="#china-mobile-helps-companies-move-from-rabbitmq-to-pulsar" class="hash-link" aria-label="Direct link to China Mobile Helps Companies Move from RabbitMQ to Pulsar" title="Direct link to China Mobile Helps Companies Move from RabbitMQ to Pulsar">​</a></h3><p>In June 2020, <a href="https://streamnative.io/blog/tech/2020-06-15-announcing-aop-on-pulsar" target="_blank" rel="noopener noreferrer">China Mobile and StreamNative announced the launch of another major platform upgrade, AMQP-on-Pulsar (AoP)</a>. Similar to KoP, <a href="https://github.com/streamnative/aop" target="_blank" rel="noopener noreferrer">AoP</a> allows organizations currently using RabbitMQ (or other AMQP message brokers) to migrate existing applications and services to Pulsar without code modification. Again, this is a key initiative that will help drive the adoption and usage of Pulsar.</p><p>You can find a number of other connections and integrations, such as MQTT-on-Pulsar for building IoT applications, in the <a href="https://hub.streamnative.io/" target="_blank" rel="noopener noreferrer">StreamNative Hub</a>.</p><p>These events and initiatives illustrate the Pulsar community's firm commitment to education and ecosystem development. More importantly, they demonstrate the momentum and growth we can expect in the future.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="special-thanks">Special Thanks<a href="#special-thanks" class="hash-link" aria-label="Direct link to Special Thanks" title="Direct link to Special Thanks">​</a></h2><p>We would like to thank the Pulsar community, contributors and committers, who have helped to drive development, growth and adoption for Pulsar. We would especially like to recognize our distinguished contributors and committers (including but not limited to): </p><ul><li><a href="https://github.com/merlimat" target="_blank" rel="noopener noreferrer">Matteo Merli</a> from <a href="https://www.splunk.com/" target="_blank" rel="noopener noreferrer">Splunk</a></li><li><a href="https://github.com/rdhabalia" target="_blank" rel="noopener noreferrer">Rajan Dhabalia</a> from <a href="https://www.verizonmedia.com/" target="_blank" rel="noopener noreferrer">Verizon Media</a></li><li><a href="https://github.com/sijie" target="_blank" rel="noopener noreferrer">Sijie Guo</a> from <a href="https://streamnative.io/" target="_blank" rel="noopener noreferrer">StreamNative</a></li><li><a href="https://github.com/srkukarni" target="_blank" rel="noopener noreferrer">Sanjeev Kulkarni</a> from <a href="https://www.splunk.com/" target="_blank" rel="noopener noreferrer">Splunk</a></li><li><a href="https://github.com/jerrypeng" target="_blank" rel="noopener noreferrer">Boyang Jerry Peng</a> from <a href="https://www.splunk.com/" target="_blank" rel="noopener noreferrer">Splunk</a></li><li><a href="https://github.com/ivankelly" target="_blank" rel="noopener noreferrer">Ivan Brendan Kelly</a> from <a href="https://www.splunk.com/" target="_blank" rel="noopener noreferrer">Splunk</a></li><li><a href="https://github.com/codelipenghui" target="_blank" rel="noopener noreferrer">Penghui Li</a> from <a href="http://www.zhaopin.com/" target="_blank" rel="noopener noreferrer">Zhaopin.com</a></li><li><a href="https://github.com/jiazhai" target="_blank" rel="noopener noreferrer">Jia Zhai</a> from <a href="https://streamnative.io/" target="_blank" rel="noopener noreferrer">StreamNative</a></li></ul><p>To view other contributors, see <a href="https://github.com/apache/pulsar/graphs/contributors" target="_blank" rel="noopener noreferrer">Pulsar contributor list</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="get-involved">Get Involved<a href="#get-involved" class="hash-link" aria-label="Direct link to Get Involved" title="Direct link to Get Involved">​</a></h2><p>We invite you to join this fast-growing community. Together, we will continue to develop technology to meet today’s most innovative messaging and event-streaming use cases and to help companies unlock the value of real-time data. </p><p>Whether it is joining our <a href="https://apache-pulsar.slack.com/" target="_blank" rel="noopener noreferrer">Pulsar Slack channel</a>, sharing your Pulsar story via a sponsored <a href="https://www.youtube.com/watch?v=mncXc_T6JkU&amp;list=PLqRma1oIkcWhfmUuJrMM5YIG8hjju62Ev" target="_blank" rel="noopener noreferrer">webinar</a> or case study, joining a <a href="https://github.com/streamnative/tgip" target="_blank" rel="noopener noreferrer">TGIP</a>/<a href="https://github.com/streamnative/tgip-cn" target="_blank" rel="noopener noreferrer">TGIP-CN</a>, or attending or speaking at the next Pulsar Summit, we look forward to connecting with you. </p><p>You can also subscribe our mailing lists: <a href="mailto:users-subscribe@pulsar.apache.org" target="_blank" rel="noopener noreferrer">users@pulsar.apache.org</a> and <a href="mailto:dev-subscribe@pulsar.apache.org" target="_blank" rel="noopener noreferrer">dev@pulsar.apache.org</a>.</p>]]></content>
        <author>
            <name>Jennifer Huang</name>
            <uri>https://twitter.com/Jennife06125739</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Apache Pulsar 2.6.1]]></title>
        <id>https://pulsar.apache.org/blog/2020/08/21/Apache-Pulsar-2-6-1</id>
        <link href="https://pulsar.apache.org/blog/2020/08/21/Apache-Pulsar-2-6-1"/>
        <updated>2020-08-21T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[We are excited to see that the Apache Pulsar community has successfully released 2.6.1 version after a lot of hard work. It is a great milestone for this fast-growing project and the Pulsar community. 2.6.1 is the result of a big effort from the community, with over 100 commits and a long list of improvements and bug fixes.]]></summary>
        <content type="html"><![CDATA[<p>We are excited to see that the Apache Pulsar community has successfully released 2.6.1 version after a lot of hard work. It is a great milestone for this fast-growing project and the Pulsar community. 2.6.1 is the result of a big effort from the community, with over 100 commits and a long list of improvements and bug fixes.</p><p>Here are some highlights and major features added in Pulsar 2.6.1.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="broker">Broker<a href="#broker" class="hash-link" aria-label="Direct link to Broker" title="Direct link to Broker">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="limit-the-batch-size-to-the-minimum-of-the-maxnumberofmessages-and-maxsizeofmessages">Limit the batch size to the minimum of the <code>maxNumberOfMessages</code> and <code>maxSizeOfMessages</code><a href="#limit-the-batch-size-to-the-minimum-of-the-maxnumberofmessages-and-maxsizeofmessages" class="hash-link" aria-label="Direct link to limit-the-batch-size-to-the-minimum-of-the-maxnumberofmessages-and-maxsizeofmessages" title="Direct link to limit-the-batch-size-to-the-minimum-of-the-maxnumberofmessages-and-maxsizeofmessages">​</a></h3><ol><li><p>Batch size is not limited to the minimum of the <code>maxNumberOfMessages</code> and <code>maxSizeOfMessages</code> from the BatchReceive policy.</p></li><li><p>When the batch size is greater than the <code>receiveQ</code> of the consumer (for example, the batch size is 3000 and a receiveQ is 500), the following issue occurs:</p><p>In a multi-topic (pattern) consumer, the client stops receiving any messages. The client gets paused and never resumed when setting a timeout in the batch policy. Only one batch is fetched and the client is never resumed.</p></li></ol><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/6865" target="_blank" rel="noopener noreferrer">PR-6865</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fix-hash-range-conflict-issue-in-key_shared-subscription-with-sticky-hash-range">Fix hash range conflict issue in Key_Shared subscription with sticky hash range<a href="#fix-hash-range-conflict-issue-in-key_shared-subscription-with-sticky-hash-range" class="hash-link" aria-label="Direct link to Fix hash range conflict issue in Key_Shared subscription with sticky hash range" title="Direct link to Fix hash range conflict issue in Key_Shared subscription with sticky hash range">​</a></h3><p>In <code>Key_Shared</code> subscription where the <code>stickyHashRange</code> is used, consumers are not allowed to use interleaving hashes.</p><p>The pull request fixes the hash range conflict issue in <code>Key_Shared</code> with sticky hash range.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/7231" target="_blank" rel="noopener noreferrer">PR-7231</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fix-get-lookup-permission-error">Fix get lookup permission error<a href="#fix-get-lookup-permission-error" class="hash-link" aria-label="Direct link to Fix get lookup permission error" title="Direct link to Fix get lookup permission error">​</a></h3><p>If the <code>canProduce</code> or <code>canConsume</code> method throws an exception, the <code>canLookup</code> method just throws the exception and does not check other permissions. The code snippet is as follows: </p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">canLookupAsync</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">topicName</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> role</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> authenticationData</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">get</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">conf</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">getZooKeeperOperationTimeoutSeconds</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">SECONDS</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>PR-7234 invokes <code>canLookupAsync</code>. When Pulsar AuthorizationService checks lookup permission, if the user has the <code>canProducer</code> or <code>canConsumer</code> role, the user performs <code>canLookup</code> operations.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/7234" target="_blank" rel="noopener noreferrer">PR-7234</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="avoid-introducing-null-read-position-for-the-managed-cursor">Avoid introducing null read position for the managed cursor<a href="#avoid-introducing-null-read-position-for-the-managed-cursor" class="hash-link" aria-label="Direct link to Avoid introducing null read position for the managed cursor" title="Direct link to Avoid introducing null read position for the managed cursor">​</a></h3><p>Avoid introducing null read position for the managed cursor. The most doubtful thing is the <code>getNextValidPosition</code> method in the <code>ManagedLedgerImpl</code>. If a given position is greater than the position added last time, it returns a <code>null</code> value, and the read position is also <code>null</code>.</p><p>In this PR, we add a log and print the stack trace to find the root cause and fallback to the next position if the <code>null</code> occurs at the next valid position.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/7264" target="_blank" rel="noopener noreferrer">PR-7264</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fix-error-in-creation-of-non-durable-cursor">Fix error in creation of non-durable cursor<a href="#fix-error-in-creation-of-non-durable-cursor" class="hash-link" aria-label="Direct link to Fix error in creation of non-durable cursor" title="Direct link to Fix error in creation of non-durable cursor">​</a></h3><p>An NPE occurs when we fail to create a non-durable cursor and continue to create the subscription instance. </p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    cursor </span><span class="token operator">=</span><span class="token plain"> ledger</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">newNonDurableCursor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">startPosition</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> subscriptionName</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">ManagedLedgerException</span><span class="token plain"> e</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    subscriptionFuture</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">completeExceptionally</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">e</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">PersistentSubscription</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> subscriptionName</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> cursor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Additionally, the NPE leads to the topic usage count increasing to 1. When deleting a topic, the topic cannot be deleted even if you use the force flag.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/7355" target="_blank" rel="noopener noreferrer">PR-7355</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="avoid-an-npe-occurs-in-the-managedledgerimplisoffloadedneedsdelete-method">Avoid an NPE occurs in the <code>ManagedLedgerImpl.isOffloadedNeedsDelete</code> method<a href="#avoid-an-npe-occurs-in-the-managedledgerimplisoffloadedneedsdelete-method" class="hash-link" aria-label="Direct link to avoid-an-npe-occurs-in-the-managedledgerimplisoffloadedneedsdelete-method" title="Direct link to avoid-an-npe-occurs-in-the-managedledgerimplisoffloadedneedsdelete-method">​</a></h3><p>When the default value of the <code>offload-deletion-lag</code> is set to <code>null</code>, an NPE occurs. To fix the bug, null check is added in the <code>ManagedLedgerImpl.isOffloadedNeedsDelete</code> method.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/7389" target="_blank" rel="noopener noreferrer">PR-7389</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fix-producer-stuck-issue-due-to-npe-when-creating-a-new-ledger">Fix producer stuck issue due to NPE when creating a new ledger<a href="#fix-producer-stuck-issue-due-to-npe-when-creating-a-new-ledger" class="hash-link" aria-label="Direct link to Fix producer stuck issue due to NPE when creating a new ledger" title="Direct link to Fix producer stuck issue due to NPE when creating a new ledger">​</a></h3><p>NPE occurs when creating a ledger if the network address is unresolvable. If NPE occurs before adding the timeout task, the timeout mechanism does not work. The unresolvable network address is common in the Kubernetes environment. It happens when a bookie pod or a worker node restarts.</p><p>This pull request fixes from the following perspectives:</p><ol><li>Catch the NPE when creating a new ledger.</li><li>When the timeout task is triggered, it always executes the callback. It is totally fine because we already have the logic to ensure the callback is triggered only once.</li><li>Add a mechanism to detect that the <code>CreatingLedger</code> state is not moving.</li></ol><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/7401" target="_blank" rel="noopener noreferrer">PR-7401</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fix-npe-when-using-advertisedlisteners">Fix NPE when using advertisedListeners<a href="#fix-npe-when-using-advertisedlisteners" class="hash-link" aria-label="Direct link to Fix NPE when using advertisedListeners" title="Direct link to Fix NPE when using advertisedListeners">​</a></h3><p>The broker failed to acquire ownership for the namespace bundle when using <code>advertisedListeners=internal:pulsar://node1:6650,external:pulsar://node1.external:6650</code> with external listener name. Correct <code>BrokerServiceUrlTls</code> when TLS is not enabled.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/7620" target="_blank" rel="noopener noreferrer">PR-7620</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fix-the-issue-that-the-deduplication-cursor-cannot-be-deleted-after-message-deduplication-is-disabled">Fix the issue that the deduplication cursor cannot be deleted after message deduplication is disabled<a href="#fix-the-issue-that-the-deduplication-cursor-cannot-be-deleted-after-message-deduplication-is-disabled" class="hash-link" aria-label="Direct link to Fix the issue that the deduplication cursor cannot be deleted after message deduplication is disabled" title="Direct link to Fix the issue that the deduplication cursor cannot be deleted after message deduplication is disabled">​</a></h3><p>When enabling the message deduplication in the <code>broker.conf</code> file, disabling it and then restarting the broker, the deduplication cursor is not deleted.</p><p>This PR fixes the issue, so when you disable message deduplication, you can delete the deduplication cursor.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/7656" target="_blank" rel="noopener noreferrer">PR-7656</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fix-the-issue-that-getlastentry-reads-entry--1">Fix the issue that GetLastEntry() reads entry <code>-1</code><a href="#fix-the-issue-that-getlastentry-reads-entry--1" class="hash-link" aria-label="Direct link to fix-the-issue-that-getlastentry-reads-entry--1" title="Direct link to fix-the-issue-that-getlastentry-reads-entry--1">​</a></h3><p>Previously, the code does not include a return statement. If the entry is set to <code>-1</code>, after sending code, the response reads the entry and sends a second response, as shown in the following example.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">16:34:25.779 [pulsar-io-54-7:org.apache.bookkeeper.client.LedgerHandle@748] ERROR org.apache.bookkeeper.client.LedgerHandle - IncorrectParameterException on ledgerId:0 firstEntry:-1 lastEntry:-1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">16:34:25.779 [pulsar-client-io-82-1:org.apache.pulsar.client.impl.ConsumerImpl@1986] INFO  org.apache.pulsar.client.impl.ConsumerImpl - [persistent://external-repl-prop/pulsar-function-admin/assignment][c-use-fw-localhost-0-function-assignment-initialize-reader-b21f7607c9] Successfully getLastMessageId 0:-1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">16:34:25.779 [pulsar-client-io-82-1:org.apache.pulsar.client.impl.ClientCnx@602] WARN  org.apache.pulsar.client.impl.ClientCnx - [id: 0xc78f4a0e, L:/127.0.0.1:55657 - R:localhost/127.0.0.1:55615] Received error from server: Failed to get batch size for entry org.apache.bookkeeper.mledger.ManagedLedgerException: Incorrect parameter input</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">16:34:25.779 [pulsar-client-io-82-1:org.apache.pulsar.client.impl.ClientCnx@612] WARN  org.apache.pulsar.client.impl.ClientCnx - [id: 0xc78f4a0e, L:/127.0.0.1:55657 - R:localhost/127.0.0.1:55615] Received unknown request id from server: 10</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>PR-7495 adds a return statement to code, so GetLastEntry() reads the last entry, instead of <code>-1</code>.  </p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/7495" target="_blank" rel="noopener noreferrer">PR-7495</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fix-the-error-of-updating-partitions-for-non-persistent-topic">Fix the error of updating partitions for non-persistent topic<a href="#fix-the-error-of-updating-partitions-for-non-persistent-topic" class="hash-link" aria-label="Direct link to Fix the error of updating partitions for non-persistent topic" title="Direct link to Fix the error of updating partitions for non-persistent topic">​</a></h3><p>When updating partitions on a non-persistent topic, Error 409 is returned. The pull request fixes partitions errors for non-persistent topics.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/7459" target="_blank" rel="noopener noreferrer">PR-7459</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="zookeeper">ZooKeeper<a href="#zookeeper" class="hash-link" aria-label="Direct link to ZooKeeper" title="Direct link to ZooKeeper">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="use-hostname-for-bookie-rack-awareness-mapping">Use hostname for bookie rack awareness mapping<a href="#use-hostname-for-bookie-rack-awareness-mapping" class="hash-link" aria-label="Direct link to Use hostname for bookie rack awareness mapping" title="Direct link to Use hostname for bookie rack awareness mapping">​</a></h3><p>In <a href="https://github.com/apache/pulsar/pull/5607" target="_blank" rel="noopener noreferrer">PR-5607</a>, the <code>useHostName()</code> is added with <code>return false</code>. The rack-aware policy passes the Bookie's hostname into an IP address and then uses that IP address to figure out to which rack the bookie belongs.</p><p>Then two issues occur: </p><ol><li>The IP does not match the hostname which is recorded in the <code>/bookies</code> z-node</li><li>If there is an error in parsing the bookie hostname (eg: transient DNS error), an NPE is triggered and the BK client never realizes that this bookie is available in the cluster.</li></ol><p>The exception is thrown at Line 77(as shown in the following code snippet), since <code>getAddress()</code> returns a <code>null</code> given that the address is parsed.  </p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">74</span><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">dnsResolver</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">useHostName</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">75</span><span class="token plain">            names</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">add</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">addr</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">getHostName</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">76</span><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">77</span><span class="token plain">            names</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">add</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">addr</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">getAddress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">getHostAddress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">78</span><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The default implementation for the <code>DnsResolver.useHostName()</code> returns <code>true</code>.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/7361" target="_blank" rel="noopener noreferrer">PR-7361</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="java-client">Java Client<a href="#java-client" class="hash-link" aria-label="Direct link to Java Client" title="Direct link to Java Client">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fix-the-issue-that-the-http-header-used-in-athenz-authentication-can-not-be-renamed">Fix the issue that the HTTP header used in Athenz authentication can not be renamed<a href="#fix-the-issue-that-the-http-header-used-in-athenz-authentication-can-not-be-renamed" class="hash-link" aria-label="Direct link to Fix the issue that the HTTP header used in Athenz authentication can not be renamed" title="Direct link to Fix the issue that the HTTP header used in Athenz authentication can not be renamed">​</a></h3><p>The authentication plugin for Athenz allows users to change the name of the HTTP header for sending an authentication token to a broker server with a parameter named <code>roleHeader</code>. The change uses the value of the <code>roleHeader</code> parameter on the <code>AuthenticationAthenz</code> side, and uses it directly as the header name.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/7311" target="_blank" rel="noopener noreferrer">PR-7311</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fix-the-issue-that-batch-ack-set-is-recycled-multiple-times">Fix the issue that batch ack set is recycled multiple times<a href="#fix-the-issue-that-batch-ack-set-is-recycled-multiple-times" class="hash-link" aria-label="Direct link to Fix the issue that batch ack set is recycled multiple times" title="Direct link to Fix the issue that batch ack set is recycled multiple times">​</a></h3><p>The batch ack sets are recycled multiple times, due to race condition in group ack flush and cumulative Ack. So we add a recycled state check for the ack set in PR-7409, and fix the recycle issue.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/7409" target="_blank" rel="noopener noreferrer">PR-7409</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="add-authentication-client-with-oauth2-support">Add authentication client with OAuth2 support<a href="#add-authentication-client-with-oauth2-support" class="hash-link" aria-label="Direct link to Add authentication client with OAuth2 support" title="Direct link to Add authentication client with OAuth2 support">​</a></h3><p>Pulsar supports authenticating clients using OAuth 2.0 access tokens. You can use tokens to identify a Pulsar client and associate with some "principal" (or "role") that is permitted to do some actions, for example, publish messages to a topic or consume messages from a topic. </p><p>This module is to support Pulsar Client Authentication Plugin for OAuth 2.0 directly. The client communicates with the Oauth 2.0 server, gets an <code>access token</code> from the Oauth 2.0 server, and passes the <code>access token</code> to Pulsar broker to do the authentication.</p><p>So, the broker can use <code>org.apache.pulsar.broker.authentication.AuthenticationProviderToken</code>,
and the user can add their own <code>AuthenticationProvider</code> to work with this module.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/7420" target="_blank" rel="noopener noreferrer">PR-7420</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="not-subscribe-to-the-topic-when-the-consumer-is-closed">Not subscribe to the topic when the consumer is closed<a href="#not-subscribe-to-the-topic-when-the-consumer-is-closed" class="hash-link" aria-label="Direct link to Not subscribe to the topic when the consumer is closed" title="Direct link to Not subscribe to the topic when the consumer is closed">​</a></h3><p>Fix race condition on the closed consumer while reconnecting to the broker.</p><p>The race condition happens when the consumer reconnects to the broker. The connection of the consumer is set to <code>null</code> when the consumer reconnects to the broker. If the consumer is not connected to broker at this time, the client does not send the consumer command to the broker. So, when the consumer reconnects to the broker, the consumer sends the subscribe command again. </p><p>This pull request adds a state check when the <code>connectionOpened()</code> of the consumer opens. If the consumer is in closing or closed state, the consumer does not send the subscribe command.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/7589" target="_blank" rel="noopener noreferrer">PR-7589</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="oauth2-authentication-plugin-uses-asynchttpclient">OAuth2 authentication plugin uses AsyncHttpClient<a href="#oauth2-authentication-plugin-uses-asynchttpclient" class="hash-link" aria-label="Direct link to OAuth2 authentication plugin uses AsyncHttpClient" title="Direct link to OAuth2 authentication plugin uses AsyncHttpClient">​</a></h3><p>Previously, the OAuth2 client authentication plugin used Apache HTTP client lib to make requests, Apache HTTP client is used to validate hostname. As suggested in <a href="https://github.com/apache/pulsar/issues/7612" target="_blank" rel="noopener noreferrer">#7612</a>, we get rid of the dependency of using Apache HTTP client.</p><p>In PR-7615, OAuth2 client authentication plugin uses AsyncHttpClient, which is used in client and broker. For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/7615" target="_blank" rel="noopener noreferrer">PR-7615</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="cpp-client">CPP Client<a href="#cpp-client" class="hash-link" aria-label="Direct link to CPP Client" title="Direct link to CPP Client">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cpp-oauth2-authentication-client">CPP Oauth2 authentication client<a href="#cpp-oauth2-authentication-client" class="hash-link" aria-label="Direct link to CPP Oauth2 authentication client" title="Direct link to CPP Oauth2 authentication client">​</a></h3><p>Pulsar supports authenticating clients using OAuth 2.0 access tokens. You can use tokens to identify a Pulsar client and associate with some "principal" (or "role") that is permitted to do some actions (eg: publish messages to a topic or consume messages from a topic). This change tries to support it in cpp client.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/7467" target="_blank" rel="noopener noreferrer">PR-7467</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fix-partition-index-error-in-close-callback">Fix partition index error in close callback<a href="#fix-partition-index-error-in-close-callback" class="hash-link" aria-label="Direct link to Fix partition index error in close callback" title="Direct link to Fix partition index error in close callback">​</a></h3><p>In partitioned producer/consumer's close callback, the partition index is always <code>0</code>. The <code>ProducerImpl/ConsumerImpl</code> internal partition index field should be passed to <code>PartitionedProducerImpl/PartitionedConsumerImpl</code> close callback.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/7282" target="_blank" rel="noopener noreferrer">PR-7282</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fix-segment-crashes-caused-by-race-condition-of-timer-in-cpp-client">Fix segment crashes caused by race condition of timer in CPP client<a href="#fix-segment-crashes-caused-by-race-condition-of-timer-in-cpp-client" class="hash-link" aria-label="Direct link to Fix segment crashes caused by race condition of timer in CPP client" title="Direct link to Fix segment crashes caused by race condition of timer in CPP client">​</a></h3><p>Segment crashes occur in a race condition:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">- The close operation calls the `keepAliveTimer_.reset()`.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- The `keepAliveTimer` is called by `startConsumerStatsTimer` and `handleKeepAliveTimeout` methods. Actually, the `keepAliveTimer` should not be called by those two methods.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This pull request fixes those issues.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/7572" target="_blank" rel="noopener noreferrer">PR-7572</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="add-support-to-read-credentials-from-file">Add support to read credentials from file<a href="#add-support-to-read-credentials-from-file" class="hash-link" aria-label="Direct link to Add support to read credentials from file" title="Direct link to Add support to read credentials from file">​</a></h3><p>Support reading credentials from a file to make it align with the Java client.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/7606" target="_blank" rel="noopener noreferrer">PR-7606</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fix-multi-topic-consumer-segfault-on-connection-error">Fix multi-topic consumer segfault on connection error<a href="#fix-multi-topic-consumer-segfault-on-connection-error" class="hash-link" aria-label="Direct link to Fix multi-topic consumer segfault on connection error" title="Direct link to Fix multi-topic consumer segfault on connection error">​</a></h3><p>The multi-topic consumer triggers a segfault when an error occurs in creating a consumer. This is due to the calls to close the partial consumers with a null callback.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/7588" target="_blank" rel="noopener noreferrer">PR-7588</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="functions">Functions<a href="#functions" class="hash-link" aria-label="Direct link to Functions" title="Direct link to Functions">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="use-fully-qualified-hostname-as-default-to-advertise-worker">Use fully qualified hostname as default to advertise worker<a href="#use-fully-qualified-hostname-as-default-to-advertise-worker" class="hash-link" aria-label="Direct link to Use fully qualified hostname as default to advertise worker" title="Direct link to Use fully qualified hostname as default to advertise worker">​</a></h3><p>There is a difference in getting hostnames between <code>Java 8</code> and <code>Java 11</code>. In Java 8, <code>InetAddress.getLocalHost().getHostName()</code> returns the fully qualified hostname; in Java 11, it returns a simple hostname. In this case, we should rather use the <code>getCanonicalHostName()</code>, which returns the fully qualified hostname. This is the same method to get the advertised address for workers as well.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/7360" target="_blank" rel="noopener noreferrer">PR-7360</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fix-the-function-bc-issue-introduced-in-release-260">Fix the function BC issue introduced in release 2.6.0<a href="#fix-the-function-bc-issue-introduced-in-release-260" class="hash-link" aria-label="Direct link to Fix the function BC issue introduced in release 2.6.0" title="Direct link to Fix the function BC issue introduced in release 2.6.0">​</a></h3><p>A backwards compatibility breakage is introduced in <a href="https://github.com/apache/pulsar/pull/5985" target="_blank" rel="noopener noreferrer">PR-5985</a>. When the running function workers are separated from brokers, updating workers and brokers independently from release 2.5.0 to 2.6.0 results in the following error:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">java.lang.NullPointerException: null\n\tat java.net.URI$Parser.parse(URI.java:3104) ~[?:?]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">java.net.URI.&lt;init&gt;(URI.java:600) ~[?:?]\n\tat java.net.URI.create(URI.java:881) ~[?:?]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">org.apache.pulsar.functions.worker.WorkerUtils.initializeDlogNamespace(WorkerUtils.java:160) ~[org.apache.pulsar-pulsar-functions-worker-2.7.0-SNAPSHOT.jar:2.7.0-SNAPSHOT]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">org.apache.pulsar.functions.worker.Worker.initialize(Worker.java:155) ~[org.apache.pulsar-pulsar-functions-worker-2.7.0-SNAPSHOT.jar:2.7.0-SNAPSHOT] </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">org.apache.pulsar.functions.worker.Worker.start(Worker.java:69) ~[org.apache.pulsar-pulsar-functions-worker-2.7.0-SNAPSHOT.jar:2.7.0-SNAPSHOT] </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">org.apache.pulsar.functions.worker.FunctionWorkerStarter.main(FunctionWorkerStarter.java:67) [org.apache.pulsar-pulsar-functions-worker-2.7.0-SNAPSHOT.jar:2.7.0-SNAPSHOT]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This is because the broker 2.5.0 supports "bookkeeperMetadataServiceUri" and the admin client returns a <code>null</code> field, thus causing the NPE.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/7528" target="_blank" rel="noopener noreferrer">PR-7528</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pulsar-perf">pulsar-perf<a href="#pulsar-perf" class="hash-link" aria-label="Direct link to pulsar-perf" title="Direct link to pulsar-perf">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="support-tlsallowinsecureconnection-in-pulsar-perf-produceconsumeread-performance-tests">Support <code>tlsAllowInsecureConnection</code> in pulsar-perf produce/consume/read performance tests<a href="#support-tlsallowinsecureconnection-in-pulsar-perf-produceconsumeread-performance-tests" class="hash-link" aria-label="Direct link to support-tlsallowinsecureconnection-in-pulsar-perf-produceconsumeread-performance-tests" title="Direct link to support-tlsallowinsecureconnection-in-pulsar-perf-produceconsumeread-performance-tests">​</a></h3><p>Add <code>tlsAllowInsecureConnection</code> config to the CLI tool <strong>pulsar-perf</strong>, to support produce/consume/read performance tests to clusters with insecure TLS connections.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/7300" target="_blank" rel="noopener noreferrer">PR-7300</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="more-information">More information<a href="#more-information" class="hash-link" aria-label="Direct link to More information" title="Direct link to More information">​</a></h2><ul><li>To download Apache Pulsar 2.6.1, click <a href="https://pulsar.apache.org/download/" target="_blank" rel="noopener noreferrer">download</a>.</li><li>For more information about Apache Pulsar 2.6.1, see <a href="https://pulsar.apache.org/release-notes/#2.6.1" target="_blank" rel="noopener noreferrer">2.6.1 release notes</a> and <a href="https://github.com/apache/pulsar/pulls?q=is%3Apr+label%3Arelease%2F2.6.1+is%3Aclosed" target="_blank" rel="noopener noreferrer">2.6.1 PR list</a>.</li></ul><p>If you have any questions or suggestions, contact us with mailing lists or slack.</p><ul><li><a href="mailto:users@pulsar.apache.org" target="_blank" rel="noopener noreferrer">users@pulsar.apache.org</a></li><li><a href="mailto:dev@pulsar.apache.org" target="_blank" rel="noopener noreferrer">dev@pulsar.apache.org</a></li><li>Pulsar slack channel: <a href="https://apache-pulsar.slack.com/" target="_blank" rel="noopener noreferrer">https://apache-pulsar.slack.com/</a></li><li>Self-registration at <a href="https://apache-pulsar.herokuapp.com/" target="_blank" rel="noopener noreferrer">https://apache-pulsar.herokuapp.com/</a></li></ul><p>Looking forward to your contributions to <a href="https://github.com/apache/pulsar" target="_blank" rel="noopener noreferrer">Pulsar</a>.</p>]]></content>
        <author>
            <name>XiaoLong Ran</name>
            <uri>https://twitter.com/wolf4j1</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Apache Pulsar 2.6.0]]></title>
        <id>https://pulsar.apache.org/blog/2020/06/18/Apache-Pulsar-2-6-0</id>
        <link href="https://pulsar.apache.org/blog/2020/06/18/Apache-Pulsar-2-6-0"/>
        <updated>2020-06-18T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[We are very glad to see the Apache Pulsar community has successfully released the wonderful 2.6.0 version after accumulated hard work. It is a great milestone for this fast-growing project and the whole Pulsar community. This is the result of a huge effort from the community, with over 450 commits and a long list of new features, improvements, and bug fixes.]]></summary>
        <content type="html"><![CDATA[<p>We are very glad to see the Apache Pulsar community has successfully released the wonderful 2.6.0 version after accumulated hard work. It is a great milestone for this fast-growing project and the whole Pulsar community. This is the result of a huge effort from the community, with over 450 commits and a long list of new features, improvements, and bug fixes.</p><p>Here is a selection of some of the most interesting and major features added to Pulsar 2.6.0.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="core-pulsar">Core Pulsar<a href="#core-pulsar" class="hash-link" aria-label="Direct link to Core Pulsar" title="Direct link to Core Pulsar">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pip-37-large-message-size-support">[PIP-37]<!-- --> Large message size support<a href="#pip-37-large-message-size-support" class="hash-link" aria-label="Direct link to pip-37-large-message-size-support" title="Direct link to pip-37-large-message-size-support">​</a></h3><p>This PIP adds support for producing and consuming large size messages by splitting the large message into multiple chunks. This is a very powerful feature for sending and consuming very large messages.</p><p>Currently, this feature only works for the non-shared subscription and it has client-side changes. You need to upgrade the Pulsar client version to 2.6.0. You can enable the message trunk at the producer side as below.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">client</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">newProducer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">topic</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"my-topic"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">enableChunking</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">create</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For more information about PIP-37, see <a href="https://github.com/apache/pulsar/wiki/PIP-37:-Large-message-size-handling-in-Pulsar" target="_blank" rel="noopener noreferrer">here</a>. <br> For more information about implementation details, see <a href="https://github.com/apache/pulsar/pull/4400" target="_blank" rel="noopener noreferrer">PR-4440</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pip-39-namespace-change-events-system-topic">[PIP-39]<!-- --> Namespace change events (system topic)<a href="#pip-39-namespace-change-events-system-topic" class="hash-link" aria-label="Direct link to pip-39-namespace-change-events-system-topic" title="Direct link to pip-39-namespace-change-events-system-topic">​</a></h3><p>This PIP introduces the system topic to store namespace change events. Previously, Pulsar only allowed you to set the namespace policy, all topics under the namespace followed the namespace policy. Many users want to set the policy for topics. The main reason for not using the same way as namespace level policy is to avoid introducing more workload on the ZooKeeper. </p><p>The original intention of the system topic is to be able to store topic policy in a topic rather than ZooKeeper. So this is the first step to achieve topic level policy. And we can easily add support for the topic level policy with this feature.</p><p>For more information about PIP-39, see <a href="https://github.com/apache/pulsar/wiki/PIP-39%3A-Namespace-Change-Events" target="_blank" rel="noopener noreferrer">here</a>.<br> For more information about implementation details, see  <a href="https://github.com/apache/pulsar/pull/4955" target="_blank" rel="noopener noreferrer">PR-4955</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pip-45-pluggable-metadata-interface">[PIP-45]<!-- --> Pluggable metadata interface<a href="#pip-45-pluggable-metadata-interface" class="hash-link" aria-label="Direct link to pip-45-pluggable-metadata-interface" title="Direct link to pip-45-pluggable-metadata-interface">​</a></h3><p>We have been advancing to enable Pulsar to use other metastore services rather than ZooKeeper. This PIP converts <code>ManagedLedger</code> to use the <code>MetadataStore</code> interface. This facilitates the metadata server plug-in process. Through the <code>MetadataStore</code> interface, it is easy to add other metadata servers into Pulsar such as <a href="https://github.com/etcd-io/etcd" target="_blank" rel="noopener noreferrer">etcd</a>.</p><p>For more information about PIP-45, see <a href="https://github.com/apache/pulsar/wiki/PIP-45%3A-Pluggable-metadata-interface" target="_blank" rel="noopener noreferrer">here</a>. <br> For more information about implementation details, see <a href="https://github.com/apache/pulsar/pull/5358" target="_blank" rel="noopener noreferrer">PR-5358</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pip-54-support-acknowledgment-at-the-batch-index-level">[PIP-54]<!-- --> Support acknowledgment at the batch index level<a href="#pip-54-support-acknowledgment-at-the-batch-index-level" class="hash-link" aria-label="Direct link to pip-54-support-acknowledgment-at-the-batch-index-level" title="Direct link to pip-54-support-acknowledgment-at-the-batch-index-level">​</a></h3><p>Previously, the broker only tracked the acknowledged state in the batch message level. If a subset of the batch messages was acknowledged, the consumer could still get the acknowledged message of that batch message while the batch message redelivery happened. </p><p>This PIP adds support for acknowledging the local batch index of a batch. This feature is not enabled by default. You can enable it in the <code>broker.conf</code> as below.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">acknowledgmentAtBatchIndexLevelEnabled=true</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For more information about PIP-54, see <a href="https://github.com/apache/pulsar/wiki/PIP-54:-Support-acknowledgment-at-batch-index-level" target="_blank" rel="noopener noreferrer">here</a>. <br> For more information about implementation details, see <a href="https://github.com/apache/pulsar/pull/6052" target="_blank" rel="noopener noreferrer">PR-6052</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pip-58-support-consumers-setting-custom-message-retry-delay">[PIP-58]<!-- --> Support consumers setting custom message retry delay<a href="#pip-58-support-consumers-setting-custom-message-retry-delay" class="hash-link" aria-label="Direct link to pip-58-support-consumers-setting-custom-message-retry-delay" title="Direct link to pip-58-support-consumers-setting-custom-message-retry-delay">​</a></h3><p>For many online business systems, various exceptions usually occur in business logic processing, so the message needs to be re-consumed, but users hope that this delay time can be controlled flexibly. Previously, processing methods were usually to send messages to special retry topics, because production can specify any delay, so consumers subscribe to the business topic and retry topic at the same time. Now you can set a retry delay for each message as below.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token class-name">Consumer</span><span class="token operator">&lt;</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">byte</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token operator">&gt;</span><span class="token plain"> consumer </span><span class="token operator">=</span><span class="token plain"> pulsarClient</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">newConsumer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">Schema</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">BYTES</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">enableRetry</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">receiverQueueSize</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">100</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">deadLetterPolicy</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">DeadLetterPolicy</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">builder</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">maxRedeliverCount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">maxRedeliveryCount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">retryLetterTopic</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"persistent://my-property/my-ns/my-subscription-custom-Retry"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">build</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">subscribe</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">consumer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">reconsumeLater</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">message</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token class-name">TimeUnit</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">SECONDS</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For more information about PIP-58, see <a href="https://github.com/apache/pulsar/wiki/PIP-58-%3A-Support-Consumers--Set-Custom-Retry-Delay" target="_blank" rel="noopener noreferrer">here</a>. <br> For more information about implementation details, see <a href="https://github.com/apache/pulsar/pull/6449" target="_blank" rel="noopener noreferrer">PR-6449</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pip-60-support-sni-routing-to-support-various-proxy-servers">[PIP-60]<!-- --> Support SNI routing to support various proxy servers<a href="#pip-60-support-sni-routing-to-support-various-proxy-servers" class="hash-link" aria-label="Direct link to pip-60-support-sni-routing-to-support-various-proxy-servers" title="Direct link to pip-60-support-sni-routing-to-support-various-proxy-servers">​</a></h3><p>Previously, Pulsar did not provide support to use other proxies, such as Apache Traffic Server (ATS), HAProxy, Nginx, and Envoy, which are more scalable and secured. Most of these proxy servers support SNI routing which can route traffic to a destination without having to terminate the SSL connection. This PIP adds SNI routing and makes changes to the Pulsar client.</p><p>For more information about PIP-60, see <a href="https://github.com/apache/pulsar/wiki/PIP-60:-Support-Proxy-server-with-SNI-routing" target="_blank" rel="noopener noreferrer">here</a>. <br> For more information about implementation details, see  <a href="https://github.com/apache/pulsar/pull/6566" target="_blank" rel="noopener noreferrer">PR-6566</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pip-61-advertise-multiple-addresses">[PIP-61]<!-- --> Advertise multiple addresses<a href="#pip-61-advertise-multiple-addresses" class="hash-link" aria-label="Direct link to pip-61-advertise-multiple-addresses" title="Direct link to pip-61-advertise-multiple-addresses">​</a></h3><p>This PIP allows the broker to expose multiple advertised listeners and to support the separation of internal and external network traffic. You can specify multiple advertised listeners in <code>broker.conf</code> as below.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">advertisedListeners=internal:pulsar://192.168.1.11:6660,external:pulsar://110.95.234.50:6650</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>From the client side, you can specify the listener name for the client as below.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token class-name">PulsarClient</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">builder</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">serviceUrl</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">url</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">listenerName</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"internal"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">build</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For more information about PIP-61, see <a href="https://github.com/apache/pulsar/wiki/PIP-61%3A-Advertised-multiple-addresses" target="_blank" rel="noopener noreferrer">here</a>. <br> For more information about implementation details, see <a href="https://github.com/apache/pulsar/pull/6903" target="_blank" rel="noopener noreferrer">PR-6903</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pip-65-adapt-pulsar-io-sources-to-support-batchsources">[PIP-65]<!-- --> Adapt Pulsar IO sources to support <code>BatchSources</code><a href="#pip-65-adapt-pulsar-io-sources-to-support-batchsources" class="hash-link" aria-label="Direct link to pip-65-adapt-pulsar-io-sources-to-support-batchsources" title="Direct link to pip-65-adapt-pulsar-io-sources-to-support-batchsources">​</a></h3><p>This PIP introduces <code>BatchSource</code> as a new interface for writing batch-based connectors. It also introduces <code>BatchSourceTriggerer</code> as an interface to trigger the data collection of a <code>BatchSource</code>. It then provides system implementation in <code>BatchSourceExecutor</code>.</p><p>For more information about PIP-65, see <a href="https://github.com/apache/pulsar/wiki/PIP-65%3A-Adapting-Pulsar-IO-Sources-to-support-Batch-Sources" target="_blank" rel="noopener noreferrer">here</a>. <br> For more information about implementation details, see <a href="https://github.com/apache/pulsar/pull/7090" target="_blank" rel="noopener noreferrer">PR-7090</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="load-balancer-add-thresholdshedder-strategy-for-the-load-balancer">[Load balancer]<!-- --> Add <code>ThresholdShedder</code> strategy for the load balancer<a href="#load-balancer-add-thresholdshedder-strategy-for-the-load-balancer" class="hash-link" aria-label="Direct link to load-balancer-add-thresholdshedder-strategy-for-the-load-balancer" title="Direct link to load-balancer-add-thresholdshedder-strategy-for-the-load-balancer">​</a></h3><p>The <code>ThresholdShedder</code> strategy is more flexible than <code>LoadSheddingStrategy</code> for Pulsar. The <code>ThresholdShedder</code> calculates the average resource usage of the brokers, and individual broker resource usage compares with the average value. If it is greater than the average value plus threshold, the overload shedder is triggered. You can enable it in <code>broker.conf</code> as below.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">loadBalancerLoadSheddingStrategy=org.apache.pulsar.broker.loadbalance.impl.ThresholdShedder</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can customize more parameters for the <code>ThresholdShedder</code> if needed as below.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># The broker resource usage threshold.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># When the broker resource usage is greater than the pulsar cluster average resource usage,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># the threshold shedder will be triggered to offload bundles from the broker.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># It only takes effect in ThresholdShedder strategy.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">loadBalancerBrokerThresholdShedderPercentage=10</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># When calculating new resource usage, the history usage accounts for.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># It only takes effect in ThresholdShedder strategy.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">loadBalancerHistoryResourcePercentage=0.9</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># The BandWithIn usage weight when calculating new resource usage.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># It only takes effect in ThresholdShedder strategy.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">loadBalancerBandwithInResourceWeight=1.0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># The BandWithOut usage weight when calculating new resource usage.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># It only takes effect in ThresholdShedder strategy.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">loadBalancerBandwithOutResourceWeight=1.0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># The CPU usage weight when calculating new resource usage.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># It only takes effect in ThresholdShedder strategy.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">loadBalancerCPUResourceWeight=1.0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># The heap memory usage weight when calculating new resource usage.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># It only takes effect in ThresholdShedder strategy.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">loadBalancerMemoryResourceWeight=1.0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># The direct memory usage weight when calculating new resource usage.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># It only takes effect in ThresholdShedder strategy.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">loadBalancerDirectMemoryResourceWeight=1.0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Bundle unload minimum throughput threshold (MB), avoiding bundle unload frequently.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># It only takes effect in ThresholdShedder strategy.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">loadBalancerBundleUnloadMinThroughputThreshold=10</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For more information about implementation details, see <a href="https://github.com/apache/pulsar/pull/6772" target="_blank" rel="noopener noreferrer">PR-6772</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="key-shared-add-consistent-hashing-in-the-key_shared-distribution">[Key Shared]<!-- --> Add consistent hashing in the Key_Shared distribution<a href="#key-shared-add-consistent-hashing-in-the-key_shared-distribution" class="hash-link" aria-label="Direct link to key-shared-add-consistent-hashing-in-the-key_shared-distribution" title="Direct link to key-shared-add-consistent-hashing-in-the-key_shared-distribution">​</a></h3><p>Previously, the implementation of the Key_Shared subscription used a mechanism to divide their hash space across the available consumers. This was based on dividing the currently assigned hash ranges when a new consumer joined or left. Pulsar 2.6.0 introduces a new consistent hash distribution for the Key_Shared subscription. You can enable the consistent hash distribution in <code>broker.conf</code> and the auto split approach is still selected by default.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># On KeyShared subscriptions, with default AUTO_SPLIT mode, use splitting ranges or</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># consistent hashing to reassign keys to new consumers</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">subscriptionKeySharedUseConsistentHashing=false</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># On KeyShared subscriptions, number of points in the consistent-hashing ring.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># The higher the number, the more equal the assignment of keys to consumers</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">subscriptionKeySharedConsistentHashingReplicaPoints=100</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We plan to use consistent hash distribution by default in the subsequent versions.
For more information about implementation details, see  <a href="https://github.com/apache/pulsar/pull/6791" target="_blank" rel="noopener noreferrer">PR-6791</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="key-shared-fix-ordering-issue-in-keyshared-dispatcher-when-adding-consumers">[Key Shared]<!-- --> Fix ordering issue in KeyShared dispatcher when adding consumers<a href="#key-shared-fix-ordering-issue-in-keyshared-dispatcher-when-adding-consumers" class="hash-link" aria-label="Direct link to key-shared-fix-ordering-issue-in-keyshared-dispatcher-when-adding-consumers" title="Direct link to key-shared-fix-ordering-issue-in-keyshared-dispatcher-when-adding-consumers">​</a></h3><p>This is a great fix for the Key_Shared subscription. Previously, ordering was broken in a KeyShared dispatcher if a new consumer c2 came in and an existing consumer c1 went out. This was because messages with keys previously assigned to c1 may route to c2, which might break the message ordering dispatch guarantee in the Key_Shared subscription. This PR introduces new consumers joining in a "paused" state until the previous messages are acknowledged to ensure the messages are dispatched orderly. </p><p>If you still want the relaxed ordering, you can set up at the consumer side as below.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pulsarClient</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">newConsumer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">keySharedPolicy</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">KeySharedPolicy</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">autoSplitHashRange</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setAllowOutOfOrderDelivery</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">subscribe</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For more information about implementation details, see <a href="https://github.com/apache/pulsar/pull/7106" target="_blank" rel="noopener noreferrer">PR-7106</a> and <a href="https://github.com/apache/pulsar/pull/7108" target="_blank" rel="noopener noreferrer">PR-7108</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="key-shared-add-support-for-key-hash-range-reading">[Key Shared]<!-- --> Add support for key hash range reading<a href="#key-shared-add-support-for-key-hash-range-reading" class="hash-link" aria-label="Direct link to key-shared-add-support-for-key-hash-range-reading" title="Direct link to key-shared-add-support-for-key-hash-range-reading">​</a></h3><p>This PR supports sticky key hash range reader. A broker only dispatches messages whose hash of the message key contains by a specified key hash range. Besides, multiple key hash ranges can be specified on a reader.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pulsarClient</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">newReader</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">topic</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">topic</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">startMessageId</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">MessageId</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">earliest</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">keyHashRange</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">Range</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">of</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">10000</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token class-name">Range</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">of</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">20001</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">30000</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">create</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For more information about implementation details, see  <a href="https://github.com/apache/pulsar/pull/5928" target="_blank" rel="noopener noreferrer">PR-5928</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="use-pure-java-air-compressor-instead-of-jni-based-libraries">Use pure-java Air-Compressor instead of JNI based libraries<a href="#use-pure-java-air-compressor-instead-of-jni-based-libraries" class="hash-link" aria-label="Direct link to Use pure-java Air-Compressor instead of JNI based libraries" title="Direct link to Use pure-java Air-Compressor instead of JNI based libraries">​</a></h3><p>Previously, JNI based libraries were used to perform data compression. While these libraries do have an overhead in terms of size and affect the JNI overhead which is typically measurable when compressing many small payloads. This PR replaces compression libraries for LZ4, ZStd, and Snappy with <a href="https://github.com/airlift/aircompressor" target="_blank" rel="noopener noreferrer">AirCompressor</a>, which is a pure Java compression library used by Presto.</p><p>For more information about implementation details, see  <a href="https://github.com/apache/pulsar/pull/5390" target="_blank" rel="noopener noreferrer">PR-5390</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="support-multiple-pulsar-clusters-using-the-same-bookkeeper-cluster">Support multiple Pulsar clusters using the same BookKeeper cluster<a href="#support-multiple-pulsar-clusters-using-the-same-bookkeeper-cluster" class="hash-link" aria-label="Direct link to Support multiple Pulsar clusters using the same BookKeeper cluster" title="Direct link to Support multiple Pulsar clusters using the same BookKeeper cluster">​</a></h3><p>This PR allows multiple pulsar clusters to use the specified BookKeeper cluster by pointing BookKeeper client to the ZooKeeper connection string of BookKeeper cluster. This PR adds a configuration (<code>bookkeeperMetadataServiceUri</code>) to discover BookKeeper cluster metadata store and uses metadata service URI to initialize BookKeeper clients.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Metadata service uri that bookkeeper is used for loading corresponding metadata driver</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># and resolving its metadata service location.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># This value can be fetched using `bookkeeper shell whatisinstanceid` command in BookKeeper cluster.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># For example: zk+hierarchical://localhost:2181/ledgers</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># The metadata service uri list can also be semicolon separated values like below:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># zk+hierarchical://zk1:2181;zk2:2181;zk3:2181/ledgers</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">bookkeeperMetadataServiceUri=</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For more information about implementation details, see <a href="https://github.com/apache/pulsar/pull/5985" target="_blank" rel="noopener noreferrer">PR-5985</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="support-deleting-inactive-topics-when-subscriptions-are-caught-up">Support deleting inactive topics when subscriptions are caught up<a href="#support-deleting-inactive-topics-when-subscriptions-are-caught-up" class="hash-link" aria-label="Direct link to Support deleting inactive topics when subscriptions are caught up" title="Direct link to Support deleting inactive topics when subscriptions are caught up">​</a></h3><p>Previously, Pulsar supported deleting inactive topics which do not have active producers and subscriptions. This PR supports deleting inactive topics when all subscriptions of the topic are caught up and when there are no active producers or consumers. This PR exposes inactive topic delete mode in <code>broker.conf</code>. In the future, we can support a namespace level configuration for the inactive topic delete mode.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Set the inactive topic delete mode. Default is delete_when_no_subscriptions</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># 'delete_when_no_subscriptions' mode only delete the topic which has no subscriptions and no active producers</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># 'delete_when_subscriptions_caught_up' mode only delete the topic that all subscriptions has no backlogs(caught up)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># and no active producers/consumers</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">brokerDeleteInactiveTopicsMode=delete_when_no_subscriptions</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For more information about implementation details, see <a href="https://github.com/apache/pulsar/pull/6077" target="_blank" rel="noopener noreferrer">PR-6077</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="add-a-flag-to-skip-broker-shutdown-on-transient-oom">Add a flag to skip broker shutdown on transient OOM<a href="#add-a-flag-to-skip-broker-shutdown-on-transient-oom" class="hash-link" aria-label="Direct link to Add a flag to skip broker shutdown on transient OOM" title="Direct link to Add a flag to skip broker shutdown on transient OOM">​</a></h3><p>A high dispatch rate on one of the topics may cause a broker to go OOM temporarily. It is a transient error and the broker can recover within a few seconds as soon as some memory gets released. However, in 2.4 release (<a href="https://github.com/apache/pulsar/pull/4196" target="_blank" rel="noopener noreferrer">#4196</a>), the "restarted broker on OOM" feature can cause huge instability in a cluster, where a topic moves from one broker to another and restarts multiple brokers and disrupts other topics as well. So this PR provides a dynamic flag to skip broker shutdown on OOM to avoid instability in a cluster.</p><p>For more information about implementation details, see <a href="https://github.com/apache/pulsar/pull/6634" target="_blank" rel="noopener noreferrer">PR-6634</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="make-zookeeper-cache-expiry-time-configurable">Make ZooKeeper cache expiry time configurable<a href="#make-zookeeper-cache-expiry-time-configurable" class="hash-link" aria-label="Direct link to Make ZooKeeper cache expiry time configurable" title="Direct link to Make ZooKeeper cache expiry time configurable">​</a></h3><p>Previously, ZooKeeper cache expiry time was hardcoded and it needed to be configurable to refresh the value based on various requirements, for example, refreshing the value quickly in case of zk-watch miss, avoiding frequent cache refresh to avoid zk-read or avoiding issue due to zk read timeout, and so on. Now you can configure ZooKeeper cache expiry time in <code>broker.conf</code> as below.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># ZooKeeper cache expiry time in seconds</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">zooKeeperCacheExpirySeconds=300</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For more information about implementation details, see <a href="https://github.com/apache/pulsar/pull/6668" target="_blank" rel="noopener noreferrer">PR-6668</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="optimize-consumer-fetch-messages-in-case-of-batch-message">Optimize consumer fetch messages in case of batch message<a href="#optimize-consumer-fetch-messages-in-case-of-batch-message" class="hash-link" aria-label="Direct link to Optimize consumer fetch messages in case of batch message" title="Direct link to Optimize consumer fetch messages in case of batch message">​</a></h3><p>When a consumer sends a fetch request to a broker server, it contains a fetch message number telling the server how many messages should be pushed to a consumer client. However, the broker server stores data in BookKeeper or broker cache according to entry rather than a single message if the producer produces messages using the batch feature. There is a gap to map the number of messages to the number of entries when dealing with consumer fetch requests. This PR adds a variable <code>avgMessagesPerEntry</code> to record average messages stored in one entry. It updates when a broker server pushes messages to a consumer. When dealing with consumer fetch requests, it maps fetch request number to entry number. Additionally, this PR exposes the <code>avgMessagePerEntry</code> static value to consumer stat metric json.</p><p>You can enable <code>preciseDispatcherFlowControl</code> in <code> broker.conf</code> as below.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Precise dispatcher flow control according to history message number of each entry</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">preciseDispatcherFlowControl=false</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For more information about implementation details, see  <a href="https://github.com/apache/pulsar/pull/6719" target="_blank" rel="noopener noreferrer">PR-6719</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="introduce-precise-topic-publish-rate-limiting">Introduce precise topic publish rate limiting<a href="#introduce-precise-topic-publish-rate-limiting" class="hash-link" aria-label="Direct link to Introduce precise topic publish rate limiting" title="Direct link to Introduce precise topic publish rate limiting">​</a></h3><p>Previously, Pulsar supported the publish rate limiting but it is not a precise control. Now, for some use cases that need precise control, you can enable it in <code>broker.conf</code> as below.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">preciseTopicPublishRateLimiterEnable=true</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For more information about implementation details, see  <a href="https://github.com/apache/pulsar/pull/7078" target="_blank" rel="noopener noreferrer">PR-7078</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="expose-check-delay-of-new-entries-in-brokerconf">Expose check delay of new entries in <code>broker.conf</code><a href="#expose-check-delay-of-new-entries-in-brokerconf" class="hash-link" aria-label="Direct link to expose-check-delay-of-new-entries-in-brokerconf" title="Direct link to expose-check-delay-of-new-entries-in-brokerconf">​</a></h3><p>Previously, the check delay of new entries was 10 ms and could not be changed by users. Currently, for consumption latency sensitive scenarios, you can set the value of check delay of new entries to a smaller value or 0 in <code>broker.conf</code> as below. Using a smaller value may degrade consumption throughput. </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">managedLedgerNewEntriesCheckDelayInMillis=10</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For more information about implementation details, see  <a href="https://github.com/apache/pulsar/pull/7154" target="_blank" rel="noopener noreferrer">PR-7154</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="schema--supports-null-key-and-null-value-in-keyvalue-schema">[Schema]<!-- -->  Supports <code>null</code> key and <code>null</code> value in KeyValue schema<a href="#schema--supports-null-key-and-null-value-in-keyvalue-schema" class="hash-link" aria-label="Direct link to schema--supports-null-key-and-null-value-in-keyvalue-schema" title="Direct link to schema--supports-null-key-and-null-value-in-keyvalue-schema">​</a></h3><p>For more information about implementation details, see  <a href="https://github.com/apache/pulsar/pull/7139" target="_blank" rel="noopener noreferrer">PR-7139</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="support-triggering-ledger-rollover-when-maxledgerrollovertimeminutes-is-met">Support triggering ledger rollover when <code>maxLedgerRolloverTimeMinutes</code> is met<a href="#support-triggering-ledger-rollover-when-maxledgerrollovertimeminutes-is-met" class="hash-link" aria-label="Direct link to support-triggering-ledger-rollover-when-maxledgerrollovertimeminutes-is-met" title="Direct link to support-triggering-ledger-rollover-when-maxledgerrollovertimeminutes-is-met">​</a></h3><p>This PR implements a monitoring thread to check if the current topic ledger meets the constraint of <code>managedLedgerMaxLedgerRolloverTimeMinutes</code> and triggers a rollover to make the configuration take effect. Another important idea is that if you trigger a rollover, you can close the current ledger so that you can release the storage of the current ledger. For some less commonly used topics, the current ledger data is likely to be expired and the current rollover logic is only triggered when adding a new entry. Obviously, this results in a waste of disk space. The monitoring thread is scheduled at a fixed time interval and the interval is set to <code>managedLedgerMaxLedgerRolloverTimeMinutes</code>. Each inspection makes two judgments at the same time, for example, <code>currentLedgerEntries &gt; 0</code> and <code>currentLedgerIsFull()</code>. When the number of current entries is equal to 0, it does not trigger a new rollover and you can use this to reduce the ledger creation.</p><p>For more information about implementation details, see  <a href="https://github.com/apache/pulsar/pull/7111" target="_blank" rel="noopener noreferrer">PR-7116</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="proxy">Proxy<a href="#proxy" class="hash-link" aria-label="Direct link to Proxy" title="Direct link to Proxy">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="add-rest-api-to-get-connection-and-topic-stats">Add REST API to get connection and topic stats<a href="#add-rest-api-to-get-connection-and-topic-stats" class="hash-link" aria-label="Direct link to Add REST API to get connection and topic stats" title="Direct link to Add REST API to get connection and topic stats">​</a></h3><p>Previously, Pulsar proxy did not have useful stats to get internal information about the proxy. It is better to have internal-stats of proxy to get information, such as live connections, topic stats (with higher logging level), and so on. This PR adds REST API to get stats for connection and topics served by proxy.</p><p>For more information about implementation details, see <a href="https://github.com/apache/pulsar/pull/6473" target="_blank" rel="noopener noreferrer">PR-6473</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="admin">Admin<a href="#admin" class="hash-link" aria-label="Direct link to Admin" title="Direct link to Admin">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="support-getting-a-message-by-message-id-in-pulsar-admin">Support getting a message by message ID in pulsar-admin<a href="#support-getting-a-message-by-message-id-in-pulsar-admin" class="hash-link" aria-label="Direct link to Support getting a message by message ID in pulsar-admin" title="Direct link to Support getting a message by message ID in pulsar-admin">​</a></h3><p>This PR adds a new command <code>get-message-by-id</code> to the pulsar-admin. It allows users to check a single message by providing ledger ID and entry ID. </p><p>For more information about implementation details, see <a href="https://github.com/apache/pulsar/pull/6331" target="_blank" rel="noopener noreferrer">PR-6331</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="support-deleting-subscriptions-forcefully">Support deleting subscriptions forcefully<a href="#support-deleting-subscriptions-forcefully" class="hash-link" aria-label="Direct link to Support deleting subscriptions forcefully" title="Direct link to Support deleting subscriptions forcefully">​</a></h3><p>This PR adds the method <code>deleteForcefully</code> to support force deleting subscriptions. </p><p>For more information about implementation details, see <a href="https://github.com/apache/pulsar/pull/6383" target="_blank" rel="noopener noreferrer">PR-6383</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="functions">Functions<a href="#functions" class="hash-link" aria-label="Direct link to Functions" title="Direct link to Functions">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="built-in-functions">Built-in functions<a href="#built-in-functions" class="hash-link" aria-label="Direct link to Built-in functions" title="Direct link to Built-in functions">​</a></h3><p>This PR implements the possibility of creating built-in functions in the same way as adding built-in connectors.</p><p>For more information about implementation details, see <a href="https://github.com/apache/pulsar/pull/6895" target="_blank" rel="noopener noreferrer">PR-6895</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="add-go-function-heartbeat-and-grpc-service-for-production-usage">Add Go Function heartbeat (and gRPC service) for production usage<a href="#add-go-function-heartbeat-and-grpc-service-for-production-usage" class="hash-link" aria-label="Direct link to Add Go Function heartbeat (and gRPC service) for production usage" title="Direct link to Add Go Function heartbeat (and gRPC service) for production usage">​</a></h3><p>For more information about implementation details, see <a href="https://github.com/apache/pulsar/pull/6031" target="_blank" rel="noopener noreferrer">PR-6031</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="add-custom-property-options-to-functions">Add custom property options to functions<a href="#add-custom-property-options-to-functions" class="hash-link" aria-label="Direct link to Add custom property options to functions" title="Direct link to Add custom property options to functions">​</a></h3><p>This PR allows users to set custom system properties while submitting functions. This can be used to pass credentials via a system property.</p><p>For more information about implementation details, see <a href="https://github.com/apache/pulsar/pull/6348" target="_blank" rel="noopener noreferrer">PR-6348</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="separate-tls-configurations-of-function-worker-and-broker">Separate TLS configurations of function worker and broker<a href="#separate-tls-configurations-of-function-worker-and-broker" class="hash-link" aria-label="Direct link to Separate TLS configurations of function worker and broker" title="Direct link to Separate TLS configurations of function worker and broker">​</a></h3><p>For more information about implementation details, see <a href="https://github.com/apache/pulsar/pull/6602" target="_blank" rel="noopener noreferrer">PR-6602</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="add-the-ability-to-build-consumers-in-functions-and-sources">Add the ability to build consumers in functions and sources<a href="#add-the-ability-to-build-consumers-in-functions-and-sources" class="hash-link" aria-label="Direct link to Add the ability to build consumers in functions and sources" title="Direct link to Add the ability to build consumers in functions and sources">​</a></h3><p>Previously, function and source context give their writers an ability to create publishers but not consumers. This PR fixes this issue.</p><p>For more information about implementation details, see <a href="https://github.com/apache/pulsar/pull/6954" target="_blank" rel="noopener noreferrer">PR-6954</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pulsar-sql">Pulsar SQL<a href="#pulsar-sql" class="hash-link" aria-label="Direct link to Pulsar SQL" title="Direct link to Pulsar SQL">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="support-keyvalue-schema">Support KeyValue schema<a href="#support-keyvalue-schema" class="hash-link" aria-label="Direct link to Support KeyValue schema" title="Direct link to Support KeyValue schema">​</a></h3><p>Previously, Pulsar SQL could not read the KeyValue schema data.</p><p>This PR adds KeyValue schema support for Pulsar SQL. It adds the prefix <code>key.</code> for the key field name and <code>value.</code> for the value field name.</p><p>For more information about implementation details, see <a href="https://github.com/apache/pulsar/pull/6325" target="_blank" rel="noopener noreferrer">PR-6325</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="support-multiple-avro-schema-versions">Support multiple Avro schema versions<a href="#support-multiple-avro-schema-versions" class="hash-link" aria-label="Direct link to Support multiple Avro schema versions" title="Direct link to Support multiple Avro schema versions">​</a></h3><p>Previously, if you have multiple Avro schema versions for a topic, using the Pulsar SQL to query data from this topic will introduce some problems. With this change, You can evolve the schema of the topic and keep transitive backward compatibility of all schemas of the topic if you want to query data from this topic. </p><p>For more information about implementation details, see <a href="https://github.com/apache/pulsar/pull/4847" target="_blank" rel="noopener noreferrer">PR-4847</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="java-client">Java client<a href="#java-client" class="hash-link" aria-label="Direct link to Java client" title="Direct link to Java client">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="support-waiting-for-inflight-messages-while-closing-a-producer">Support waiting for inflight messages while closing a producer<a href="#support-waiting-for-inflight-messages-while-closing-a-producer" class="hash-link" aria-label="Direct link to Support waiting for inflight messages while closing a producer" title="Direct link to Support waiting for inflight messages while closing a producer">​</a></h3><p>Previously, when you closed a producer, the pulsar-client immediately failed inflight messages even if it persisted successfully at the broker. Most of the time, users want to wait for those inflight messages rather than fail them. While the pulsar-client library did not provide a way to wait for inflight messages before closing the producer. This PR supports closing API with a flag where you can control waiting for inflight messages. With this change, you can close a producer by waiting for inflight messages and the pulsar-client does not fail those messages immediately.
Previously, when you closed a producer, the pulsar-client immediately failed inflight messages even if it persisted successfully at the broker. Most of the time, users want to wait for those inflight messages rather than fail them. While the pulsar-client library did not provide a way to wait for inflight messages before closing the producer. This PR supports closing API with a flag where you can control waiting for inflight messages. With this change, you can close a producer by waiting for inflight messages and the pulsar-client does not fail those messages immediately.</p><p>For more information about implementation details, see <a href="https://github.com/apache/pulsar/pull/6648" target="_blank" rel="noopener noreferrer">PR-6648</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="support-loading-tls-certskey-dynamically-from-input-stream">Support loading TLS certs/key dynamically from input stream<a href="#support-loading-tls-certskey-dynamically-from-input-stream" class="hash-link" aria-label="Direct link to Support loading TLS certs/key dynamically from input stream" title="Direct link to Support loading TLS certs/key dynamically from input stream">​</a></h3><p>Previously, the pulsar-client provided TLS authentication support and the default TLS provider <code>AuthenticationTls</code> expected file path of cert and key files. However, there were use cases where it was difficult for user applications to store certs/key files locally for TLS authentication. This PR adds stream support in <code>AuthenticationTls</code> to provide X509Certs and PrivateKey which also perform auto-refresh when streaming changes in a given provider.</p><p>For more information about implementation details, see <a href="https://github.com/apache/pulsar/pull/6760" target="_blank" rel="noopener noreferrer">PR-6760</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="support-returning-sequence-id-when-throwing-an-exception-for-async-send-messages">Support returning sequence ID when throwing an exception for async send messages<a href="#support-returning-sequence-id-when-throwing-an-exception-for-async-send-messages" class="hash-link" aria-label="Direct link to Support returning sequence ID when throwing an exception for async send messages" title="Direct link to Support returning sequence ID when throwing an exception for async send messages">​</a></h3><p>Previously, when sending messages asynchronously failed, an exception was thrown, but did not know which message was abnormal, and users did not know which messages needed to be retried. This PR makes changes supported on the client side. When throwing an exception, the sequenceId <code>org.apache.pulsar.client.api.PulsarClientException</code> is set.</p><p>For more information about implementation details, see <a href="https://github.com/apache/pulsar/pull/6825" target="_blank" rel="noopener noreferrer">PR-6825</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="more-information">More information<a href="#more-information" class="hash-link" aria-label="Direct link to More information" title="Direct link to More information">​</a></h2><ul><li>To download Apache Pulsar 2.6.0, click <a href="https://pulsar.apache.org/download/" target="_blank" rel="noopener noreferrer">here</a>.</li><li>For more information about Apache Pulsar 2.6.0, see <a href="https://pulsar.apache.org/release-notes/#2.6.0" target="_blank" rel="noopener noreferrer">2.6.0 release notes</a> and <a href="https://github.com/apache/pulsar/pulls?q=milestone%3A2.6.0+-label%3Arelease%2F2.5.2+-label%3Arelease%2F2.5.1+" target="_blank" rel="noopener noreferrer">2.6.0 PR list</a>.</li></ul><p>If you have any questions or suggestions, contact us with mailing lists or slack.</p><ul><li><a href="mailto:users@pulsar.apache.org" target="_blank" rel="noopener noreferrer">users@pulsar.apache.org</a></li><li><a href="mailto:dev@pulsar.apache.org" target="_blank" rel="noopener noreferrer">dev@pulsar.apache.org</a></li><li>Pulsar slack channel: <a href="https://apache-pulsar.slack.com/" target="_blank" rel="noopener noreferrer">https://apache-pulsar.slack.com/</a></li><li>Self-registration at <a href="https://apache-pulsar.herokuapp.com/" target="_blank" rel="noopener noreferrer">https://apache-pulsar.herokuapp.com/</a></li></ul><p>Looking forward to your contributions to <a href="https://github.com/apache/pulsar" target="_blank" rel="noopener noreferrer">Pulsar</a>.</p>]]></content>
        <author>
            <name>Penghui Li</name>
            <uri>https://twitter.com/lipenghui6</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Apache Pulsar 2.5.2]]></title>
        <id>https://pulsar.apache.org/blog/2020/05/19/Apache-Pulsar-2-5-2</id>
        <link href="https://pulsar.apache.org/blog/2020/05/19/Apache-Pulsar-2-5-2"/>
        <updated>2020-05-19T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[We are proud to publish Apache Pulsar 2.5.2. This is the result of a huge effort from the community, with over 56 commits, general improvements and bug fixes.]]></summary>
        <content type="html"><![CDATA[<p>We are proud to publish Apache Pulsar 2.5.2. This is the result of a huge effort from the community, with over 56 commits, general improvements and bug fixes.</p><p>For detailed changes related to 2.5.2 release, refer to the <b><a href="/release-notes/#2.5.2">release notes</a></b> and the <b><a href="https://github.com/apache/pulsar/pulls?q=is:pr%20label:release/2.5.2%20is:closed" target="_blank" rel="noopener noreferrer">PR list for Pulsar 2.5.2</a></b>.</p><p>The following highlights some improved features and fixed bugs in this release.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="implement-autotopiccreation-by-namespace-level-override">Implement AutoTopicCreation by namespace level override<a href="#implement-autotopiccreation-by-namespace-level-override" class="hash-link" aria-label="Direct link to Implement AutoTopicCreation by namespace level override" title="Direct link to Implement AutoTopicCreation by namespace level override">​</a></h2><p>Introduce a new namespace policy <code>autoTopicCreationOverride</code>, which enables an override of broker <code>autoTopicCreation</code> settings on the namespace level. You can disable <code>autoTopicCreation</code> for the broker while allowing it on a specific namespace.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="add-customized-deletionlag-and-threshold-for-offloading-policies-per-namespace">Add customized deletionLag and threshold for offloading policies per namespace<a href="#add-customized-deletionlag-and-threshold-for-offloading-policies-per-namespace" class="hash-link" aria-label="Direct link to Add customized deletionLag and threshold for offloading policies per namespace" title="Direct link to Add customized deletionLag and threshold for offloading policies per namespace">​</a></h2><p>Support configuring <code>deletionLag</code> and threshold in the offloading policy on the namespace level to remove data from the offloaded tiered storage.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="invalidate-managed-ledgers-zookeeper-cache-instead-of-reloading-on-watcher-triggered">Invalidate managed ledgers ZooKeeper cache instead of reloading on watcher triggered<a href="#invalidate-managed-ledgers-zookeeper-cache-instead-of-reloading-on-watcher-triggered" class="hash-link" aria-label="Direct link to Invalidate managed ledgers ZooKeeper cache instead of reloading on watcher triggered" title="Direct link to Invalidate managed ledgers ZooKeeper cache instead of reloading on watcher triggered">​</a></h2><p>The ZooKeeper children cache is reloaded for z-nodes when topics are frequently created or deleted. This creates additional load on the ZooKeeper and the broker, slows down brokers and makes them less stable. In this release, <code>ZooKeeperManagedLedgerCache</code> is introduced to invalidate instead of reloading the ZooKeeper cache, when topics are created or deleted. This helps reduce pressures on the ZooKeeper.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="respect-retention-policy-when-there-is-no-traffic">Respect retention policy when there is no traffic<a href="#respect-retention-policy-when-there-is-no-traffic" class="hash-link" aria-label="Direct link to Respect retention policy when there is no traffic" title="Direct link to Respect retention policy when there is no traffic">​</a></h2><p>In previous releases, retention is checked when the ledger rollover happens. So if the traffic is stopped, the ledgers are not cleaned up even if all the messages are already acknowledged. In Pulsar 2.5.2, <code>retentionCheckIntervalInSeconds</code> is introduced to check if consumed ledgers need to be trimmed between intervals. If the value is set to 0 or a negative number, the system does not check the consumed ledgers.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="bump-netty-version-to-4148final">Bump Netty version to 4.1.48.Final<a href="#bump-netty-version-to-4148final" class="hash-link" aria-label="Direct link to Bump Netty version to 4.1.48.Final" title="Direct link to Bump Netty version to 4.1.48.Final">​</a></h2><p>The ZlibDecoders in Netty 4.1.x (before 4.1.46) allow for unbounded memory allocation while decoding a ZlibEncoded byte stream. An attacker could send a large ZlibEncoded byte stream to the Netty server, forcing the server to allocate all of its free memory to a single decoder. The bug is fixed in Netty <code>4.1.48.Final</code> .</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="increase-timeout-for-loading-topics">Increase timeout for loading topics<a href="#increase-timeout-for-loading-topics" class="hash-link" aria-label="Direct link to Increase timeout for loading topics" title="Direct link to Increase timeout for loading topics">​</a></h2><p>Loading replicated topics is quite an expensive operation and involves global ZooKeeper lookups and the start of many sub-processes. In Pulsar 2.5.2, we increase the timeout for loading topics which have many replicated clusters to 60 seconds.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="fix-incorrect-cursor-state-for-cursor-without-consumers">Fix incorrect cursor state for cursor without consumers<a href="#fix-incorrect-cursor-state-for-cursor-without-consumers" class="hash-link" aria-label="Direct link to Fix incorrect cursor state for cursor without consumers" title="Direct link to Fix incorrect cursor state for cursor without consumers">​</a></h2><p>If consumers of a subscription are closed, the cursor is set to inactive. But the cursor is set to active during <code>PulsarStats.updateStats()</code> when the backlog size is less than <code>backloggedCursorThresholdEntries</code>. In Pulsar 2.5.2, we move the <code>checkBackloggedCursors()</code> from <code>ManagedLedger</code> to <code>Topic</code> and check the consumer list to fix this bug.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="change-non-durable-cursor-to-active-to-improve-performance">Change non-durable cursor to active to improve performance<a href="#change-non-durable-cursor-to-active-to-improve-performance" class="hash-link" aria-label="Direct link to Change non-durable cursor to active to improve performance" title="Direct link to Change non-durable cursor to active to improve performance">​</a></h2><p>In non-durable subscription mode, the cursor is not active, which leads to the written entries not being put into cache. This would degrade the reading performance. In Pulsar 2.5.2, we set the <code>NonDurableCursorImpl</code> to active and remove three override methods <code>setActive()</code>, <code>isActive()</code>, <code>setInactive()</code> to improve the reading performance.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="add-keystore-configurations-to-tls">Add keystore configurations to TLS<a href="#add-keystore-configurations-to-tls" class="hash-link" aria-label="Direct link to Add keystore configurations to TLS" title="Direct link to Add keystore configurations to TLS">​</a></h2><p>In Pulsar 2.5.2, we add keystore configurations to the TLS to allow users to define their own CA certificates while the internal communication uses an internal CA certificate. This change keeps the original TLS settings untouched, and adds new configurations in needed paths.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="close-producer-when-the-topic-does-not-exists">Close producer when the topic does not exists<a href="#close-producer-when-the-topic-does-not-exists" class="hash-link" aria-label="Direct link to Close producer when the topic does not exists" title="Direct link to Close producer when the topic does not exists">​</a></h2><p>In previous releases, when we create a producer for a non-existent topic, the <code>ProducerImpl</code> object is hanging in the dump. This leads to OOM in micro-service which by mistake tries to produce consistently to a non-existent topic. In Pulsar 2.5.2, we fix the bug in the following two aspects:</p><ul><li>Fix the exception handle for a non-existent topic.</li><li>Change state to <code>Close</code> when the producer gets the <code>TopicDoesNotExists</code> exception.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="fix-topicpublishratelimiter-not-effective-after-restarting-broker">Fix <code>topicPublishRateLimiter</code> not effective after restarting broker<a href="#fix-topicpublishratelimiter-not-effective-after-restarting-broker" class="hash-link" aria-label="Direct link to fix-topicpublishratelimiter-not-effective-after-restarting-broker" title="Direct link to fix-topicpublishratelimiter-not-effective-after-restarting-broker">​</a></h2><p>In previous releases, when a publishing rate is configured on the namespace, it can limit the publishing rate. But when the broker is restarted, the limit expires. In Pulsar 2.5.2, this bug is fixed.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="expose-pulsar_out_bytes_total-and-pulsar_out_messages_total-for-namespacesubscriptionconsumer">Expose pulsar_out_bytes_total and pulsar_out_messages_total for namespace/subscription/consumer<a href="#expose-pulsar_out_bytes_total-and-pulsar_out_messages_total-for-namespacesubscriptionconsumer" class="hash-link" aria-label="Direct link to Expose pulsar_out_bytes_total and pulsar_out_messages_total for namespace/subscription/consumer" title="Direct link to Expose pulsar_out_bytes_total and pulsar_out_messages_total for namespace/subscription/consumer">​</a></h2><p>Add pulsar_out_bytes_total and pulsar_out_messages_total for the namespace, subscription, and consumer. This helps to avoid missing the rate to be computed in Prometheus or missing change of rates within the scraping interval.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="fix-ttldurationdefaultinseconds-policy">Fix <code>ttlDurationDefaultInSeconds</code> policy<a href="#fix-ttldurationdefaultinseconds-policy" class="hash-link" aria-label="Direct link to fix-ttldurationdefaultinseconds-policy" title="Direct link to fix-ttldurationdefaultinseconds-policy">​</a></h2><p>The TTL for namespaces should be retrieved from the broker configuration if it is not configured at namespace policies. In previous releases, the code only returns the value stored in namespace policies directly without judging if the TTL is configured or not. In Pulsar 2.5.2, we add a condition to test if TTL is configured at namespace policies. If not, the broker retrieves value stored in broker configuration and returns it as the output.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="fix-long-field-parse-in-genricjsonrecord">Fix long field parse in GenricJsonRecord<a href="#fix-long-field-parse-in-genricjsonrecord" class="hash-link" aria-label="Direct link to Fix long field parse in GenricJsonRecord" title="Direct link to Fix long field parse in GenricJsonRecord">​</a></h2><p>For messages sent in JSON schema, the long field is decoded as int if its value is smaller than <code>Integer.MAX_VALUE</code>. Otherwise, the long field is decoded as a string. Pulsar 2.5.2 introduces a field type check in GenericJsonRecord to fix this bug.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="fix-the-leak-of-cursor-reset-if-message-encode-fails-in-avro-schema">Fix the leak of cursor reset if message encode fails in Avro schema<a href="#fix-the-leak-of-cursor-reset-if-message-encode-fails-in-avro-schema" class="hash-link" aria-label="Direct link to Fix the leak of cursor reset if message encode fails in Avro schema" title="Direct link to Fix the leak of cursor reset if message encode fails in Avro schema">​</a></h2><p>If the Avro encode for a message fails after a few bytes are written, the cursor in the stream is not reset. The following <code>flush()</code>, which normally resets the cursor, is skipped if there is an exception. In Pulsar 2.5.2, we introduced a <code>flush()</code> in the finally block to fix this bug.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="update-topic-partitions-automatically">Update topic partitions automatically<a href="#update-topic-partitions-automatically" class="hash-link" aria-label="Direct link to Update topic partitions automatically" title="Direct link to Update topic partitions automatically">​</a></h2><p>In Pulsar 2.5.2, the C++ client supports previously-created producers and consumers to automatically update partitions when the partitions for a topic are updated.</p><ul><li>Add a <code>boost::asio::deadline_timer</code> to <code>PartitionedConsumerImpl</code> and <code>PartitionedProducerImpl</code> to register a lookup task to detect partition changes periodically.</li><li>Add an unsigned int configuration parameter to indicate the period of detecting partition changes.</li><li>Unlock the <code>mutex_</code> in <code>PartitionedConsumerImpl::receive</code> after <code>state_</code> were checked.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="fix-default-message-id-in-sent-callback">Fix default message ID in sent callback<a href="#fix-default-message-id-in-sent-callback" class="hash-link" aria-label="Direct link to Fix default message ID in sent callback" title="Direct link to Fix default message ID in sent callback">​</a></h2><p>In previous releases, the <code>MessageId</code> in the callback is always the default value (<code>-1, -1, -1, -1</code>). In Pulsar 2.5.2, we remove the useless field <code>messageId</code> of <code>BatchMessageContainer::MessageContainer</code> and add the <code>const MessageId&amp;</code> argument to <code>batchMessageCallBack</code>. Therefore, we can get the correct message ID in the callback if the message is sent successfully.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="fix-message-id-error-if-messages-are-sent-to-partitioned-topics">Fix message ID error if messages are sent to partitioned topics<a href="#fix-message-id-error-if-messages-are-sent-to-partitioned-topics" class="hash-link" aria-label="Direct link to Fix message ID error if messages are sent to partitioned topics" title="Direct link to Fix message ID error if messages are sent to partitioned topics">​</a></h2><p>If messages are sent to a partitioned topic, the <code>partition</code> field of the message ID is always set to -1 because the <code>SendReceipt</code> command only contains the ledger ID and the entry ID. In Pulsar 2.5.2, we fix this bug by adding a <code>partition</code> field to <code>ProducerImpl</code> and setting the <code>partition</code> field of the message ID with it in the <code>ackReceived</code> method.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="support-async-mode-for-pulsar-functions">Support Async mode for Pulsar Functions<a href="#support-async-mode-for-pulsar-functions" class="hash-link" aria-label="Direct link to Support Async mode for Pulsar Functions" title="Direct link to Support Async mode for Pulsar Functions">​</a></h2><p>In previous releases, Pulsar Functions does not support the Async mode, such as the user passed in a Function in the following format:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Function&lt;I, CompletableFuture&lt;O&gt;&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This kind of function is useful if the Pulsar Functions use RPCs to call external systems. Therefore, in Pulsar 2.5.2, we introduce Async mode support for Pulsar Functions.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="fix-localrunner-netty-dependency-issue">Fix localrunner netty dependency issue<a href="#fix-localrunner-netty-dependency-issue" class="hash-link" aria-label="Direct link to Fix localrunner netty dependency issue" title="Direct link to Fix localrunner netty dependency issue">​</a></h2><p>In Pulsar 2.5.2, we add a Log4j2 configuration file for pulsar-functions-local-runner to log to console by default. This helps troubleshoot the problem that Netty libraries are missing and the class is not found, when pulling in pulsar-functions-local-runner as a dependency and attempting to run Pulsar Functions locally.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="fix-serde-validation-of-pulsar-functions-update">Fix SerDe validation of Pulsar Functions update<a href="#fix-serde-validation-of-pulsar-functions-update" class="hash-link" aria-label="Direct link to Fix SerDe validation of Pulsar Functions update" title="Direct link to Fix SerDe validation of Pulsar Functions update">​</a></h2><p>In previous releases, the <code>outputSchemaType</code> field is improperly used to validate parameters for Pulsar Function updates. In fact, the <code>outputSerdeClassName</code> parameter should be used. In Pulsar 2.5.2, we fix this bug.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="avoid-pre-fetching-too-much-data-when-offloading-data-to-hdfs">Avoid pre-fetching too much data when offloading data to HDFS<a href="#avoid-pre-fetching-too-much-data-when-offloading-data-to-hdfs" class="hash-link" aria-label="Direct link to Avoid pre-fetching too much data when offloading data to HDFS" title="Direct link to Avoid pre-fetching too much data when offloading data to HDFS">​</a></h2><p>If too much data is pre-fetched when data is offloaded to HDFS, it may cause severe OOM. In Pulsar 2.5.2, the <code>managedLedgerOffloadPrefetchRounds</code> is introduced, which is used to set the maximum pre-fetch rounds for ledger reading for offloading data.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="jdbc-sink-handles-null-fields-in-schema">JDBC sink handles null fields in schema<a href="#jdbc-sink-handles-null-fields-in-schema" class="hash-link" aria-label="Direct link to JDBC sink handles null fields in schema" title="Direct link to JDBC sink handles null fields in schema">​</a></h2><p>JDBC sink does not handle <code>null</code> fields. The schema registered in Pulsar allows for it and the table schema in MySQL has a column of the same name. When messages are sent to the JDBC sink without that field, an exception is thrown. In Pulsar 2.5.2, the JDBC sink uses the <code>setColumnNull</code> method to properly reflect the null field value in the database row.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference">​</a></h2><p>To download Apache Pulsar 2.5.2, click <a href="https://pulsar.apache.org/download/" target="_blank" rel="noopener noreferrer">here</a>.</p><p>If you have any questions or suggestions, contact us with mailing lists or slack.</p><ul><li><a href="mailto:users@pulsar.apache.org" target="_blank" rel="noopener noreferrer">users@pulsar.apache.org</a></li><li><a href="mailto:dev@pulsar.apache.org" target="_blank" rel="noopener noreferrer">dev@pulsar.apache.org</a></li><li>Pulsar slack channel: <a href="https://apache-pulsar.slack.com/" target="_blank" rel="noopener noreferrer">https://apache-pulsar.slack.com/</a></li><li>Self-registration at <a href="https://apache-pulsar.herokuapp.com/" target="_blank" rel="noopener noreferrer">https://apache-pulsar.herokuapp.com/</a></li></ul><p>Looking forward to your contributions to <a href="https://github.com/apache/pulsar" target="_blank" rel="noopener noreferrer">Pulsar</a>.</p>]]></content>
        <author>
            <name>Jia Zhai</name>
            <uri>https://twitter.com/Jia_Zhai</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Apache Pulsar 2.5.1]]></title>
        <id>https://pulsar.apache.org/blog/2020/04/23/Apache-Pulsar-2-5-1</id>
        <link href="https://pulsar.apache.org/blog/2020/04/23/Apache-Pulsar-2-5-1"/>
        <updated>2020-04-23T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[We are proud to publish Apache Pulsar 2.5.1. This is the result of a huge effort from the community, with over 130 commits and a long list of new features, general improvements and bug fixes.]]></summary>
        <content type="html"><![CDATA[<p>We are proud to publish Apache Pulsar 2.5.1. This is the result of a huge effort from the community, with over 130 commits and a long list of new features, general improvements and bug fixes.</p><p>For detailed changes related to 2.5.1 release, refer to the <b><a href="/release-notes/#2.5.1">release notes</a></b> and the <b><a href="https://github.com/apache/pulsar/pulls?q=is:pr%20label:release/2.5.1%20is:closed" target="_blank" rel="noopener noreferrer">PR list for Pulsar 2.5.1</a></b>.</p><p>The following justs highlights a tiny subset of new features.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="refresh-authentication-credentials">Refresh authentication credentials<a href="#refresh-authentication-credentials" class="hash-link" aria-label="Direct link to Refresh authentication credentials" title="Direct link to Refresh authentication credentials">​</a></h2><p>In Pulsar 2.5.1, two more methods are introduced in the single <code>AuthenticationState</code> interface credentials holder. This helps enhance the Pulsar authentication framework to support credentials that expire over time and need to be refreshed by forcing clients to re-authenticate.</p><p>Existing authentication plugins are unaffected. If a new plugin wants to support expiration, it just overrides the <code>isExpired()</code> method. The Pulsar broker ensures to periodically check the expiration status for the AuthenticationState of every <code>ServerCnx</code> object. You can also use the <code>authenticationRefreshCheckSeconds</code> setting to control the frequency of the expiration check.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="upgrade-avro-to-191">Upgrade Avro to 1.9.1<a href="#upgrade-avro-to-191" class="hash-link" aria-label="Direct link to Upgrade Avro to 1.9.1" title="Direct link to Upgrade Avro to 1.9.1">​</a></h2><p>The library used to handle logical datetime values has been changed from Joda-Time to JSR-310. For keeping forward compatibility, Pulsar java client uses Joda-Time conversion for logical datetime. To use JSR-310 conversion, you can enable it in the schema definition.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token class-name">AvroSchema</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">of</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">SchemaDefinition</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">builder</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">withJSR310ConversionEnabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">build</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>By default, Avro 1.9.1 enables the JSR310 datetimes, which might introduce some regression problems if users use source codes generated by Avro compiler 1.8.x and the source codes contain datetimes fields. It is recommended to use Avro 1.9.x compiler to recompile.</p></div></div><p>And, Avro may remove the Joda time support in the future. This may also be deleted in Pulsar in the future.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="support-unloading-all-partitions-of-a-partitioned-topic">Support unloading all partitions of a partitioned topic<a href="#support-unloading-all-partitions-of-a-partitioned-topic" class="hash-link" aria-label="Direct link to Support unloading all partitions of a partitioned topic" title="Direct link to Support unloading all partitions of a partitioned topic">​</a></h2><p>Before Pulsar 2.5.1, Pulsar supports unloading a non-partitioned topic or a partition of a partitioned topic. If there is a partitioned topic with too many partitions, users need to get all partitions and unload them one by one. In Pulsar 2.5.1, we support unloading all partitions of a partitioned topic.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="supports-evenly-distributing-topics-count-when-splitting-bundle">Supports evenly distributing topics count when splitting bundle<a href="#supports-evenly-distributing-topics-count-when-splitting-bundle" class="hash-link" aria-label="Direct link to Supports evenly distributing topics count when splitting bundle" title="Direct link to Supports evenly distributing topics count when splitting bundle">​</a></h2><p>In Pulsar 2.5.1, we introduce an option(<code>-balance-topic-count</code>) for bundle split. When setting this option to true, the given bundle is split into two parts and each part has the same amount of topics. In addition, we bring in a new Load Manager implementation named <code>org.apache.pulsar.broker.loadbalance.impl.BalanceTopicCountModularLoadManager</code>. The new Load Manager implementation splits the bundle with balance topics count.
You can enable this feature in the broker.conf:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">defaultNamespaceBundleSplitAlgorithm=topic_count_equally_divide</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you use the Pulsar Admin to split a bundle, you can use following command to split bundle based on topics count:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">bin/pulsar-admin namespaces split-bundle -b 0x00000000_0xffffffff --split-algorithm-name topic_count_equally_divide public/default</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="support-keyvalue-schema-for-pulsar-sql">Support KeyValue schema for Pulsar SQL<a href="#support-keyvalue-schema-for-pulsar-sql" class="hash-link" aria-label="Direct link to Support KeyValue schema for Pulsar SQL" title="Direct link to Support KeyValue schema for Pulsar SQL">​</a></h2><p>Before Pulsar 2.5.1, Pulsar SQL cannot read the keyValue schema data. In Pulsar 2.5.1, we add the prefix <code>key.</code> for the key field name, add the prefix <code>value.</code> for the value field name. Therefore, Pulsar SQL can read the keyValue schema data.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="update-netty-version-to-4145final">Update Netty version to <code>4.1.45.Final</code><a href="#update-netty-version-to-4145final" class="hash-link" aria-label="Direct link to update-netty-version-to-4145final" title="Direct link to update-netty-version-to-4145final">​</a></h2><p>Netty 4.1.43 has a bug, which prevents it from using Linux native Epoll transport. This makes Pulsar brokers fail over to NioEventLoopGroup even when running on Linux. The bug is fixed in Netty  <code>4.1.45.Final</code> .</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="improve-key_shared-subscription-message-dispatching-performance">Improve Key_Shared subscription message dispatching performance<a href="#improve-key_shared-subscription-message-dispatching-performance" class="hash-link" aria-label="Direct link to Improve Key_Shared subscription message dispatching performance" title="Direct link to Improve Key_Shared subscription message dispatching performance">​</a></h2><p>In Pulsar 2.5.1, to improve Key_Shared subscription message dispatching performance, we make the following operations for saving CPU usage which can improve non-batched message dispatch performance:</p><ul><li>Reduce making hash for the message key.</li><li>Reduce the number of finding consumers for message keys..</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="add-joda-time-logical-type-conversion">Add Joda time logical type conversion<a href="#add-joda-time-logical-type-conversion" class="hash-link" aria-label="Direct link to Add Joda time logical type conversion" title="Direct link to Add Joda time logical type conversion">​</a></h2><p>In Pulsar 2.5.1, Avro is upgraded to 1.9.x and the default time conversion is changed to JSR-310. For forwarding compatibility, we add the Joda time conversion in Pulsar 2.5.1 and enable it by default</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="support-deleting-inactive-topic-when-subscriptions-caught-up">Support deleting inactive topic when subscriptions caught up<a href="#support-deleting-inactive-topic-when-subscriptions-caught-up" class="hash-link" aria-label="Direct link to Support deleting inactive topic when subscriptions caught up" title="Direct link to Support deleting inactive topic when subscriptions caught up">​</a></h2><p>Before Pulsar 2.5.1, Pulsar supported deleting inactive topics that have no active producers or subscriptions. In Pulsar 2.5.1, we expose inactive topic delete mode in <code>broker.conf</code> to delete inactive topics that have no active producers or consumers but all subscriptions of the topic are caught up. You can enable this feature in the broker.conf:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">brokerDeleteInactiveTopicsMode=delete_when_subscriptions_caught_up</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduce-maxmessagepublishbuffersizeinmb-configuration-to-avoid-broker-oom">Introduce maxMessagePublishBufferSizeInMB configuration to avoid broker OOM<a href="#introduce-maxmessagepublishbuffersizeinmb-configuration-to-avoid-broker-oom" class="hash-link" aria-label="Direct link to Introduce maxMessagePublishBufferSizeInMB configuration to avoid broker OOM" title="Direct link to Introduce maxMessagePublishBufferSizeInMB configuration to avoid broker OOM">​</a></h2><p>Before Pulsar 2.5.1, if a broker has a smaller direct memory (e.g. 2G) and runs pulsar-perf to write messages, the broker becomes unstable. Because the broker reads messages from the channel automatically and the ByteBuf cannot be released until the entry is written to Bookie successfully or the timeout expires.
In Pulsar 2.5.1, we introduce the <code>maxMessagePublishBufferSizeInMB</code> configuration to avoid broker OOM (Out of Memory). If the processing message size exceeds this value, the broker stops reading data from the connection. When the available size is greater than half of the maxMessagePublishBufferSizeInMB,  the broker starts automatically reading data from the connection. You can set up the publish buffer size in broker.conf:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Max memory size for broker handling messages sending from producers.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># If the processing message size exceed this value, broker will stop read data</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># from the connection. The processing messages means messages are sends to broker</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># but broker have not send response to client, usually waiting to write to bookies.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># It's shared across all the topics running in the same broker.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Use -1 to disable the memory limitation. Default is 1/2 of direct memory.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">maxMessagePublishBufferSizeInMB=</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="support-bouncycastle-fips-provider">Support BouncyCastle FIPS provider<a href="#support-bouncycastle-fips-provider" class="hash-link" aria-label="Direct link to Support BouncyCastle FIPS provider" title="Direct link to Support BouncyCastle FIPS provider">​</a></h2><p>In Pulsar 2.5.1, Pulsar supports BC-FIPS (BouncyCastle FIPS) provider. Before Pulsar 2.5.1, Pulsar only supported BouncyCastle (BC) provider, and BC JARs are tied strongly into both the broker and the client code. Users fail to change from the BC provider to the BC-FIPS provider. This feature splits the BC dependency out into a separate module. Therefore, users can freely switch between the BC provider and the BC-FIPS provider.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="allow-tenant-admin-to-manage-subscription-permission">Allow tenant Admin to manage subscription permission<a href="#allow-tenant-admin-to-manage-subscription-permission" class="hash-link" aria-label="Direct link to Allow tenant Admin to manage subscription permission" title="Direct link to Allow tenant Admin to manage subscription permission">​</a></h2><p>In previous releases, we have added support to grant subscriber-permission to manage subscription based APIs. However, grant-subscription-permission API requires super-user access and it creates too much dependency on system-admin when many tenants want to grant subscription permission.
In Pulsar 2.5.1, through the Restful API or the Pulsar Admin, we allow each tenant Admin to manage subscription permission in order to reduce administrative efforts for super users.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="allow-to-enabledisable-delayed-delivery-for-messages-on-namespace">Allow to enable/disable delayed delivery for messages on namespace<a href="#allow-to-enabledisable-delayed-delivery-for-messages-on-namespace" class="hash-link" aria-label="Direct link to Allow to enable/disable delayed delivery for messages on namespace" title="Direct link to Allow to enable/disable delayed delivery for messages on namespace">​</a></h2><p>In Pulsar 2.5.1, we add the <code>set-delayed-delivery</code> and  <code>set-delayed-delivery-time</code>  policies for the namespace. Therefore, Pulsar 2.5.1 allows to enable or disable delayed delayed delivery for messages on namespace.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="support-offloader-at-namespace-level">Support offloader at namespace level<a href="#support-offloader-at-namespace-level" class="hash-link" aria-label="Direct link to Support offloader at namespace level" title="Direct link to Support offloader at namespace level">​</a></h2><p>In previous releases, the offload operation only had the cluster-level configuration. Users cannot set the offload configuration at the namespace level. In Pulsar 2.5.1, we support using the Pulsar Admin to set the offloader at the namespace level. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="disallow-sub-auto-creation-by-admin-when-disabling-topic-auto-creation">Disallow sub auto creation by Admin when disabling topic auto creation<a href="#disallow-sub-auto-creation-by-admin-when-disabling-topic-auto-creation" class="hash-link" aria-label="Direct link to Disallow sub auto creation by Admin when disabling topic auto creation" title="Direct link to Disallow sub auto creation by Admin when disabling topic auto creation">​</a></h2><p>In previous releases, when Auto topic creation is disabled in KoP, non-partitioned topics are created with Flink Pulsar Source. To fix this bug, in Pulsar 2.5.1, we change the admin code to disable sub auto creation by the Admin when Auto topic creation is disabled.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="support-python-38-for-pulsar-client">Support Python 3.8 for Pulsar client<a href="#support-python-38-for-pulsar-client" class="hash-link" aria-label="Direct link to Support Python 3.8 for Pulsar client" title="Direct link to Support Python 3.8 for Pulsar client">​</a></h2><p>In pulsar 2.5.1, we add <code>3.8 cp38-cp38</code> to support Python 3.8 for the Pulsar client. Therefore, users can install the Pulsar client on Python 3.8 .</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="provide-another-libpulsarwithdepsa-in-debianrpm-cpp-client-library">Provide another <code>libpulsarwithdeps.a</code> in Debian/RPM cpp client library<a href="#provide-another-libpulsarwithdepsa-in-debianrpm-cpp-client-library" class="hash-link" aria-label="Direct link to provide-another-libpulsarwithdepsa-in-debianrpm-cpp-client-library" title="Direct link to provide-another-libpulsarwithdepsa-in-debianrpm-cpp-client-library">​</a></h2><p>Pulsar 2.5.1 mainly provides 2 additional pulsar c++ client libraries in Debian/RPM:</p><ul><li>pulsarSharedNossl (libpulsarnossl.so): it is similar to pulsarShared(libpulsar.so), and has no SSL statically linked.</li><li>pulsarStaticWithDeps(libpulsarwithdeps.a): it is similar to pulsarStatic(libpulsar.a), and is archived in the dependencies libraries of <code>libboost_regex</code>, <code>libboost_system</code>, <code>libcurl</code>, <code>libprotobuf</code>, <code>libzstd</code> and <code>libz</code> statically.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference">​</a></h2><p>To download Apache Pulsar 2.5.1, click <a href="https://pulsar.apache.org/download/" target="_blank" rel="noopener noreferrer">here</a>.
If you have any questions or suggestions, contact us with mailing lists or slack.</p><ul><li><a href="mailto:users@pulsar.apache.org" target="_blank" rel="noopener noreferrer">users@pulsar.apache.org</a></li><li><a href="mailto:dev@pulsar.apache.org" target="_blank" rel="noopener noreferrer">dev@pulsar.apache.org</a></li><li>Pulsar slack channel: <a href="https://apache-pulsar.slack.com/" target="_blank" rel="noopener noreferrer">https://apache-pulsar.slack.com/</a></li><li>Self-registration at <a href="https://apache-pulsar.herokuapp.com/" target="_blank" rel="noopener noreferrer">https://apache-pulsar.herokuapp.com/</a>
Looking forward to your contributions to <a href="https://github.com/apache/pulsar" target="_blank" rel="noopener noreferrer">Pulsar</a>.</li></ul>]]></content>
        <author>
            <name>Guangning E</name>
            <uri>https://twitter.com/tuteng3</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Announcing: The Apache Pulsar 2020 User Survey Report]]></title>
        <id>https://pulsar.apache.org/blog/2020/03/17/announcing-the-apache-pulsar-2020-user-survey-report</id>
        <link href="https://pulsar.apache.org/blog/2020/03/17/announcing-the-apache-pulsar-2020-user-survey-report"/>
        <updated>2020-03-17T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[For the first time ever, the Apache Pulsar PMC team is publishing a user survey report.]]></summary>
        <content type="html"><![CDATA[<p>For the first time ever, the Apache Pulsar PMC team is publishing a user survey report.</p><p><strong>The 2020 Apache Pulsar User Survey Report</strong> reveals Pulsar’s accelerating rate of global
adoption, details how organizations are leveraging Pulsar to build real-time streaming
applications, and highlights key features on Pulsar’s product roadmap.</p><p><img loading="lazy" src="/assets/images/pulsar-user-ban-77aa49b5e28da6ad37b90fa6163d94fa.jpg" width="1200" height="675" class="img_ev3q"></p><p>Pulsar adoption has largely been driven by the market’s increased demand for real-time,
data-enabled technologies. While companies have tried to leverage monolithic messaging
systems to build-out real-time offerings, they’ve hit major roadblocks. Ultimately, these
technologies are not equipped to provide the scale or reliability that mission-critical
applications require.</p><p>As a result, companies have sought-out Apache Pulsar for its cloud-native, distributed
messaging and streaming platform capabilities. From asynchronous applications to core
business applications to ETL, companies are increasingly leveraging Pulsar to develop
real-time applications.</p><p>Pulsar has received global adoption from major technology companies such as Verizon Media,
Narvar, Overstock, Nutanix, Yahoo! JAPAN, Tencent, OVHCloud, and Clever Cloud, who rely on
its ability to deliver on performance, scalability, and resiliency. As the Pulsar project
and community garner increasing attention, we’re excited to share the <strong>2020 Apache Pulsar User Survey Report</strong>.</p><p><img loading="lazy" src="/assets/images/pulsar-adoption-e1c355c5f9829358755adb814ddcd558.png" width="925" height="403" class="img_ev3q"></p><p>In the 2020 Apache Pulsar User Survey Report, we hear from 165 users and learn how their
companies are leveraging Pulsar’s cloud-native, multi-layer design architecture, built-in
multi-tenancy, and multi-cluster replication, to build scalable real-time offerings. This
report details insights and use cases on how organizations are deploying Pulsar today.</p><p>The report also reveals Pulsar’s top-used features, its most popular applications, and how
it is delivering scalable, reliable, real-time streaming solutions for organizations. In
this quotation from Qiang Fei, Tech Lead for Tencent, we see how <a href="https://streamnative.io/whitepaper/case-studay-apache-pulsar-tencent-billing/" target="_blank" rel="noopener noreferrer">one organization is leveraging Pulsar to improve their offering</a>:</p><blockquote><p>Pulsar provides us with a highly consistent and highly reliable distributed message queue that
fits well in our financial use cases. Multi-tenant and storage separation architecture design
greatly reduces our operational and maintenance overhead. We have used Pulsar on a very large
scale in our organization and we are impressed that Pulsar is able to provide high consistency
while supporting high concurrent client connections.</p><ul><li>Qiang Fei, Tech Lead at Tencent</li></ul></blockquote><p>From its built-in multi-tenancy, which reduces architectural complexity and enables organizations
to scale, to its multi-datacenter replication, which allows Pulsar to handle data center failures,
we see how Pulsar has evolved into a robust and differentiated messaging and streaming platform.
The report also reveals some of the community-driven features on Pulsar’s product roadmap for 2020
and beyond. To find out more, <a href="https://streamnative.io/whitepaper/oss-apache-pulsar-user-survey-report-2020/" target="_blank" rel="noopener noreferrer">download the report today</a>.</p><p>Join us for the first-ever Apache Pulsar Summit on August 26, 2020, in San Francisco, CA.
More details on the Summit to come!</p>]]></content>
        <author>
            <name>Sijie Guo</name>
            <uri>https://twitter.com/sijieg</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Pulsar milestone celebration—200 contributors!]]></title>
        <id>https://pulsar.apache.org/blog/2019/12/20/pulsar-milestone-200-contributors</id>
        <link href="https://pulsar.apache.org/blog/2019/12/20/pulsar-milestone-200-contributors"/>
        <updated>2019-12-20T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Dear Apache Pulsar enthusiast,]]></summary>
        <content type="html"><![CDATA[<p>Dear Apache Pulsar enthusiast,</p><p>As we know, when assessing the health of an open-source community, it is tempting to focus on various quantitative metrics, for example, activity, size (contributors), demographics, diversity, and so on, among which the number of contributors is a key metric for measuring the health and popularity of a project and a way to inform the trends. </p><p>And today, we are very proud to see that <strong>Apache Pulsar has attracted its 200th contributor!</strong> It is an important milestone for our community growth.</p><p>Over the years, there’s been an upward trend that more organizations embracing real-time data and stream processing, and Pulsar is the key component of that shift. As an open-source distributed pub-sub messaging system originally created at Yahoo! and graduated as a Top-Level Project (TLP) in September 2018, Pulsar has launched 79 releases, attracted 4100+ commits from 200 contributors, and received 4.6k+ stars, 1.2k+ forks, and 1.3k+ Slack users up to now.</p><p><img loading="lazy" src="/assets/images/p-200-d293e2cf834990cf6d5a723f6bfc69a7.png" width="2190" height="520" class="img_ev3q"></p><p>This achievement is worth celebrating, and at the same time, we would like to <strong>express sincere gratitude to you</strong> for making what Pulsar is today and shape what Pulsar will be tomorrow.</p><p>Pulsar aims to empower the next generation of event streaming systems by delivering a unified solution that connects, stores and processes real-time event streams. Going forward, we will be continuously dedicated to making Pulsar as a highly flexible, scalable and reliable product and creating a welcoming and sustainable community where Pulsar and you can thrive together.</p><p><img loading="lazy" src="/assets/images/cooperation-981b7bb75ae7414047b9fa30e4cdafb3.png" width="585" height="585" class="img_ev3q"></p><p>P.S. want to be a Pulsar contributor? </p><p>Get started today by <a href="http://pulsar.apache.org/en/contributing/" target="_blank" rel="noopener noreferrer">reading contribution guidelines</a> and <a href="https://github.com/apache/pulsar" target="_blank" rel="noopener noreferrer">submitting a PR</a>, any contribution on codes, docs or other is highly appreciated. Thank you.</p>]]></content>
        <author>
            <name>Yu Liu</name>
            <uri>https://twitter.com/Anonymitaet1</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Pulsar Summit San Francisco 2020 CFP is now open]]></title>
        <id>https://pulsar.apache.org/blog/2019/12/18/Pulsar-summit-cfp</id>
        <link href="https://pulsar.apache.org/blog/2019/12/18/Pulsar-summit-cfp"/>
        <updated>2019-12-18T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Pulsar Summit is an annual conference dedicated to Apache Pulsar community, bringing together an international audience of CTOs/CIOs, developers, data architects, data scientists, Apache Pulsar committers/contributors, and the messaging and streaming community, to share experiences, exchange ideas and knowledge about Pulsar and its growing community, and receive hands-on training sessions led by Pulsar experts.]]></summary>
        <content type="html"><![CDATA[<p>Pulsar Summit is an annual conference dedicated to Apache Pulsar community, bringing together an international audience of CTOs/CIOs, developers, data architects, data scientists, Apache Pulsar committers/contributors, and the messaging and streaming community, to share experiences, exchange ideas and knowledge about Pulsar and its growing community, and receive hands-on training sessions led by Pulsar experts.</p><p>We are excited to announce that the first Pulsar Summit will be held in San Francisco in April, 2020. Talk submissions, pre-registration, and sponsorship opportunities are now open for the conference!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="speak-at-pulsar-summit">Speak at Pulsar Summit<a href="#speak-at-pulsar-summit" class="hash-link" aria-label="Direct link to Speak at Pulsar Summit" title="Direct link to Speak at Pulsar Summit">​</a></h2><p>Presentations and lightning talks are accepted for speaking proposals. Suggested topics cover Pulsar use cases, operations, technology deep dive, and ecosystem. Submissions are open until <strong>January 31, 2020</strong>.</p><p>If you are unsure about your proposal, or want some feedback or advice in general, please do not hesitate to reach out to <a href="mailto:sf-2020@pulsar-summit.org" target="_blank" rel="noopener noreferrer">sf-2020@pulsar-summit.org</a>. We are happy to help out! Further details are available on the <a href="https://pulsar-summit.org/call-for-presentations/" target="_blank" rel="noopener noreferrer">CFP website</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="dates-to-remember">Dates to remember<a href="#dates-to-remember" class="hash-link" aria-label="Direct link to Dates to remember" title="Direct link to Dates to remember">​</a></h2><ul><li>CFP opens: December 15, 2019</li><li>CFP closes: January 31, 2020 - 23:59 PST</li><li>CFP notification: February 21, 2020</li><li>Schedule announcement: February 24, 2020</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="speaker-benefits">Speaker benefits<a href="#speaker-benefits" class="hash-link" aria-label="Direct link to Speaker benefits" title="Direct link to Speaker benefits">​</a></h2><p>When your speaking proposal is approved, you will enjoy the following benefits:</p><ul><li>Full conference pass.</li><li>Exclusive swag only available to speakers.</li><li>Expand your network and raise your profile in the Pulsar community.</li><li>A professionally produced video of your presentation.</li><li>Your name, title, company, and bio will be featured on the Pulsar Summit San Francisco 2020 website.</li><li>Your session will be added to the Pulsar Summit YouTube Channel and promoted on Twitter and LinkedIn.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pre-registration">Pre-registration<a href="#pre-registration" class="hash-link" aria-label="Direct link to Pre-registration" title="Direct link to Pre-registration">​</a></h2><p>If you are interested in attending Pulsar Summit San Francisco 2020, we’d like to hear from you with your <a href="https://pulsar-summit.org/pre-registration/" target="_blank" rel="noopener noreferrer">pre-registration</a>. Your ideas are very important to us, and we will prepare the content accordingly. </p><p>After you submit the pre-registration form, you will be added to the waitlist of Pulsar Summit San Francisco 2020. Once the registration is open, you will be notified with an email.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="sponsor-pulsar-summit">Sponsor Pulsar Summit<a href="#sponsor-pulsar-summit" class="hash-link" aria-label="Direct link to Sponsor Pulsar Summit" title="Direct link to Sponsor Pulsar Summit">​</a></h2><p>Pulsar Summit is a community run conference and your support is needed. Sponsoring this event will provide a great opportunity for your organization to further engage with the Apache Pulsar community. <a href="mailto:partners@pulsar-summit.org" target="_blank" rel="noopener noreferrer">Contact us</a> to learn more.</p><p>Help us make #PulsarSummit 2020 a big success by spreading the word and submitting your proposal! Follow us on Twitter (<a href="https://twitter.com/PulsarSummit" target="_blank" rel="noopener noreferrer">@pulsarsummit</a>) to receive the latest updates of the conference!</p><p>Hope to see you at Pulsar Summit San Francisco 2020!</p>]]></content>
        <author>
            <name>Jennifer Huang</name>
            <uri>https://twitter.com/Jennife06125739</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Apache Pulsar 2.4.2]]></title>
        <id>https://pulsar.apache.org/blog/2019/12/04/Apache-Pulsar-2-4-2</id>
        <link href="https://pulsar.apache.org/blog/2019/12/04/Apache-Pulsar-2-4-2"/>
        <updated>2019-12-04T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[We are proud to publish Apache Pulsar 2.4.2. Thank the great efforts from Apache Pulsar community with over 110 commits, covering improvements and bug fixes.]]></summary>
        <content type="html"><![CDATA[<p>We are proud to publish Apache Pulsar 2.4.2. Thank the great efforts from Apache Pulsar community with over 110 commits, covering improvements and bug fixes.</p><p>For detailed changes related to 2.4.2 release, refer to <b><a href="/release-notes/#2.4.2">release notes</a></b>.</p><p>I will highlight some improvements and bug fixes in this blog.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="use-classloaders-to-load-java-functions">Use classLoaders to load Java functions<a href="#use-classloaders-to-load-java-functions" class="hash-link" aria-label="Direct link to Use classLoaders to load Java functions" title="Direct link to Use classLoaders to load Java functions">​</a></h2><p>In Pulsar 2.4.2, windowed functions can work well whether Java Functions instances use shaded JAR or classLoaders, and functionClassLoader is set correctly when the <code>--output-serde-classname</code> option is enabled.</p><p>Before Pulsar 2.4.2, Java Functions instances are started with a shaded JAR, and different classLoaders are used to load the internal Pulsar code, user code, and the interfaces that the two interacts with each other. This change results in two issues:</p><ul><li>The windowed functions do not work well if Java Functions instances use classLoaders. </li><li>When using the <code>--output-serde-classname</code> option, functionClassLoader is not set correctly.  </li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="start-broker-with-functions-worker">Start Broker with Functions worker<a href="#start-broker-with-functions-worker" class="hash-link" aria-label="Direct link to Start Broker with Functions worker" title="Direct link to Start Broker with Functions worker">​</a></h2><p>In Pulsar 2.4.2, we can start Broker with Functions worker when broker client is enabled with TLS. Before Pulsar 2.4.2, when we run Functions worker with the broker, it checks whether TLS is enabled in the <code>function_worker.yml</code> file. If TLS is enabled, it uses TLS port. However, when TLS is enabled on Functions worker, it checks the <code>broker.conf</code>. Since Functions worker runs with the broker, it makes sense to check the <code>broker.conf</code> as the single source of truth about whether or not to use TLS. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="add-error-code-and-error-message-when-a-key-does-not-exist">Add error code and error message when a key does not exist<a href="#add-error-code-and-error-message-when-a-key-does-not-exist" class="hash-link" aria-label="Direct link to Add error code and error message when a key does not exist" title="Direct link to Add error code and error message when a key does not exist">​</a></h2><p>In Pulsar Functions, BookKeeper is supported to store the state of Functions. When users attempt to fetch a key that does not exist from function state, an NPE(NullPointerException) error occurs. In Pulsar 2.4.2, we add error code and error message for the case when a key does not exist.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="deduplication">Deduplication<a href="#deduplication" class="hash-link" aria-label="Direct link to Deduplication" title="Direct link to Deduplication">​</a></h2><p>Deduplication removes messages based on the the largest sequence ID that pre-persisted. If an error is persisted to BookKeeper, a retry attempt is "deduplicated" with no message ever getting persisted. In version 2.4.2, we fix the issue from the following two aspects:                                                                                              </p><ul><li>Double check the pending messages and return error to the producer when the duplication status is uncertain. For example, when a message is still pending.</li><li>Sync back the lastPushed map with the lastStored map after failures.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="consume-data-from-the-earliest-location">Consume data from the earliest location<a href="#consume-data-from-the-earliest-location" class="hash-link" aria-label="Direct link to Consume data from the earliest location" title="Direct link to Consume data from the earliest location">​</a></h2><p>In Pulsar 2.4.2, we add <code>--subs-position</code> for Pulsar Sinks, so users can consume data from the latest and earliest locations. Before 2.4.2 release, data in topics is consumed from the latest location in Pulsar Sinks by default, and users can not consume the earliest data in sink topic. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="close-previous-dispatcher-when-the-subscription-type-changes">Close previous dispatcher when the subscription type changes<a href="#close-previous-dispatcher-when-the-subscription-type-changes" class="hash-link" aria-label="Direct link to Close previous dispatcher when the subscription type changes" title="Direct link to Close previous dispatcher when the subscription type changes">​</a></h2><p>In Pulsar 2.4.2, when the type of a subscription changes, a new dispatcher is created, and the old dispatcher is closed, thus avoiding memory leaks. Before 2.4.2, when the subscription type of a topic changes, a new dispatcher is created and the old one is discarded, yet not closed, which causes memory leaks. If the cursor is not durable, the subscription is closed and removed from the topic when all consumers are removed. The dispatcher should be closed at this time. Otherwise, RateLimiter instances are not garbage collected, which results in a memory leak. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="select-an-active-consumer-based-on-the-subscription-order">Select an active consumer based on the subscription order<a href="#select-an-active-consumer-based-on-the-subscription-order" class="hash-link" aria-label="Direct link to Select an active consumer based on the subscription order" title="Direct link to Select an active consumer based on the subscription order">​</a></h2><p>In Pulsar 2.4.2, the active consumer is selected based on the subscription order. The first consumer in the consumer list is selected as an active consumer without sorting. Before 2.4.2, the active consumer is selected based on the priority level and consumer name. In this case, the active consumer joins and leaves, and no consumer is actually elected as "active" or consumes messages. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="remove-failed-stale-producer-from-the-connection">Remove failed stale producer from the connection<a href="#remove-failed-stale-producer-from-the-connection" class="hash-link" aria-label="Direct link to Remove failed stale producer from the connection" title="Direct link to Remove failed stale producer from the connection">​</a></h2><p>In Pulsar 2.4.2, failed producer is removed correctly from the connection. Before Pulsar 2.4.2, broker cannot clean up the old failed producer correctly from the connection. When broker tries to clean up <code>producer-future</code> in the failed producer, it removes the newly created <code>producer-future</code> rather than the old failed producer, and the following error occurs in broker.</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">17:22:00.700 [pulsar-io-21-26] WARN  org.apache.pulsar.broker.service.ServerCnx - [/1.1.1.1:1111][453] Producer with id persistent://prop/cluster/ns/topic is already present on the connection</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="add-new-apis-for-schema">Add new APIs for schema<a href="#add-new-apis-for-schema" class="hash-link" aria-label="Direct link to Add new APIs for schema" title="Direct link to Add new APIs for schema">​</a></h2><p>In Pulsar 2.4.2, we add the following APIs for schema:</p><ul><li><code>getAllVersions</code>: return the list of schema versions for a given topic.</li><li><code>testCompatibility</code>: be able to test the compatibility for a schema without registering it.</li><li><code>getVersionBySchema</code>: provide a schema definition and provide the schema version for it.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="expose-getlastmessageid-method-in-consumerimpl">Expose <code>getLastMessageId()</code> method in consumerImpl<a href="#expose-getlastmessageid-method-in-consumerimpl" class="hash-link" aria-label="Direct link to expose-getlastmessageid-method-in-consumerimpl" title="Direct link to expose-getlastmessageid-method-in-consumerimpl">​</a></h2><p>In Pulsar 2.4.2, we expose <code>getLastMessageId()</code> method in consumerImpl. It benefits users when they want to know the lag messages, or only consume messages before the current time.                                                     </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="add-new-send-interface-in-cgo">Add new <code>send()</code> interface in C++/Go<a href="#add-new-send-interface-in-cgo" class="hash-link" aria-label="Direct link to add-new-send-interface-in-cgo" title="Direct link to add-new-send-interface-in-cgo">​</a></h2><p>In Pulsar 2.4.2, we add new <code>send()</code> interface in C++/Go, so the <code>MessageID</code> will be returned to users. The logic is consistent with that in Java. In Java client, the <code>MessageId send(byte[] message)</code> returns <code>MessageId</code> for users.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="consumer-background-tasks-are-cancelled-after-subscription-failures">Consumer background tasks are cancelled after subscription failures<a href="#consumer-background-tasks-are-cancelled-after-subscription-failures" class="hash-link" aria-label="Direct link to Consumer background tasks are cancelled after subscription failures" title="Direct link to Consumer background tasks are cancelled after subscription failures">​</a></h2><p>In Pulsar 2.4.2, we ensure that consumer background tasks are cancelled after subscription failures. Before 2.4.2, some background consumer tasks are started in the ConsumerImpl constructor though these tasks are not cancelled if the consumer creation fails, leaving active references to these objects. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="delete-topics-attached-with-regex-consumers">Delete topics attached with regex consumers<a href="#delete-topics-attached-with-regex-consumers" class="hash-link" aria-label="Direct link to Delete topics attached with regex consumers" title="Direct link to Delete topics attached with regex consumers">​</a></h2><p>In Pulsar 2.4.2, we can delete topics attached with a regex consumer. The followings are detailed methods.</p><ul><li>Add a flag in CommandSubscribe so that a regex consumer will never trigger the creation of a topic.</li><li>Subscribe to a non-existing topic. When a specific error occurs, the consumer is interpreted as a permanent failure and thus stopping retrying.</li></ul><p>Before 2.4.2, it's not possible to delete topics when there is a regex consumer attached to them. The reason is that the regex consumer will immediately reconnect and re-create the topic. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference">​</a></h2><p>Download Pulsar 2.4.2 <a href="https://pulsar.apache.org/download/" target="_blank" rel="noopener noreferrer">here</a>. </p><p>If you have any questions or suggestions, contact us with mailing lists or slack. </p><ul><li><a href="mailto:users@pulsar.apache.org" target="_blank" rel="noopener noreferrer">users@pulsar.apache.org</a> </li><li><a href="mailto:dev@pulsar.apache.org" target="_blank" rel="noopener noreferrer">dev@pulsar.apache.org</a> </li><li>Pulsar slack channel: <a href="https://apache-pulsar.slack.com/" target="_blank" rel="noopener noreferrer">https://apache-pulsar.slack.com/</a></li><li>You can self-register at <a href="https://apache-pulsar.herokuapp.com/" target="_blank" rel="noopener noreferrer">https://apache-pulsar.herokuapp.com/</a></li></ul><p>Looking forward to your contributions to <a href="https://github.com/apache/pulsar" target="_blank" rel="noopener noreferrer">Pulsar</a>.</p>]]></content>
        <author>
            <name>Xiaolong Ran</name>
            <uri>https://twitter.com/wolf4j1</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Apache Pulsar 2.4.0]]></title>
        <id>https://pulsar.apache.org/blog/2019/07/05/Apache-Pulsar-2-4-0</id>
        <link href="https://pulsar.apache.org/blog/2019/07/05/Apache-Pulsar-2-4-0"/>
        <updated>2019-07-05T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[We are glad to publish Apache Pulsar 2.4.0. This is the result of a huge]]></summary>
        <content type="html"><![CDATA[<p>We are glad to publish Apache Pulsar 2.4.0. This is the result of a huge
effort from the community, with over 460 commits and a long list of new features,
general improvements and bug fixes.</p><p>Check out the <b><a href="/release-notes/#2.4.0">release notes</a></b> for a detailed list of
the changes, with links to the relevant pull requests, discussions and documentation.</p><p>Regarding new features introduced, I just want to highlight here a tiny subset of them:</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="delayed-message-delivery">Delayed message delivery<a href="#delayed-message-delivery" class="hash-link" aria-label="Direct link to Delayed message delivery" title="Direct link to Delayed message delivery">​</a></h3><p>It's now possible to send a delayed message by Pulsar producer, and a delayed message will be
available after a delay time.</p><p>The Java code for a client using delayed messages delivery looks as follows:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">producer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">newMessage</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"delayed message"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">deliverAfter</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token class-name">TimeUnit</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">SECONDS</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">send</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><ol><li>Messages are only delayed on shared subscriptions, other subscriptions will deliver immediately.</li><li>Delayed messages are sent individually even if you enable message batching on producer.</li></ol></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="go-functions">Go Functions<a href="#go-functions" class="hash-link" aria-label="Direct link to Go Functions" title="Direct link to Go Functions">​</a></h3><p>Before 2.4.0 release, Java and Python are supported to write Pulsar Functions. Now, you can
use Go to write Pulsar Functions, the following is an example of
a Pulsar Function written in Go.</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">"fmt"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">"context"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">"github.com/apache/pulsar/pulsar-function-go/pf"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">func</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">HandleRequest</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">ctx context</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Context</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> in </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token builtin" style="color:rgb(189, 147, 249)">byte</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">error</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    fmt</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">Println</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token function" style="color:rgb(80, 250, 123)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">in</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"!"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token boolean">nil</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">func</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">main</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    pf</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">Start</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">HandleRequest</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="key_shared-subscription">Key_Shared subscription<a href="#key_shared-subscription" class="hash-link" aria-label="Direct link to Key_Shared subscription" title="Direct link to Key_Shared subscription">​</a></h3><p>A new subscription mode <code>Key_shared</code> is introduced in 2.4.0. In <code>Key_shared</code> subscription mode,
one partition could have several consumers to consume messages in parallelism and ensure messages
with the same key are distributed to a consumer in order.
Here is <a href="http://pulsar.apache.org/docs/en/concepts-messaging/#key_shared" target="_blank" rel="noopener noreferrer">architecture</a>
for Key_Shared.</p><p>The following is an example to use <code>Key_shared</code> subscription:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">client</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">newConsumer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">topic</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"topic"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">subscriptionType</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">SubscriptionType</span><span class="token class-name punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token class-name">Key_Shared</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">subscriptionName</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"sub-1"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">subscribe</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="schema-versioning">Schema versioning<a href="#schema-versioning" class="hash-link" aria-label="Direct link to Schema versioning" title="Direct link to Schema versioning">​</a></h3><p>Before 2.4.0 release, Avro schema used one schema for both writer schema and reader schema.
Multiple schemas version is supported now.</p><p>With multiple schemas, a producer can send messages with different schema versions and a consumer
can read messages with different schemas.</p><p>In 2.4.0 release, <code>FORWARD_TRANSITIVE</code>, <code>BACKWARD_TRANSITIVE</code> and <code>FULL_TRANSITIVE</code> compatibility
strategies are added to check the compatibility with all existing schema version.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="replicated-subscription">Replicated subscription<a href="#replicated-subscription" class="hash-link" aria-label="Direct link to Replicated subscription" title="Direct link to Replicated subscription">​</a></h3><p>In 2.4.0 release, a mechanism is added to keep subscription state in sync, within a sub-second timeframe,
in the context of a topic that is being asynchronously replicated across multiple geographical
regions. Here is <a href="https://github.com/apache/pulsar/wiki/PIP-33%3A-Replicated-subscriptions" target="_blank" rel="noopener noreferrer">architecture</a>
for replicated subscription.</p><p>The following is an example to use replicated subscription:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token class-name">Consumer</span><span class="token generics punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"> consumer </span><span class="token operator">=</span><span class="token plain"> client</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">newConsumer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name">Schema</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">STRING</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">topic</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"my-topic"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">subscriptionName</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"my-subscription"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">replicateSubscriptionState</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">subscribe</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="new-io-connectors">New IO connectors<a href="#new-io-connectors" class="hash-link" aria-label="Direct link to New IO connectors" title="Direct link to New IO connectors">​</a></h3><p>A new batch of connectors is added, including Flume, Redis sink, Solr sink, RabbitMQ sink.
The following lists builtin <a href="http://pulsar.apache.org/docs/en/io-connectors/" target="_blank" rel="noopener noreferrer">connectors</a>
that Pulsar supports.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="security">Security<a href="#security" class="hash-link" aria-label="Direct link to Security" title="Direct link to Security">​</a></h3><p>In 2.4.0 release, Kerberos is supported in Apache Pulsar broker and client.
To enable Kerberos authentication, refer to the <a href="http://pulsar.apache.org/docs/en/security-kerberos/" target="_blank" rel="noopener noreferrer">document</a>.</p><p>Also added role based Pulsar Function authentication and authorization.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">​</a></h2><p>If you want to download Pulsar 2.4.0, click <a href="/download/">here</a>. You can send any questions or suggestions
to our mailing lists, contribute to Pulsar on <a href="https://github.com/apache/pulsar" target="_blank" rel="noopener noreferrer">GitHub</a> or join
the Apache Pulsar community on <a href="https://apache-pulsar.herokuapp.com/" target="_blank" rel="noopener noreferrer">Slack</a>.</p>]]></content>
        <author>
            <name>Penghui Li</name>
            <uri>https://twitter.com/lipenghui6</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Apache Pulsar 2.3.0]]></title>
        <id>https://pulsar.apache.org/blog/2019/02/20/Apache-Pulsar-2-3-0</id>
        <link href="https://pulsar.apache.org/blog/2019/02/20/Apache-Pulsar-2-3-0"/>
        <updated>2019-02-20T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[The Apache Pulsar PMC is happy to announce the release of Pulsar 2.3.0. This]]></summary>
        <content type="html"><![CDATA[<p>The Apache Pulsar PMC is happy to announce the release of Pulsar 2.3.0. This
is the result of huge effort from the community, with over 480 commits and
a long list of new features, general improvements and bug fixes.</p><p>These improvements have been across the board in all of Pulsar components,
from new messaging features, to improved usability for Pulsar Functions
and Pulsar IO.</p><p>Check out the official <b><a href="/release-notes/#2.3.0">release notes</a></b> for a
detailed list of the changes, with links to the relevant pull-requests,
discussions and documentation.</p><p>Regarding new features introduced, I just want to highlight here a tiny
subset of them:</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pulsar-functions-in-kubernetes">Pulsar functions in Kubernetes<a href="#pulsar-functions-in-kubernetes" class="hash-link" aria-label="Direct link to Pulsar functions in Kubernetes" title="Direct link to Pulsar functions in Kubernetes">​</a></h3><p>It's now possible to use Kubernetes as the scheduler for Pulsar Functions.</p><p>When a Pulsar cluster is configured to use Kubernetes, submitting a
function, using CLI tools or REST API, will cause the function instances
to be submitted as Kubernetes pods rather than running as processes
or threads within the Pulsar functions worker.</p><p>With this runtime manager, it's possible to set quota on CPU/Mem and
have Kubernetes assign the required resources and enforce isolation
between different instances and functions.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="new-pulsar-io-connectors">New Pulsar IO connectors:<a href="#new-pulsar-io-connectors" class="hash-link" aria-label="Direct link to New Pulsar IO connectors:" title="Direct link to New Pulsar IO connectors:">​</a></h3><p>A new batch of connectors was added, including MongoDB, Elastic Search,
HBase and local files source and sink.</p><p>We introduce support for doing <a href="https://en.wikipedia.org/wiki/Change_data_capture" target="_blank" rel="noopener noreferrer">Change-Data-Capture</a>
with <a href="https://debezium.io/" target="_blank" rel="noopener noreferrer">Debezium</a>. This allows to record all
the update from a database into a Pulsar topic and use it for replication,
streaming jobs, cache updating, etc..</p><p>With Pulsar IO, Debezium will run as a regular Pulsar IO source,
completely managed by Pulsar. Users can easily submit a Debezium
builtin connector to a Pulsar cluster and start feeding data
from a long list of supported databases like MySQL, MongoDB,
PostgreSQL, Oracle and SQL Server.</p><p>Check out the <a href="/docs/io-cdc/">Debezium connector</a> documentation for how
to get started in capturing database changes.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="token-authentication">Token Authentication<a href="#token-authentication" class="hash-link" aria-label="Direct link to Token Authentication" title="Direct link to Token Authentication">​</a></h3><p>Token Authentication provides a very simple and secure method of authentication for Pulsar.
This is based on <a href="https://jwt.io/" target="_blank" rel="noopener noreferrer">JSON Web Tokens</a>.</p><p>With tokens authentication, a client only needs to provide a single credential, or "token", in the
form of an opaque string provided by either the system administrator or some automated service.</p><p>The Java code for a client using token authentication will look like:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token class-name">PulsarClient</span><span class="token plain"> client </span><span class="token operator">=</span><span class="token plain"> </span><span class="token class-name">PulsarClient</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">builder</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">serviceUrl</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"pulsar://broker.example.com:6650/"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">authentication</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token class-name">AuthenticationFactory</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">token</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJKb2UifQ.ipevRNuRP6HflG8cFKnmUPtypruRC4fb1DWtoLL62SY"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">build</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>See <a href="/docs/security-token-client/">Client Authentication using tokens</a> for a complete walk through
and instructions on how to set it up and manage it.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="schema-support-in-python-client-library">Schema support in Python client library<a href="#schema-support-in-python-client-library" class="hash-link" aria-label="Direct link to Schema support in Python client library" title="Direct link to Schema support in Python client library">​</a></h3><p>This feature adds a Python idiomatic way to declare the schema
of a producer or consumer and integrates directly with the Pulsar
schema registry.</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> pulsar</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> pulsar</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">schema </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token plain"> </span><span class="token class-name">Example</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">Record</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    a </span><span class="token operator">=</span><span class="token plain"> String</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    b </span><span class="token operator">=</span><span class="token plain"> Integer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    c </span><span class="token operator">=</span><span class="token plain"> Boolean</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">producer </span><span class="token operator">=</span><span class="token plain"> client</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">create_producer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    topic</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">'my-topic'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    schema</span><span class="token operator">=</span><span class="token plain">AvroSchema</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">Example</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">producer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">send</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">Example</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">a</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">'Hello'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> b</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The above example will make the producer <code>Example</code> schema to be
validated by broker when we try to publish on <code>my-topic</code>. If the
topic has a schema that is incompatible, the producer creation will
fail.</p><p>Currently, the Python schema support Avro and JSON, in addition to
regular types like <code>str</code> and <code>bytes</code>.</p><p>The complete documentation is available at <a href="/docs/client-libraries-python/#schema">Python schema</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="function-state-api-in-python">Function state API in Python<a href="#function-state-api-in-python" class="hash-link" aria-label="Direct link to Function state API in Python" title="Direct link to Function state API in Python">​</a></h3><p>From 2.3.0, Python function can access the state in as similar
way as Java functions, through the context object.</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> pulsar</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># The classic ExclamationFunction that appends an</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># exclamation at the end of the input</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token plain"> </span><span class="token class-name">WordCountFunction</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">pulsar</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Function</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">process</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">input</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> context</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> word </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">input</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">split</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            context</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">incr_counter</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">word</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">input</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"!"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Available methods for state management in the context object are:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">incr_counter</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> key</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> amount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token string" style="color:rgb(255, 121, 198)">""</span><span class="token plain">incr the counter of a given key </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> the managed state</span><span class="token string" style="color:rgb(255, 121, 198)">""</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">get_counter</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> key</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token triple-quoted-string string" style="color:rgb(255, 121, 198)">"""get the counter of a given key in the managed state"""</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">put_state</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> key</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token triple-quoted-string string" style="color:rgb(255, 121, 198)">"""update the value of a given key in the managed state"""</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">get_state</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> key</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token triple-quoted-string string" style="color:rgb(255, 121, 198)">"""get the value of a given key in the managed state"""</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">​</a></h2><p>Please <a href="/download/">download</a> Pulsar 2.3.0 and report feedback, issues or any comment into our mailing lists,
slack channel or Github page. (<a href="/contact/">Contact page</a>)</p>]]></content>
        <author>
            <name>Matteo Merli</name>
            <uri>https://twitter.com/merlimat</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Apache Pulsar 2.1.0-incubating]]></title>
        <id>https://pulsar.apache.org/blog/2018/08/06/Apache-Pulsar-2-1-0</id>
        <link href="https://pulsar.apache.org/blog/2018/08/06/Apache-Pulsar-2-1-0"/>
        <updated>2018-08-06T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[We are glad to present the new 2.1.0-incubating release of Pulsar.]]></summary>
        <content type="html"><![CDATA[<p>We are glad to present the new 2.1.0-incubating release of Pulsar.
This release is the culmination of 2 months of work that have
brought multiple new features and improvements to Pulsar. </p><p>In Pulsar 2.1 you'll see:</p><ul><li><a href="/docs/io-overview/">Pulsar IO</a> connector framework and a list of <a href="/docs/io-connectors/">builtin connectors</a></li><li><a href="https://github.com/apache/incubator-pulsar/wiki/PIP-17:-Tiered-storage-for-Pulsar-topics" target="_blank" rel="noopener noreferrer">PIP-17</a>: <a href="/docs/concepts-tiered-storage/">Tiered Storage</a></li><li>Pulsar <a href="/docs/functions-state/">Stateful Functions</a></li><li><a href="/docs/client-libraries-go/">Go Client</a></li><li><a href="https://github.com/apache/incubator-pulsar/blob/v2.1.0-incubating/pulsar-client-schema/src/main/java/org/apache/pulsar/client/impl/schema/AvroSchema.java" target="_blank" rel="noopener noreferrer">Avro</a>
and <a href="https://github.com/apache/incubator-pulsar/blob/v2.1.0-incubating/pulsar-client-schema/src/main/java/org/apache/pulsar/client/impl/schema/ProtobufSchema.java" target="_blank" rel="noopener noreferrer">Protobuf</a> Schemas</li></ul><p>For details information please check the detailed <a href="/release-notes/#2.1.0-incubating">release notes</a> and <a href="/versions/">2.1.0 documentation</a>.</p><p>We'll provide a brief summary of these features in the section below.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pulsar-io">Pulsar IO<a href="#pulsar-io" class="hash-link" aria-label="Direct link to Pulsar IO" title="Direct link to Pulsar IO">​</a></h2><p>Since Pulsar 2.0, we introduced a serverless inspired lightweight computing framework <a href="/docs/functions-overview/">Pulsar Functions</a>,
providing the easiest possible way to implement application-specific in-stream processing logic of any complexity. A lot of developers
love Pulsar Functions because they require minimal boilerplate and are easy to reason about.</p><p>In Pulsar 2.1, we continued following this "simplicity first" principle on developing Pulsar. We developed this IO (input/output) connector
framework on top of Pulsar Functions, to simplify getting data in and out of Apache Pulsar. You don't need to write any single line of code.
All you need is prepare a configuration file of the system your want to connect to, and use Pulsar admin
CLI to submit a connector to Pulsar. Pulsar will take care of all the other stuffs, such as fault-tolerance, rebalancing and etc.</p><p>There are 6 built-in connectors released in 2.1 release. They are:</p><ul><li><a href="/docs/io-aerospike/">Aerospike Connector</a></li><li><a href="/docs/io-cassandra/">Cassandra Connector</a></li><li><a href="/docs/io-kafka/">Kafka Connector</a></li><li><a href="/docs/io-kinesis/">Kinesis Connector</a></li><li><a href="/docs/io-rabbitmq/">RabbitMQ Connector</a></li><li><a href="/docs/io-twitter/">Twitter Firehose Connector</a> </li></ul><p>You can follow <a href="/docs/io-quickstart/">the tutorial</a> to try out Pulsar IO on connecting Pulsar with <a href="http://cassandra.apache.org/" target="_blank" rel="noopener noreferrer">Apache Cassandra</a>.</p><p>More connectors will be coming in future releases. If you are interested in contributing a connector to Pulsar, checkout the guide on <a href="/docs/io-develop/">Developing Connectors</a>.
It is as simple as writing a Pulsar function.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tiered-storage">Tiered Storage<a href="#tiered-storage" class="hash-link" aria-label="Direct link to Tiered Storage" title="Direct link to Tiered Storage">​</a></h2><p>One of the advantages of Apache Pulsar is <a href="https://streaml.io/blog/pulsar-segment-based-architecture" target="_blank" rel="noopener noreferrer">its segment storage</a> using <a href="https://bookkeeper.apache.org/" target="_blank" rel="noopener noreferrer">Apache BookKeeper</a>. You can store a topic backlog as large as you want.
When the cluster starts to run out of space, you just add another storage node, and the system will automatically
pickup the new storage nodes and start using them without rebalancing partitions. However, this can start to get expensive after a while.</p><p>Pulsar mitigates this cost/size trade-off by providing Tiered Storage. Tiered Storage turns your Pulsar topics into real <em>infinite</em> streams,
by offloading older segments into a long term storage, such as AWS S3, GCS and HDFS, which is designed for storing cold data. To the end user,
there is no perceivable difference between consuming streams whose data is stored in BookKeeper or in long term storage. All the underlying
offloading mechanisms and metadata management are transparent to applications.</p><p>Currently <a href="https://aws.amazon.com/s3/" target="_blank" rel="noopener noreferrer">S3</a> is supported in 2.1. More offloaders (such as Google GCS, Azure Blobstore, and HDFS) are coming
in future releases.</p><p>If you are interested in this feature, you can checkout more details <a href="/docs/cookbooks-tiered-storage/">here</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="stateful-function">Stateful Function<a href="#stateful-function" class="hash-link" aria-label="Direct link to Stateful Function" title="Direct link to Stateful Function">​</a></h2><p>The greatest challenge that stream processing engines face is managing <em>state</em>. So does Pulsar Functions. As the goal for Pulsar Functions
is to simplify developing stream native processing logic, we also want to provide an easier way for Pulsar Functions to manage their state.
We introduced a set of <a href="/docs/functions-state/#api">State API</a> for Pulsar Functions to store their state. It integrates with the table service
in Apache BookKeeper for storing the state.</p><p>It is released as a developer preview feature in Pulsar Functions Java SDK. We would like to collect feedback to improve it in future releases.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="schemas">Schemas<a href="#schemas" class="hash-link" aria-label="Direct link to Schemas" title="Direct link to Schemas">​</a></h2><p>Pulsar 2.0 introduces native support for schemas in Pulsar. It means you can declare how message data looks and have Pulsar enforce that
producers can only publish valid data on the topics. In 2.0, Pulsar only supports <code>String</code>, <code>bytes</code> and <code>JSON</code> schemas. We introduced the
support for <a href="https://avro.apache.org/" target="_blank" rel="noopener noreferrer">Avro</a> and <a href="https://developers.google.com/protocol-buffers/" target="_blank" rel="noopener noreferrer">Protobuf</a> in this release. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="clients">Clients<a href="#clients" class="hash-link" aria-label="Direct link to Clients" title="Direct link to Clients">​</a></h2><p>We have introduced a new <a href="/docs/client-libraries-go/">Go</a> client in 2.1 release. The Pulsar Go client library is based on the <a href="/docs/client-libraries-cpp/">C++</a> client library.</p><p>Follow <a href="/docs/client-libraries-go/#installing-go-package">the instructions</a> to try it out in your Go applications!</p>]]></content>
        <author>
            <name>Sijie Guo</name>
            <uri>https://twitter.com/sijieg</uri>
        </author>
    </entry>
</feed>